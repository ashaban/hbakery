import{_ as Fe,r as c,a0 as S,e as D,l as Te,s as k,x as a,a1 as $e,a2 as Ie,v as p,i as t,y as i,$ as y,H as v,C as d,O as ne,I as s,A as J,B as g,E,F as se,Q as Me,a3 as de,a4 as ue,D as N,a5 as me,j as pe,T as je}from"./index-BEY1_AxZ.js";import{h as fe}from"./moment-C5S46NFB.js";import{V as Se}from"./VContainer-4YzK1OXF.js";import{V as b,b as Y,d as ce,c as ye}from"./VCard-BWg2kNvx.js";import{V as $}from"./VCol-D55Xswv8.js";import{V as K}from"./VAutocomplete-BZjErokO.js";import{V as Ee,a as Ye,b as Ae}from"./VDataTable-XrgRokO0.js";import{V as ve}from"./VChip-B31zWpvD.js";import{V as Be}from"./VSkeletonLoader-B_7LBbGf.js";import{V as be}from"./VDialog-BZVGdgk4.js";import{V as ge}from"./VForm-DWJZ0vFn.js";import{V as Q}from"./VTextField-CUtfiNtd.js";import"./dialog-transition-CW_75ERn.js";import"./VSlideGroup-BBNvX3-_.js";const Ne={class:"d-flex align-center justify-space-between"},Qe={class:"text-h6 font-weight-bold"},Oe={class:"d-flex align-center justify-space-between"},Re={class:"text-h6 font-weight-bold text-blue"},ze={class:"d-flex align-center justify-space-between"},Le={class:"text-h6 font-weight-bold text-green"},He={class:"d-flex gap-2"},Ge={class:"d-flex justify-end mt-4"},Je={class:"d-flex flex-column align-end"},Ke={key:0,class:"text-caption text-grey mt-1"},We={class:"font-weight-medium"},Xe={class:"text-center py-6 text-grey"},Ze={class:"d-flex justify-space-between align-center pa-4"},et={class:"text-caption text-grey"},tt={class:"mb-4"},at={class:"required-field"},lt={class:"d-flex justify-space-between align-center"},ot={class:"text-h6 font-weight-bold text-blue"},rt={class:"text-caption text-grey mt-1"},it={class:"d-flex justify-space-between align-center"},nt={class:"text-h6 font-weight-bold text-green"},st={class:"d-flex flex-column"},dt={key:0,class:"text-caption text-error mt-1"},ut={class:"mb-4"},mt={class:"required-field"},pt={class:"d-flex justify-space-between align-center"},ft={class:"text-h6 font-weight-bold text-blue"},ct={class:"text-caption text-grey mt-1"},yt={class:"d-flex justify-space-between align-center"},vt={class:"text-h6 font-weight-bold text-green"},bt={class:"d-flex flex-column"},gt={key:0,class:"text-caption text-error mt-1"},_t={__name:"Purchases",setup(xt){$e();const O=c([]),U=c([]),R=c(!1),V=c(!1),I=c(!1),w=c(!1),M=c(1),W=c(1),X=c(0),z=c(null),_e=c(null),xe=c(null),q=S({total_quantity:0,total_amount:0}),r=S({item_id:"",quantity:"",price:"",date:""}),n=S({item_id:"",quantity:"",price:"",date:""}),C=S({show:!1,message:"",color:"success"}),u=S({item_id:"",date_operator:"",date:"",date_from:"",date_to:""}),Ve=D(()=>!q.total_amount||!q.total_quantity?0:q.total_amount/q.total_quantity),j=D(()=>U.value.find(o=>o.id===r.item_id)||{}),F=D(()=>j.value.unit||""),A=D(()=>j.value.human_readable_unit||""),L=D(()=>j.value.conversion_factor||1),H=D(()=>j.value.human_readable_unit&&j.value.conversion_factor),Z=D(()=>!r.quantity||!H.value?0:(r.quantity*L.value).toFixed(6)),qe=[{title:"Item",key:"item_name"},{title:"Quantity",key:"quantity",align:"end",sortable:!1},{title:"Unit Price",key:"price",align:"end"},{title:"Total Amount",key:"total",align:"end"},{title:"Purchase Date",key:"date"},{title:"Actions",key:"actions",align:"center",sortable:!1}],ke=[{label:"Equals (=)",value:"="},{label:"Greater Than (>)",value:">"},{label:"Less Than (<)",value:"<"},{label:"Greater or Equal (>=)",value:">="},{label:"Less or Equal (<=)",value:"<="},{label:"In Range",value:"in"}];function T(o){return Number(o||0).toLocaleString(void 0,{minimumFractionDigits:2})}function _(o,e="success"){C.message=o,C.color=e,C.show=!0}function B(){return r.quantity&&r.price?r.quantity*r.price:0}function Vt(){}function ee(){h("item_id")}function f(o){switch(o){case"item_id":n.item_id=r.item_id?"":"Item selection is required";break;case"quantity":!r.quantity&&r.quantity!==0?n.quantity="Quantity is required":isNaN(r.quantity)?n.quantity="Quantity must be a valid number":r.quantity<=0?n.quantity="Quantity must be positive":n.quantity="";break;case"price":!r.price&&r.price!==0?n.price="Unit price is required":isNaN(r.price)?n.price="Unit price must be a valid number":r.price<=0?n.price="Unit price must be positive":n.price="";break;case"date":n.date=r.date?"":"Purchase date is required";break}}function h(o){n[o]=""}function te(){return f("item_id"),f("quantity"),f("price"),f("date"),!n.item_id&&!n.quantity&&!n.price&&!n.date}async function we(){try{const e=await(await fetch("/items")).json();U.value=e.map(m=>({...m,human_readable_unit:m.human_readable_unit||"",conversion_factor:m.conversion_factor||1}))}catch(o){console.error("Failed to load items:",o),_("Failed to load items","error")}}async function P(){R.value=!0;try{const o=new URLSearchParams({page:M.value,limit:10});if(u.item_id&&o.append("item_id",u.item_id),u.date_operator&&u.date_operator!=="in"&&u.date){const l={"=":"date",">":"date_gt","<":"date_lt",">=":"date_from","<=":"date_to"};o.append(l[u.date_operator],u.date)}u.date_operator==="in"&&u.date_from&&u.date_to&&(o.append("date_from",u.date_from),o.append("date_to",u.date_to));const m=await(await fetch(`/purchases?${o}`)).json();O.value=(m.data||[]).map(l=>{const x=U.value.find(Ue=>Ue.id===l.item_id)||{},G=x.human_readable_unit&&x.conversion_factor;return{...l,human_readable_quantity:G?(l.quantity*x.conversion_factor).toFixed(6):null,human_readable_unit:x.human_readable_unit,unit:x.unit||""}}),W.value=m.totalPages||1,X.value=m.totalRecords||0,q.total_quantity=m.total_quantity||0,q.total_amount=m.total_amount||0}catch(o){console.error("Failed to load purchases:",o),_("Failed to load purchases","error")}finally{R.value=!1}}function Ce(){M.value=1,P()}function he(){Object.assign(u,{item_id:"",date_operator:"",date:"",date_from:"",date_to:""}),M.value=1,P()}function Pe(){Object.assign(r,{item_id:"",quantity:"",price:"",date:""}),Object.keys(n).forEach(o=>n[o]=""),I.value=!0}function ae(){I.value=!1,Object.keys(n).forEach(o=>n[o]="")}function De(o){var e,m,l,x;z.value=o,Object.assign(r,{item_id:o.item_id,quantity:((m=(e=o.quantity)==null?void 0:e.replace)==null?void 0:m.call(e,/,/g,""))||o.quantity,price:((x=(l=o.price)==null?void 0:l.replace)==null?void 0:x.call(l,/,/g,""))||o.price,date:o.date?o.date:""}),Object.keys(n).forEach(G=>n[G]=""),w.value=!0}function le(){w.value=!1,Object.keys(n).forEach(o=>n[o]="")}async function oe(){if(!te()){_("Please fix the validation errors","error");return}V.value=!0;try{const o={...r,date:fe(r.date,"DD-MM-YYYY").format("YYYY-MM-DD")};if(!(await fetch("/purchases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Save failed");I.value=!1,_("Purchase added successfully"),await P()}catch(o){console.error("Failed to create purchase:",o),_("Failed to add purchase","error")}finally{V.value=!1}}async function re(){if(!te()){_("Please fix the validation errors","error");return}V.value=!0;try{const o={...r,date:fe(r.date,"DD-MM-YYYY").format("YYYY-MM-DD")};if(!(await fetch(`/purchases/${z.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Update failed");w.value=!1,_("Purchase updated successfully"),await P()}catch(o){console.error("Failed to update purchase:",o),_("Failed to update purchase","error")}finally{V.value=!1}}async function ie(o){if(confirm(`Are you sure you want to delete purchase of "${o.item_name}"?`)){V.value=!0;try{if(!(await fetch(`/purchases/${o.id}`,{method:"DELETE"})).ok)throw new Error("Delete failed");_("Purchase deleted successfully"),w.value&&(w.value=!1),await P()}catch(e){console.error("Failed to delete purchase:",e),_("Failed to delete purchase","error")}finally{V.value=!1}}}return Te(async()=>{await we(),await P()}),(o,e)=>{const m=Ie("VueDatePicker");return p(),k(Se,{class:"py-6",fluid:""},{default:a(()=>[t(b,{class:"mb-6",elevation:"2",rounded:"lg"},{default:a(()=>[t(Y,{class:"d-flex align-center justify-space-between"},{default:a(()=>[e[33]||(e[33]=i("div",null,[i("h2",{class:"text-h5 font-weight-bold text-primary mb-1"}," Purchase Management "),i("p",{class:"text-body-2 text-grey"}," Track and manage inventory purchases and costs ")],-1)),o.$store.getters.hasTask("can_purchase_ingredients")?(p(),k(v,{key:0,color:"primary","prepend-icon":"mdi-cart-plus",onClick:Pe},{default:a(()=>e[32]||(e[32]=[d(" New Purchase ")])),_:1})):y("",!0)]),_:1})]),_:1}),t(ne,{class:"mb-4"},{default:a(()=>[t($,{cols:"12",md:"4"},{default:a(()=>[t(b,{class:"pa-4",elevation:"3",rounded:"xl"},{default:a(()=>[i("div",Ne,[i("div",null,[e[34]||(e[34]=i("div",{class:"text-body-2 text-grey"},"Total Purchases",-1)),i("div",Qe,s(T(q.total_amount)),1)]),t(J,{color:"primary",size:"40",variant:"tonal"},{default:a(()=>[t(g,{color:"primary"},{default:a(()=>e[35]||(e[35]=[d("mdi-cash")])),_:1})]),_:1})])]),_:1})]),_:1}),t($,{cols:"12",md:"4"},{default:a(()=>[t(b,{class:"pa-4",elevation:"3",rounded:"xl"},{default:a(()=>[i("div",Oe,[i("div",null,[e[36]||(e[36]=i("div",{class:"text-body-2 text-grey"},"Total Quantity",-1)),i("div",Re,s(parseFloat(q.total_quantity)||0),1)]),t(J,{color:"blue",size:"40",variant:"tonal"},{default:a(()=>[t(g,{color:"blue"},{default:a(()=>e[37]||(e[37]=[d("mdi-package-variant")])),_:1})]),_:1})])]),_:1})]),_:1}),t($,{cols:"12",md:"4"},{default:a(()=>[t(b,{class:"pa-4",elevation:"3",rounded:"xl"},{default:a(()=>[i("div",ze,[i("div",null,[e[38]||(e[38]=i("div",{class:"text-body-2 text-grey"},"Avg. Unit Price",-1)),i("div",Le,s(T(Ve.value)),1)]),t(J,{color:"green",size:"40",variant:"tonal"},{default:a(()=>[t(g,{color:"green"},{default:a(()=>e[39]||(e[39]=[d("mdi-tag")])),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(b,{class:"mb-4",elevation:"2",rounded:"lg"},{default:a(()=>[t(Y,null,{default:a(()=>[t(ne,{dense:""},{default:a(()=>[t($,{cols:"12",md:"4"},{default:a(()=>[t(K,{modelValue:u.item_id,"onUpdate:modelValue":e[0]||(e[0]=l=>u.item_id=l),autocomplete:"off",autocorrect:"off",clearable:"",color:"primary",inputmode:"none","item-title":"name","item-value":"id",items:U.value,label:"Filter by Item",spellcheck:"false",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t($,{cols:"12",md:"3"},{default:a(()=>[t(Ee,{modelValue:u.date_operator,"onUpdate:modelValue":e[1]||(e[1]=l=>u.date_operator=l),clearable:"","item-title":"label","item-value":"value",items:ke,label:"Date Filter",variant:"outlined"},null,8,["modelValue"])]),_:1}),t($,{cols:"12",md:"5"},{default:a(()=>[u.date_operator&&u.date_operator!=="in"?(p(),E(se,{key:0},[t(ce,{class:"pl-0 pb-1 text-caption text-grey"},{default:a(()=>e[40]||(e[40]=[d(" Select Date ")])),_:1}),t(m,{modelValue:u.date,"onUpdate:modelValue":e[2]||(e[2]=l=>u.date=l),"auto-apply":"",class:"border rounded-lg px-4 py-2",format:"dd-MM-yyyy","model-type":"format",placeholder:"Select Date",teleport:!0},null,8,["modelValue"])],64)):y("",!0),u.date_operator==="in"?(p(),E(se,{key:1},[t(ce,{class:"pl-0 pb-1 text-caption text-grey"},{default:a(()=>e[41]||(e[41]=[d(" Date Range ")])),_:1}),i("div",He,[t(m,{modelValue:u.date_from,"onUpdate:modelValue":e[3]||(e[3]=l=>u.date_from=l),"auto-apply":"",class:"flex-1 border rounded-lg px-2 py-1",format:"dd-MM-yyyy","model-type":"format",placeholder:"From",teleport:!0},null,8,["modelValue"]),t(m,{modelValue:u.date_to,"onUpdate:modelValue":e[4]||(e[4]=l=>u.date_to=l),"auto-apply":"",class:"flex-1 border rounded-lg px-2 py-1",format:"dd-MM-yyyy","model-type":"format",placeholder:"To",teleport:!0},null,8,["modelValue"])])],64)):y("",!0)]),_:1})]),_:1}),i("div",Ge,[t(v,{color:"primary","prepend-icon":"mdi-filter",onClick:Ce},{default:a(()=>e[42]||(e[42]=[d(" Apply Filters ")])),_:1}),t(v,{class:"ml-2","prepend-icon":"mdi-close-circle",variant:"outlined",onClick:he},{default:a(()=>e[43]||(e[43]=[d(" Clear ")])),_:1})])]),_:1})]),_:1}),t(b,{elevation:"2",rounded:"lg"},{default:a(()=>[t(Y,{class:"pa-0"},{default:a(()=>[t(Ye,{class:"rounded-lg",density:"comfortable",headers:qe,hover:"",items:O.value,loading:R.value},{loading:a(()=>[t(Be,{type:"table-row@10"})]),"item.quantity":a(({item:l})=>[i("div",Je,[t(ve,{color:"blue",variant:"flat"},{default:a(()=>[d(s(parseFloat(l.quantity))+" "+s(l.unit),1)]),_:2},1024),l.human_readable_quantity?(p(),E("div",Ke,s(l.human_readable_quantity)+" "+s(l.human_readable_unit),1)):y("",!0)])]),"item.price":a(({item:l})=>[i("span",We,s(T(l.price)),1)]),"item.total":a(({item:l})=>[t(ve,{color:"green",variant:"flat"},{default:a(()=>[d(s(T(l.total)),1)]),_:2},1024)]),"item.date":a(({item:l})=>[d(s(l.date),1)]),"item.actions":a(({item:l})=>[o.$store.getters.hasTask("can_edit_ingredients_purchase")?(p(),k(v,{key:0,color:"blue",icon:"",size:"small",variant:"text",onClick:x=>De(l)},{default:a(()=>[t(g,null,{default:a(()=>e[44]||(e[44]=[d("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])):y("",!0),o.$store.getters.hasTask("can_delete_ingredients_purchases")?(p(),k(v,{key:1,color:"red",icon:"",size:"small",variant:"text",onClick:x=>ie(l)},{default:a(()=>[t(g,null,{default:a(()=>e[45]||(e[45]=[d("mdi-delete")])),_:1})]),_:2},1032,["onClick"])):y("",!0)]),"no-data":a(()=>[i("div",Xe,[t(g,{color:"grey-lighten-2",size:"48"},{default:a(()=>e[46]||(e[46]=[d("mdi-cart-remove")])),_:1}),e[47]||(e[47]=i("div",null,"No purchases found",-1))])]),_:1},8,["items","loading"]),t(Me),i("div",Ze,[i("span",et," Showing "+s(O.value.length)+" of "+s(X.value)+" records ",1),t(Ae,{modelValue:M.value,"onUpdate:modelValue":[e[5]||(e[5]=l=>M.value=l),P],color:"primary",length:W.value,"total-visible":7},null,8,["modelValue","length"])])]),_:1})]),_:1}),t(be,{modelValue:I.value,"onUpdate:modelValue":e[17]||(e[17]=l=>I.value=l),"max-width":"700px",persistent:""},{default:a(()=>[t(b,null,{default:a(()=>[t(de,{class:"text-white",color:"primary",density:"comfortable"},{default:a(()=>[t(ue,null,{default:a(()=>[t(g,{start:""},{default:a(()=>e[48]||(e[48]=[d("mdi-cart-plus")])),_:1}),e[49]||(e[49]=d(" Add New Purchase "))]),_:1}),t(N),t(v,{color:"white",icon:"mdi-close",variant:"text",onClick:ae})]),_:1}),t(Y,{class:"pa-4"},{default:a(()=>[t(ge,{ref_key:"addFormRef",ref:_e,onSubmit:me(oe,["prevent"])},{default:a(()=>[t(K,{modelValue:r.item_id,"onUpdate:modelValue":e[6]||(e[6]=l=>r.item_id=l),autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.item_id,inputmode:"none","item-title":"name","item-value":"id",items:U.value,label:"Item *",required:"",spellcheck:"false",variant:"outlined",onBlur:e[7]||(e[7]=l=>f("item_id")),onInput:ee},{label:a(()=>e[50]||(e[50]=[i("span",{class:"required-field"},"Item",-1)])),_:1},8,["modelValue","error-messages","items"]),i("div",tt,[t(Q,{modelValue:r.quantity,"onUpdate:modelValue":e[8]||(e[8]=l=>r.quantity=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.quantity,inputmode:"none",label:`Quantity in ${F.value||"units"} *`,required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[9]||(e[9]=l=>f("quantity")),onInput:e[10]||(e[10]=l=>{h("quantity"),B()})},{label:a(()=>[i("span",at,"Quantity ("+s(F.value||"units")+")",1)]),_:1},8,["modelValue","error-messages","label"]),r.quantity&&H.value?(p(),k(b,{key:0,class:"pa-3",color:"blue-lighten-5",variant:"outlined"},{default:a(()=>[i("div",lt,[e[51]||(e[51]=i("span",{class:"font-weight-medium"},"Converted Quantity:",-1)),i("span",ot,s(Z.value)+" "+s(A.value),1)]),i("div",rt," Conversion: 1 "+s(F.value)+" = "+s(L.value)+" "+s(A.value),1)]),_:1})):y("",!0)]),t(Q,{modelValue:r.price,"onUpdate:modelValue":e[11]||(e[11]=l=>r.price=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.price,inputmode:"none",label:"Unit Price *",prefix:"TSh ",required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[12]||(e[12]=l=>f("price")),onInput:e[13]||(e[13]=l=>{h("price"),B()})},{label:a(()=>e[52]||(e[52]=[i("span",{class:"required-field"},"Unit Price",-1)])),_:1},8,["modelValue","error-messages"]),r.quantity&&r.price?(p(),k(b,{key:0,class:"mb-4 pa-3",color:"green-lighten-5",variant:"outlined"},{default:a(()=>[i("div",it,[e[53]||(e[53]=i("span",{class:"font-weight-medium"},"Total Amount:",-1)),i("span",nt,s(T(r.quantity*r.price)),1)])]),_:1})):y("",!0),i("div",st,[e[54]||(e[54]=i("label",{class:"text-caption text-grey mb-1 required-field"},"Purchase Date *",-1)),t(m,{modelValue:r.date,"onUpdate:modelValue":[e[14]||(e[14]=l=>r.date=l),e[16]||(e[16]=l=>h("date"))],"auto-apply":"",class:pe(["rounded-lg","border","px-4","py-2","w-100",n.date?"error-field":""]),format:"dd-MM-yyyy","model-type":"format",placeholder:"Purchase Date",teleport:!0,onBlur:e[15]||(e[15]=l=>f("date"))},null,8,["modelValue","class"]),n.date?(p(),E("div",dt,s(n.date),1)):y("",!0)])]),_:1},512)]),_:1}),t(ye,{class:"pa-4"},{default:a(()=>[t(N),t(v,{color:"grey",variant:"outlined",onClick:ae},{default:a(()=>e[55]||(e[55]=[d("Cancel")])),_:1}),t(v,{color:"primary",loading:V.value,onClick:oe},{default:a(()=>[t(g,{start:""},{default:a(()=>e[56]||(e[56]=[d("mdi-content-save")])),_:1}),e[57]||(e[57]=d(" Save "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(be,{modelValue:w.value,"onUpdate:modelValue":e[30]||(e[30]=l=>w.value=l),"max-width":"700px",persistent:""},{default:a(()=>[t(b,null,{default:a(()=>[t(de,{class:"text-white",color:"primary",density:"comfortable"},{default:a(()=>[t(ue,null,{default:a(()=>[t(g,{start:""},{default:a(()=>e[58]||(e[58]=[d("mdi-cart-edit")])),_:1}),e[59]||(e[59]=d(" Edit Purchase "))]),_:1}),t(N),t(v,{color:"white",icon:"mdi-close",variant:"text",onClick:le})]),_:1}),t(Y,{class:"pa-4"},{default:a(()=>[t(ge,{ref_key:"editFormRef",ref:xe,onSubmit:me(re,["prevent"])},{default:a(()=>[t(K,{modelValue:r.item_id,"onUpdate:modelValue":e[18]||(e[18]=l=>r.item_id=l),autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.item_id,inputmode:"none","item-title":"name","item-value":"id",items:U.value,label:"Item *",required:"",spellcheck:"false",variant:"outlined",onBlur:e[19]||(e[19]=l=>f("item_id")),onInput:ee},{label:a(()=>e[60]||(e[60]=[i("span",{class:"required-field"},"Item",-1)])),_:1},8,["modelValue","error-messages","items"]),i("div",ut,[t(Q,{modelValue:r.quantity,"onUpdate:modelValue":e[20]||(e[20]=l=>r.quantity=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.quantity,inputmode:"none",label:`Quantity in ${F.value||"units"} *`,required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[21]||(e[21]=l=>f("quantity")),onInput:e[22]||(e[22]=l=>{h("quantity"),B()})},{label:a(()=>[i("span",mt,"Quantity ("+s(F.value||"units")+")",1)]),_:1},8,["modelValue","error-messages","label"]),r.quantity&&H.value?(p(),k(b,{key:0,class:"pa-3",color:"blue-lighten-5",variant:"outlined"},{default:a(()=>[i("div",pt,[e[61]||(e[61]=i("span",{class:"font-weight-medium"},"Converted Quantity:",-1)),i("span",ft,s(Z.value)+" "+s(A.value),1)]),i("div",ct," Conversion: 1 "+s(F.value)+" = "+s(L.value)+" "+s(A.value),1)]),_:1})):y("",!0)]),t(Q,{modelValue:r.price,"onUpdate:modelValue":e[23]||(e[23]=l=>r.price=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.price,inputmode:"none",label:"Unit Price *",prefix:"TSh ",required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[24]||(e[24]=l=>f("price")),onInput:e[25]||(e[25]=l=>{h("price"),B()})},{label:a(()=>e[62]||(e[62]=[i("span",{class:"required-field"},"Unit Price",-1)])),_:1},8,["modelValue","error-messages"]),r.quantity&&r.price?(p(),k(b,{key:0,class:"mb-4 pa-3",color:"green-lighten-5",variant:"outlined"},{default:a(()=>[i("div",yt,[e[63]||(e[63]=i("span",{class:"font-weight-medium"},"Total Amount:",-1)),i("span",vt,s(T(r.quantity*r.price)),1)])]),_:1})):y("",!0),i("div",bt,[e[64]||(e[64]=i("label",{class:"text-caption text-grey mb-1 required-field"},"Purchase Date *",-1)),t(m,{modelValue:r.date,"onUpdate:modelValue":[e[26]||(e[26]=l=>r.date=l),e[28]||(e[28]=l=>h("date"))],"auto-apply":"",class:pe(["rounded-lg","border","px-4","py-2","w-100",n.date?"error-field":""]),format:"dd-MM-yyyy","model-type":"format",placeholder:"Purchase Date",teleport:!0,onBlur:e[27]||(e[27]=l=>f("date"))},null,8,["modelValue","class"]),n.date?(p(),E("div",gt,s(n.date),1)):y("",!0)])]),_:1},512)]),_:1}),t(ye,{class:"pa-4"},{default:a(()=>[t(v,{color:"red",variant:"outlined",onClick:e[29]||(e[29]=l=>ie(z.value))},{default:a(()=>[t(g,{start:""},{default:a(()=>e[65]||(e[65]=[d("mdi-delete")])),_:1}),e[66]||(e[66]=d(" Delete "))]),_:1}),t(N),t(v,{color:"grey",variant:"outlined",onClick:le},{default:a(()=>e[67]||(e[67]=[d("Cancel")])),_:1}),t(v,{color:"primary",loading:V.value,onClick:re},{default:a(()=>[t(g,{start:""},{default:a(()=>e[68]||(e[68]=[d("mdi-content-save")])),_:1}),e[69]||(e[69]=d(" Update "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(je,{modelValue:C.show,"onUpdate:modelValue":e[31]||(e[31]=l=>C.show=l),color:C.color,timeout:"3000"},{default:a(()=>[d(s(C.message),1)]),_:1},8,["modelValue","color"])]),_:1})}}},St=Fe(_t,[["__scopeId","data-v-7b568b1e"]]);export{St as default};
