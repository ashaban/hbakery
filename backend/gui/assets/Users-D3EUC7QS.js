import{_ as A,s as z,x as t,r as u,a0 as R,l as O,a1 as J,v as L,i as a,y as v,a4 as b,B as g,C as d,D as C,H as f,I as H,a5 as G,ak as K}from"./index-LhBGGbDo.js";import{u as Q,r as B,e as W}from"./index-CJqWPmjT.js";import{V as X}from"./VContainer-Dk9Sho_f.js";import{V as k}from"./VDialog-DPRaUwy_.js";import{V as c,b as y}from"./VCard-CePcGudf.js";import{V as i}from"./VTextField-DdRmxMh_.js";import{V as F}from"./VAutocomplete-BKA6hC-W.js";import{a as Y}from"./VDataTable-PuSy_Rf-.js";import"./dialog-transition-Ci0HdeXs.js";const Z={setup(){const m=J(),e=u(!1),D=u(!1),l=u(!1),x=u([]),U=u([]),o=u({}),I=u([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Email",key:"email"},{title:"Role",key:"role"},{title:"Edit",key:"edit"}]),h=u(!1),w=u(!1),E=u(!1),s=R({name:"",title:"",email:"",phone:"",role:"",password:""}),j=Q({name:{required:B},email:{required:B,email:W},phone:{required:B},role:{required:B},password:{required:B}},s);function p(){D.value=!0,fetch("/users/getUsers").then(r=>{r.json().then(n=>{D.value=!1,x.value=n}).catch(()=>{D.value=!1})}).catch(()=>{e.value=!1})}function T(){e.value=!0,fetch("/users/getRoles").then(r=>{r.json().then(n=>{e.value=!1,U.value=n}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function q(){j.value.name.$touch(),h.value=!0,s.name="",s.title="",s.email="",s.phone="",s.role=""}function M(r){o.value=JSON.parse(JSON.stringify(r)),w.value=!0,s.name=r.name,s.title=r.title,s.email=r.email,s.phone=r.phone,s.role=r.roleid,s.password="unchangedpassword"}function N(){e.value=!0;const r=new FormData;r.append("name",s.name),r.append("title",s.title),r.append("email",s.email),r.append("phone",s.phone),r.append("role",s.role),r.append("password",s.password),fetch("/users/addUser",{body:r,method:"POST"}).then(n=>{e.value=!1,h.value=!1,n.status!==200&&n.status!==201?n.json().then(V=>{m.commit("setMessage",{type:"error",text:"Failed to save User! "+V.error,timeout:2e3})}):n.json().then(()=>{p(),m.commit("setMessage",{type:"primary",text:"User saved successfully!",timeout:2e3})})}).catch(n=>{e.value=!1,m.commit("setMessage",{type:"error",text:"Failed to save User!",timeout:2e3}),console.error("Error:",n)})}function P(){e.value=!0;const r=new FormData;r.append("name",s.name),r.append("title",s.title),r.append("email",s.email),r.append("phone",s.phone),r.append("role",s.role),r.append("password",s.password),fetch("/users/editUser/"+o.value.id,{body:r,method:"POST"}).then(n=>{e.value=!1,w.value=!1,n.status!==200&&n.status!==201?n.json().then(V=>{m.commit("setMessage",{type:"error",text:"Failed to edit User! "+V.error,timeout:2e3})}):n.json().then(()=>{p(),m.commit("setMessage",{type:"primary",text:"User edited successfully!",timeout:2e3})})}).catch(n=>{e.value=!1,m.commit("setMessage",{type:"error",text:"Failed to edit User!",timeout:2e3}),console.error("Error:",n)})}function S(){e.value=!0;const r=new FormData;E.value=!1,fetch("/users/deleteUser/"+o.value.id,{body:r,method:"DELETE"}).then(n=>{e.value=!1,w.value=!1,n.status!==200&&n.status!==201?n.json().then(V=>{m.commit("setMessage",{type:"error",text:"Failed to delete User! "+V.error,timeout:2e3})}):n.json().then(()=>{p(),m.commit("setMessage",{type:"primary",text:"User delete successfully!",timeout:2e3})})}).catch(n=>{e.value=!1,m.commit("setMessage",{type:"error",text:"Failed to delete User!",timeout:2e3}),console.error("Error:",n)})}return O(()=>{p(),T()}),{loading:e,loadingValues:D,values:x,headers:I,addDialog:h,editDialog:w,state:s,v$:j,editingItem:o,confirmDeleteDialog:E,roles:U,password_show:l,loadValues:p,activateAddDialog:q,activateEditDialog:M,create:N,saveEdit:P,remove:S}}},$={class:"d-flex align-center flex-wrap"},_={class:"d-flex justify-end"},ee={class:"d-flex align-center flex-wrap"},le={class:"d-flex justify-end justify-space-between"},oe={class:"d-flex justify-end justify-space-between"};function ae(m,e,D,l,x,U){return L(),z(X,{fluid:""},{default:t(()=>[a(k,{modelValue:l.addDialog,"onUpdate:modelValue":e[8]||(e[8]=o=>l.addDialog=o),transition:"dialog-top-transition",width:"600"},{default:t(()=>[a(c,{class:"rounded-xl pa-4",elevation:"10"},{default:t(()=>[a(b,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:t(()=>[v("div",$,[a(g,{class:"mr-2 text-white"},{default:t(()=>e[23]||(e[23]=[d("mdi-account")])),_:1}),e[24]||(e[24]=v("span",{class:"text-white font-weight-bold text-h6"},"Add User",-1))]),a(C),a(f,{color:"white",icon:"mdi-close",onClick:e[0]||(e[0]=o=>l.addDialog=!1)})]),_:1}),a(y,{class:"pt-6"},{default:t(()=>[a(i,{modelValue:l.state.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.state.name=o),"bg-color":"#BDBDBD","error-messages":l.v$.name.$errors.map(o=>o.$message),label:"fullName",required:"",onBlur:l.v$.name.$touch,onInput:l.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(i,{modelValue:l.state.title,"onUpdate:modelValue":e[2]||(e[2]=o=>l.state.title=o),"bg-color":"#BDBDBD",label:"Title"},null,8,["modelValue"]),a(i,{modelValue:l.state.email,"onUpdate:modelValue":e[3]||(e[3]=o=>l.state.email=o),"bg-color":"#BDBDBD","error-messages":l.v$.email.$errors.map(o=>o.$message),label:"Email",required:"",onBlur:l.v$.email.$touch,onInput:l.v$.email.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(i,{modelValue:l.state.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>l.state.phone=o),"bg-color":"#BDBDBD","error-messages":l.v$.phone.$errors.map(o=>o.$message),label:"Phone Number",required:"",onBlur:l.v$.phone.$touch,onInput:l.v$.phone.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(F,{modelValue:l.state.role,"onUpdate:modelValue":e[5]||(e[5]=o=>l.state.role=o),"bg-color":"#BDBDBD","error-messages":l.v$.role.$errors.map(o=>o.$message),"item-title":"name","item-value":"id",items:l.roles,label:"Role",required:"",onBlur:l.v$.role.$touch,onChange:l.v$.role.$touch},null,8,["modelValue","error-messages","items","onBlur","onChange"]),a(i,{modelValue:l.state.password,"onUpdate:modelValue":e[6]||(e[6]=o=>l.state.password=o),"append-icon":l.password_show?"mdi-eye":"mdi-eye-off","bg-color":"#BDBDBD","error-messages":l.v$.password.$errors.map(o=>o.$message),label:"Password",required:"",type:l.password_show?"text":"password",onBlur:l.v$.password.$touch,"onClick:append":e[7]||(e[7]=o=>l.password_show=!l.password_show),onInput:l.v$.password.$touch},null,8,["modelValue","append-icon","error-messages","type","onBlur","onInput"])]),_:1}),v("div",_,[a(f,{color:"success",disabled:l.v$.$error,loading:l.loading,size:"small",type:"submit",variant:"elevated",onClick:l.create},{default:t(()=>[a(g,{start:""},{default:t(()=>e[25]||(e[25]=[d("mdi-plus")])),_:1}),e[26]||(e[26]=d(" Add "))]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1},8,["modelValue"]),a(k,{modelValue:l.editDialog,"onUpdate:modelValue":e[19]||(e[19]=o=>l.editDialog=o),transition:"dialog-top-transition",width:"auto"},{default:t(()=>[a(c,{class:"rounded-xl pa-4",elevation:"10"},{default:t(()=>[a(b,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:t(()=>[v("div",ee,[a(g,{class:"mr-2 text-white"},{default:t(()=>e[27]||(e[27]=[d("mdi-account")])),_:1}),e[28]||(e[28]=v("span",{class:"text-white font-weight-bold text-h6"},"Edit User",-1))]),a(C),a(f,{color:"white",icon:"mdi-close",onClick:e[9]||(e[9]=o=>l.editDialog=!1)})]),_:1}),a(y,{class:"pt-6"},{default:t(()=>[a(i,{modelValue:l.editingItem.id,"onUpdate:modelValue":e[10]||(e[10]=o=>l.editingItem.id=o),"bg-color":"#BDBDBD",disabled:"",label:"ID"},null,8,["modelValue"]),a(i,{modelValue:l.state.email,"onUpdate:modelValue":e[11]||(e[11]=o=>l.state.email=o),"bg-color":"#BDBDBD",density:"compact",disabled:"","error-messages":l.v$.email.$errors.map(o=>o.$message),label:"Email",required:"",onBlur:l.v$.email.$touch,onInput:l.v$.email.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(i,{modelValue:l.state.name,"onUpdate:modelValue":e[12]||(e[12]=o=>l.state.name=o),"bg-color":"#BDBDBD","error-messages":l.v$.name.$errors.map(o=>o.$message),label:"Full Name",required:"",onBlur:l.v$.name.$touch,onInput:l.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(i,{modelValue:l.state.title,"onUpdate:modelValue":e[13]||(e[13]=o=>l.state.title=o),"bg-color":"#BDBDBD",label:"Title"},null,8,["modelValue"]),a(i,{modelValue:l.state.phone,"onUpdate:modelValue":e[14]||(e[14]=o=>l.state.phone=o),"bg-color":"#BDBDBD","error-messages":l.v$.phone.$errors.map(o=>o.$message),label:"Phone Number",required:"",onBlur:l.v$.phone.$touch,onInput:l.v$.phone.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(F,{modelValue:l.state.role,"onUpdate:modelValue":e[15]||(e[15]=o=>l.state.role=o),"bg-color":"#BDBDBD","error-messages":l.v$.role.$errors.map(o=>o.$message),"item-title":"name","item-value":"id",items:l.roles,label:"Role",required:"",onBlur:l.v$.role.$touch,onChange:l.v$.role.$touch},null,8,["modelValue","error-messages","items","onBlur","onChange"]),a(i,{modelValue:l.state.password,"onUpdate:modelValue":e[16]||(e[16]=o=>l.state.password=o),"bg-color":"#BDBDBD",label:"Password",type:l.password_show?"text":"password"},null,8,["modelValue","type"])]),_:1}),v("div",le,[a(f,{color:"success",disabled:l.v$.$error,loading:l.loading,size:"large",type:"submit",variant:"elevated",onClick:l.saveEdit},{default:t(()=>[a(g,{start:""},{default:t(()=>e[29]||(e[29]=[d("mdi-pencil")])),_:1}),e[30]||(e[30]=d(" Save "))]),_:1},8,["disabled","loading","onClick"]),a(f,{color:"black",disabled:l.v$.$error,loading:l.loading,size:"large",type:"submit",variant:"elevated",onClick:e[17]||(e[17]=o=>l.editDialog=!1)},{default:t(()=>[a(g,{start:""},{default:t(()=>e[31]||(e[31]=[d("mdi-cancel")])),_:1}),e[32]||(e[32]=d(" Cancel "))]),_:1},8,["disabled","loading"]),a(f,{color:"error",disabled:l.v$.$error,loading:l.loading,size:"large",type:"submit",variant:"elevated",onClick:e[18]||(e[18]=o=>l.confirmDeleteDialog=!0)},{default:t(()=>[a(g,{start:""},{default:t(()=>e[33]||(e[33]=[d("mdi-delete")])),_:1}),e[34]||(e[34]=d(" Delete "))]),_:1},8,["disabled","loading"])])]),_:1})]),_:1},8,["modelValue"]),a(k,{modelValue:l.confirmDeleteDialog,"onUpdate:modelValue":e[22]||(e[22]=o=>l.confirmDeleteDialog=o),persistent:"",width:"auto"},{default:t(()=>[a(c,null,{default:t(()=>[a(b,{color:"warning",title:"Confirm Deleting User: {{state.name }}"},{default:t(()=>[a(f,{color:"white",icon:"mdi-close",onClick:e[20]||(e[20]=o=>l.confirmDeleteDialog=!1)})]),_:1}),a(y,null,{default:t(()=>[d("Confirm Delete User: "+H(l.state.name),1)]),_:1}),v("div",oe,[a(f,{color:"success",onClick:e[21]||(e[21]=o=>l.confirmDeleteDialog=!1)},{default:t(()=>e[35]||(e[35]=[d("Cancel")])),_:1}),a(f,{color:"error",onClick:l.remove},{default:t(()=>e[36]||(e[36]=[d("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),a(b,{class:"rounded-lg mb-2 px-4",color:"primary",flat:"",height:"60"},{default:t(()=>[a(G,{class:"text-white font-weight-bold text-h6"},{default:t(()=>[a(g,{class:"mr-2",color:"white"},{default:t(()=>e[37]||(e[37]=[d("mdi-account")])),_:1}),e[38]||(e[38]=d(" Users "))]),_:1}),a(C),a(f,{class:"text-white font-weight-medium",color:"#1A237E",size:"small",onClick:l.activateAddDialog},{default:t(()=>[a(g,{start:""},{default:t(()=>e[39]||(e[39]=[d("mdi-plus")])),_:1}),e[40]||(e[40]=d(" Add User "))]),_:1},8,["onClick"])]),_:1}),a(c,{class:"rounded-lg"},{default:t(()=>[a(y,null,{default:t(()=>[a(K,{active:l.loadingValues,indeterminate:l.loadingValues},null,8,["active","indeterminate"]),a(Y,{class:"elevation-1",dense:"",headers:l.headers,height:"300",items:l.values},{"item.edit":t(({item:o})=>[a(g,{color:"#3F51B5",onClick:I=>l.activateEditDialog(o)},{default:t(()=>e[41]||(e[41]=[d("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})}const ve=A(Z,[["render",ae]]);export{ve as default};
