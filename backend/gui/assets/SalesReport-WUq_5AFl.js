import{_ as Dt,a0 as Ct,r as v,$ as Pt,k as Rt,l as Tt,c as zt,q as Z,t as P,v as a,h as e,N as z,x as l,z as k,A as u,B as o,G as O,H as n,C as G,ae as Ot,a5 as Lt,i as it,O as nt,a2 as Et,a3 as At,Z as rt,D as F,F as dt,E as ut,am as $t}from"./index-D0iOXUsi.js";import"./index-CkS2svNU.js";import{V as p,b as y,a as R,c as mt}from"./VCard-BhI909fj.js";import{V as f}from"./VCol-CuOluHIt.js";import{V as _}from"./VChip-C_NFr_wR.js";import{V as K,a as Ut,b as Nt,g as ft}from"./VDataTable-BSH9LiNl.js";import{V as ct}from"./VTextField-BpYlfWje.js";import{V as Gt}from"./VTooltip-BWzK0lp3.js";import{V as Ft}from"./VDialog-CiVh7bLH.js";import{V as Bt}from"./VContainer-ekeKc7mv.js";import{h as B,L as tt}from"./install-_nF_yPR_.js";import"./VSlideGroup-BB5e9CVT.js";import"./dialog-transition-Q0QYg1iH.js";const jt={class:"d-flex align-center"},It={class:"d-flex align-center justify-space-between"},Mt={class:"text-h4 font-weight-bold text-primary"},qt={class:"d-flex align-center justify-space-between"},Ht={class:"text-h4 font-weight-bold text-green"},Qt={class:"d-flex align-center justify-space-between"},Wt={class:"text-h4 font-weight-bold text-orange"},Yt={class:"d-flex align-center justify-space-between"},Jt={class:"text-h4 font-weight-bold text-purple"},Xt={class:"d-flex align-center"},Zt={class:"font-weight-medium"},Kt={class:"d-flex align-center"},te={class:"font-weight-medium"},ee={class:"text-right font-weight-bold"},ae={class:"text-right"},le={class:"d-flex justify-end"},se={class:"d-flex align-center mb-4"},oe={class:"text-h5 font-weight-bold"},ie={class:"d-flex align-center"},ne={class:"text-body-1 font-weight-medium"},re={class:"d-flex align-center mb-4"},de={class:"text-body-1 font-weight-medium"},ue={class:"d-flex align-center"},me={class:"text-body-1 font-weight-medium"},fe={class:"text-left"},ce={class:"text-center"},pe={class:"text-center"},ge={class:"text-right"},ve={class:"text-right"},ye={class:"text-right pa-4"},_e={class:"mb-1"},be={class:"text-h6"},xe={class:"text-left"},he={class:"text-left"},we={class:"text-left"},Ve={class:"text-right font-weight-bold"},Se={__name:"SalesReport",setup(ke){const T=Ct(),b=v(!1),j=v([]),et=v([]),I=v(1),at=v(1),M=v(null),q=v(null),H=v(null),Q=v(null);let x=null,h=null,w=null,V=null;const L=v({revenueTrend:[],outletSales:[],paymentStatus:[],topProducts:[]}),g=v({totalRevenue:0,totalSales:0,outstandingBalance:0,averageOrderValue:0,revenueGrowth:0,salesGrowth:0,pendingPayments:0,itemsPerSale:0}),E=v(!1),c=v(null),lt=v([]),W=v([]),r=Pt({outlet_id:[],start_date:"",end_date:"",payment_status:"",time_range:"30d"}),pt=[{title:"Last 7 Days",value:"7d"},{title:"Last 30 Days",value:"30d"},{title:"Last 90 Days",value:"90d"},{title:"This Year",value:"year"},{title:"Custom",value:"custom"}],gt=[{title:"ID",key:"id",sortable:!0},{title:"Date",key:"sale_date",sortable:!0},{title:"Outlet",key:"outlet",sortable:!0},{title:"Customer",key:"customer_name",sortable:!0},{title:"Items",key:"items_count",align:"center",sortable:!0},{title:"Qty",key:"total_qty",align:"center",sortable:!0},{title:"Total",key:"total_amount",align:"end",sortable:!0},{title:"Paid",key:"paid_amount",align:"end",sortable:!0},{title:"Balance",key:"balance",align:"end",sortable:!0},{title:"Actions",key:"actions",sortable:!1,align:"end"}];function S(i){return Number(i||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function Y(i){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(i)}function J(i){return i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}function st(i){return{MAIN:"mdi-home",SHOP:"mdi-store",CAR:"mdi-truck"}[i]||"mdi-store"}function X(i){return{MAIN:"primary",SHOP:"success",CAR:"warning"}[i]||"grey"}function vt(i){return{GOOD:"success",DAMAGED:"warning",REJECT:"error"}[i]||"grey"}function yt(){U(),N()}async function U(){var i;b.value=!0;try{const t=new URLSearchParams;(i=r.outlet_id)!=null&&i.length?r.outlet_id.forEach(m=>t.append("outlet_id[]",m)):T.state.auth.outlets.length&&T.state.auth.outlets.forEach(m=>t.append("outlet_id[]",m.outlet_id)),r.start_date&&t.append("start_date",r.start_date),r.end_date&&t.append("end_date",r.end_date),r.payment_status&&t.append("payment_status",r.payment_status),r.time_range&&r.time_range!=="custom"&&t.append("time_range",r.time_range);const[s]=await Promise.all([fetch(`/sales/salesanalytics/analytics?${t}`)]),d=await s.json();L.value=d.dashboard||{},g.value=d.kpi||{},$t(()=>{_t()})}catch(t){console.error("Failed to load dashboard data:",t)}finally{b.value=!1}}async function N(){var t;b.value=!0;const i=new URLSearchParams({page:I.value,limit:10});(t=r.outlet_id)!=null&&t.length?r.outlet_id.forEach(s=>i.append("outlet_id[]",s)):T.state.auth.outlets.length&&T.state.auth.outlets.forEach(s=>i.append("outlet_id[]",s.outlet_id)),r.start_date&&i.append("start_date",r.start_date),r.end_date&&i.append("end_date",r.end_date),r.payment_status&&i.append("payment_status",r.payment_status);try{const d=await(await fetch(`/sales/salesanalytics?${i}`)).json();j.value=d.data||[],at.value=d.totalPages||1}catch{}finally{b.value=!1}}function _t(){M.value&&(x=B(M.value),x.setOption(bt())),q.value&&(h=B(q.value),h.setOption(xt())),H.value&&(w=B(H.value),w.setOption(ht())),Q.value&&(V=B(Q.value),V.setOption(wt())),window.addEventListener("resize",ot)}function ot(){x==null||x.resize(),h==null||h.resize(),w==null||w.resize(),V==null||V.resize()}function bt(){const i=L.value.revenueTrend||[];return{tooltip:{trigger:"axis",formatter(t){let s=`${t[0].axisValue}<br/>`;return t.forEach(d=>{d.seriesName==="Revenue"?s+=`${d.marker} ${d.seriesName}: $${d.value.toLocaleString()}<br/>`:s+=`${d.marker} ${d.seriesName}: ${d.value}<br/>`}),s}},legend:{data:["Revenue","Sales Count"],top:10},grid:{left:"3%",right:"4%",bottom:"3%",top:"15%",containLabel:!0},xAxis:{type:"category",data:i.map(t=>new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}))},yAxis:[{type:"value",name:"Revenue",axisLabel:{formatter:"${value}"}},{type:"value",name:"Sales Count",position:"right"}],series:[{name:"Revenue",type:"line",data:i.map(t=>t.revenue),smooth:!0,lineStyle:{width:3},itemStyle:{color:"#1976d2"},areaStyle:{color:new tt(0,0,0,1,[{offset:0,color:"rgba(25, 118, 210, 0.3)"},{offset:1,color:"rgba(25, 118, 210, 0.1)"}])}},{name:"Sales Count",type:"bar",yAxisIndex:1,data:i.map(t=>t.sales_count),itemStyle:{color:"#4caf50"}}]}}function xt(){const i=L.value.outletSales||[];return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: ${c} ({d}%)"},legend:{orient:"vertical",left:"left",top:"center"},series:[{name:"Sales by Outlet",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:i.map(t=>({value:t.revenue,name:t.outlet_name}))}]}}function ht(){var t,s,d;const i=L.value.paymentStatus||[];return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} sales ({d}%)"},legend:{bottom:"0%",left:"center"},series:[{name:"Payment Status",type:"pie",radius:"50%",data:[{value:((t=i.find(m=>m.status==="PAID"))==null?void 0:t.count)||0,name:"Fully Paid",itemStyle:{color:"#4caf50"}},{value:((s=i.find(m=>m.status==="PART"))==null?void 0:s.count)||0,name:"Part Paid",itemStyle:{color:"#ff9800"}},{value:((d=i.find(m=>m.status==="PENDING"))==null?void 0:d.count)||0,name:"Pending",itemStyle:{color:"#f44336"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}function wt(){const i=L.value.topProducts||[];return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter(t){return`${t[0].name}<br/>${t[0].marker} Revenue: $${t[0].value.toLocaleString()}`}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{formatter:"${value}"}},yAxis:{type:"category",data:i.map(t=>t.product_name)},series:[{name:"Revenue",type:"bar",data:i.map(t=>t.revenue),itemStyle:{color:new tt(0,0,1,0,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},emphasis:{itemStyle:{color:new tt(0,0,1,0,[{offset:0,color:"#2378f7"},{offset:.7,color:"#2378f7"},{offset:1,color:"#83bff6"}])}}}]}}function Vt(i){let t;switch(i){case"revenueChart":t=x;break;case"outletChart":t=h;break;case"paymentChart":t=w;break;case"productsChart":t=V;break}if(t){const s=t.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),d=document.createElement("a");d.href=s,d.download=`${i}_${new Date().toISOString().split("T")[0]}.png`,d.click()}}async function St(i){b.value=!0;try{const s=await(await fetch(`/sales/salesanalytics/${i.id}`)).json();c.value={...s.sale,outlet:s.sale.outlet_name,outlet_type:s.sale.outlet_type},lt.value=s.items||[],W.value=s.payments||[],E.value=!0}catch{}finally{b.value=!1}}async function kt(){try{const i=new URLSearchParams({limit:1e3});T.state.auth.outlets.length&&T.state.auth.outlets.forEach(s=>i.append("id[]",s.outlet_id));const t=await fetch(`/outlets?${i}`);et.value=(await t.json()).data||[]}catch(i){console.error("Outlets load failed:",i)}}return Rt(()=>{U(),N(),kt()}),Tt(()=>{x==null||x.dispose(),h==null||h.dispose(),w==null||w.dispose(),V==null||V.dispose(),window.removeEventListener("resize",ot)}),zt(()=>[r.outlet_id,r.start_date,r.end_date,r.payment_status,r.time_range],()=>{U(),N()},{deep:!0}),(i,t)=>(P(),Z(Bt,{class:"bg-grey-lighten-4 pa-6",fluid:""},{default:a(()=>[e(p,{class:"mb-6",elevation:"2"},{default:a(()=>[e(y,{class:"pa-6"},{default:a(()=>[e(z,{align:"center"},{default:a(()=>[e(f,{cols:"12",md:"6"},{default:a(()=>[l("div",jt,[e(k,{class:"mr-4",color:"primary",size:"56"},{default:a(()=>[e(u,{color:"white",size:"32"},{default:a(()=>t[10]||(t[10]=[o("mdi-receipt-text")])),_:1})]),_:1}),t[11]||(t[11]=l("div",null,[l("h1",{class:"text-h4 font-weight-bold text-primary"}," Sales Dashboard "),l("p",{class:"text-body-1 text-grey mt-1"}," Comprehensive overview of sales performance and analytics ")],-1))])]),_:1}),e(f,{class:"text-right",cols:"12",md:"6"},{default:a(()=>[e(O,{color:"primary",size:"large",variant:"outlined",onClick:yt},{default:a(()=>[e(u,{start:""},{default:a(()=>t[12]||(t[12]=[o("mdi-refresh")])),_:1}),t[13]||(t[13]=o(" Refresh "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{class:"mb-6"},{default:a(()=>[e(f,{cols:"12",md:"3",sm:"6"},{default:a(()=>[e(p,{class:"kpi-card",elevation:"2"},{default:a(()=>[e(y,{class:"pa-4"},{default:a(()=>[l("div",It,[l("div",null,[l("div",Mt,n(Y(g.value.totalRevenue)),1),t[14]||(t[14]=l("div",{class:"text-caption text-grey"},"Total Revenue",-1))]),e(k,{color:"primary-lighten-5",size:"48"},{default:a(()=>[e(u,{color:"primary"},{default:a(()=>t[15]||(t[15]=[o("mdi-cash-multiple")])),_:1})]),_:1})]),e(_,{class:"mt-2",color:g.value.revenueGrowth>=0?"green":"red",size:"small",variant:"tonal"},{default:a(()=>[e(u,{start:""},{default:a(()=>[o(n(g.value.revenueGrowth>=0?"mdi-trending-up":"mdi-trending-down"),1)]),_:1}),o(" "+n(Math.abs(g.value.revenueGrowth))+"% "+n(g.value.revenueGrowth>=0?"growth":"decline"),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"3",sm:"6"},{default:a(()=>[e(p,{class:"kpi-card",elevation:"2"},{default:a(()=>[e(y,{class:"pa-4"},{default:a(()=>[l("div",qt,[l("div",null,[l("div",Ht,n(g.value.totalSales.toLocaleString()),1),t[16]||(t[16]=l("div",{class:"text-caption text-grey"},"Total Sales",-1))]),e(k,{color:"green-lighten-5",size:"48"},{default:a(()=>[e(u,{color:"green"},{default:a(()=>t[17]||(t[17]=[o("mdi-shopping")])),_:1})]),_:1})]),e(_,{class:"mt-2",color:g.value.salesGrowth>=0?"green":"red",size:"small",variant:"tonal"},{default:a(()=>[e(u,{start:""},{default:a(()=>[o(n(g.value.salesGrowth>=0?"mdi-chart-line":"mdi-chart-line-variant"),1)]),_:1}),o(" "+n(Math.abs(g.value.salesGrowth))+"% "+n(g.value.salesGrowth>=0?"growth":"decline"),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"3",sm:"6"},{default:a(()=>[e(p,{class:"kpi-card",elevation:"2"},{default:a(()=>[e(y,{class:"pa-4"},{default:a(()=>[l("div",Qt,[l("div",null,[l("div",Wt,n(Y(g.value.outstandingBalance)),1),t[18]||(t[18]=l("div",{class:"text-caption text-grey"},"Outstanding Balance",-1))]),e(k,{color:"orange-lighten-5",size:"48"},{default:a(()=>[e(u,{color:"orange"},{default:a(()=>t[19]||(t[19]=[o("mdi-account-cash")])),_:1})]),_:1})]),e(_,{class:"mt-2",color:"orange",size:"small",variant:"tonal"},{default:a(()=>[o(n(g.value.pendingPayments)+" pending payments ",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"3",sm:"6"},{default:a(()=>[e(p,{class:"kpi-card",elevation:"2"},{default:a(()=>[e(y,{class:"pa-4"},{default:a(()=>[l("div",Yt,[l("div",null,[l("div",Jt,n(Y(g.value.averageOrderValue)),1),t[20]||(t[20]=l("div",{class:"text-caption text-grey"},"Avg Order Value",-1))]),e(k,{color:"purple-lighten-5",size:"48"},{default:a(()=>[e(u,{color:"purple"},{default:a(()=>t[21]||(t[21]=[o("mdi-chart-bar")])),_:1})]),_:1})]),e(_,{class:"mt-2",color:"purple",size:"small",variant:"tonal"},{default:a(()=>[o(n(g.value.itemsPerSale)+" items/sale ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(p,{class:"mb-6",elevation:"1"},{default:a(()=>[e(y,{class:"pa-4"},{default:a(()=>[e(z,{align:"center",dense:""},{default:a(()=>[e(f,{cols:"12",sm:"3"},{default:a(()=>[e(K,{modelValue:r.outlet_id,"onUpdate:modelValue":t[0]||(t[0]=s=>r.outlet_id=s),clearable:"",density:"comfortable","item-title":"name","item-value":"id",items:et.value,label:"Outlet",multiple:"","prepend-inner-icon":"mdi-store",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:a(()=>[e(ct,{modelValue:r.start_date,"onUpdate:modelValue":t[1]||(t[1]=s=>r.start_date=s),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"Start Date","prepend-inner-icon":"mdi-calendar",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:a(()=>[e(ct,{modelValue:r.end_date,"onUpdate:modelValue":t[2]||(t[2]=s=>r.end_date=s),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"End Date","prepend-inner-icon":"mdi-calendar",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:a(()=>[e(K,{modelValue:r.payment_status,"onUpdate:modelValue":t[3]||(t[3]=s=>r.payment_status=s),clearable:"",density:"comfortable",items:[{title:"All",value:""},{title:"Fully Paid",value:"PAID"},{title:"Part Paid",value:"PART"}],label:"Payment Status","prepend-inner-icon":"mdi-filter",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",sm:"2"},{default:a(()=>[e(K,{modelValue:r.time_range,"onUpdate:modelValue":t[4]||(t[4]=s=>r.time_range=s),density:"comfortable",items:pt,label:"Time Range","prepend-inner-icon":"mdi-clock",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(f,{class:"d-flex justify-end",cols:"12",sm:"12"},{default:a(()=>[e(O,{class:"mr-2",color:"primary",variant:"flat",onClick:U},{default:a(()=>[e(u,{start:""},{default:a(()=>t[22]||(t[22]=[o("mdi-magnify")])),_:1}),t[23]||(t[23]=o(" Search "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{class:"mb-6"},{default:a(()=>[e(f,{cols:"12",lg:"8"},{default:a(()=>[e(p,{class:"chart-card",elevation:"2"},{default:a(()=>[e(R,{class:"d-flex align-center"},{default:a(()=>[e(u,{class:"mr-2",color:"primary"},{default:a(()=>t[24]||(t[24]=[o("mdi-chart-line")])),_:1}),t[27]||(t[27]=o(" Revenue Trend ")),e(G),e(O,{color:"primary",size:"small",variant:"text",onClick:t[5]||(t[5]=s=>Vt("revenueChart"))},{default:a(()=>[e(u,{start:""},{default:a(()=>t[25]||(t[25]=[o("mdi-download")])),_:1}),t[26]||(t[26]=o(" Export "))]),_:1})]),_:1}),e(y,{class:"pa-2"},{default:a(()=>[l("div",{ref_key:"revenueChart",ref:M,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",lg:"4"},{default:a(()=>[e(p,{class:"chart-card",elevation:"2"},{default:a(()=>[e(R,{class:"d-flex align-center"},{default:a(()=>[e(u,{class:"mr-2",color:"green"},{default:a(()=>t[28]||(t[28]=[o("mdi-chart-pie")])),_:1}),t[29]||(t[29]=o(" Sales by Outlet "))]),_:1}),e(y,{class:"pa-2"},{default:a(()=>[l("div",{ref_key:"outletChart",ref:q,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{class:"mb-6"},{default:a(()=>[e(f,{cols:"12",md:"6"},{default:a(()=>[e(p,{class:"chart-card",elevation:"2"},{default:a(()=>[e(R,{class:"d-flex align-center"},{default:a(()=>[e(u,{class:"mr-2",color:"orange"},{default:a(()=>t[30]||(t[30]=[o("mdi-account-cash")])),_:1}),t[31]||(t[31]=o(" Payment Status "))]),_:1}),e(y,{class:"pa-2"},{default:a(()=>[l("div",{ref_key:"paymentChart",ref:H,style:{height:"300px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"6"},{default:a(()=>[e(p,{class:"chart-card",elevation:"2"},{default:a(()=>[e(R,{class:"d-flex align-center"},{default:a(()=>[e(u,{class:"mr-2",color:"purple"},{default:a(()=>t[32]||(t[32]=[o("mdi-trophy")])),_:1}),t[33]||(t[33]=o(" Top Products "))]),_:1}),e(y,{class:"pa-2"},{default:a(()=>[l("div",{ref_key:"productsChart",ref:Q,style:{height:"300px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1}),e(p,{class:"rounded-lg",elevation:"2"},{default:a(()=>[e(Ot,{active:b.value,color:"primary",height:"4",indeterminate:b.value},null,8,["active","indeterminate"]),e(Ut,{class:"elevation-0",headers:gt,items:j.value,"items-per-page":10,loading:b.value,"loading-text":"Loading sales...","no-data-text":"No sales found"},{top:a(()=>[e(R,{class:"d-flex align-center pt-4"},{default:a(()=>[e(u,{class:"mr-2",color:"primary"},{default:a(()=>t[34]||(t[34]=[o("mdi-format-list-bulleted")])),_:1}),t[35]||(t[35]=o(" Recent Sales ")),e(_,{class:"ml-3",color:"primary",size:"small",variant:"flat"},{default:a(()=>[o(n(j.value.length)+" total ",1)]),_:1})]),_:1}),e(nt)]),"item.sale_date":a(({item:s})=>[l("div",Xt,[e(u,{class:"mr-2",color:"grey",size:"16"},{default:a(()=>t[36]||(t[36]=[o("mdi-calendar")])),_:1}),l("span",Zt,n(J(s.sale_date)),1)])]),"item.outlet":a(({item:s})=>[l("div",Kt,[e(k,{class:"mr-2",color:X(s.outlet_type),size:"28"},{default:a(()=>[e(u,{color:"white",size:"14"},{default:a(()=>[o(n(st(s.outlet_type)),1)]),_:2},1024)]),_:2},1032,["color"]),l("div",te,n(s.outlet),1)])]),"item.customer_name":a(({item:s})=>[e(_,{color:s.customer_name?"primary":"grey",size:"small",variant:"flat"},{default:a(()=>[o(n(s.customer_name||"Walk-in"),1)]),_:2},1032,["color"])]),"item.total_qty":a(({item:s})=>[e(_,{color:"green",size:"small",variant:"flat"},{default:a(()=>[o(n(s.total_qty),1)]),_:2},1024)]),"item.total_amount":a(({item:s})=>[l("div",ee,n(S(s.total_amount)),1)]),"item.paid_amount":a(({item:s})=>[l("div",ae,n(S(s.paid_amount)),1)]),"item.balance":a(({item:s})=>[l("div",{class:it(["text-right",Number(s.balance)>0?"text-error":"text-success"])},n(S(s.balance)),3)]),"item.actions":a(({item:s})=>[l("div",le,[e(Gt,{location:"top"},{activator:a(({props:d})=>[e(O,Lt(d,{color:"info",icon:"",size:"small",variant:"text",onClick:m=>St(s)}),{default:a(()=>[e(u,null,{default:a(()=>t[37]||(t[37]=[o("mdi-eye-outline")])),_:1})]),_:2},1040,["onClick"])]),default:a(()=>[t[38]||(t[38]=l("span",null,"View Details",-1))]),_:2},1024)])]),_:1},8,["items","loading"]),e(mt,{class:"px-4 py-3 bg-grey-lighten-3"},{default:a(()=>[e(G),e(Nt,{modelValue:I.value,"onUpdate:modelValue":[t[6]||(t[6]=s=>I.value=s),N],color:"primary",length:at.value,"total-visible":"7"},null,8,["modelValue","length"])]),_:1})]),_:1}),e(Ft,{modelValue:E.value,"onUpdate:modelValue":t[9]||(t[9]=s=>E.value=s),"max-width":"900",scrollable:"",transition:"dialog-bottom-transition"},{default:a(()=>[e(p,{class:"rounded-lg"},{default:a(()=>[e(Et,{color:"info",density:"comfortable"},{default:a(()=>[e(k,{class:"mr-3",color:"info",size:"40"},{default:a(()=>[e(u,{color:"white"},{default:a(()=>t[39]||(t[39]=[o("mdi-eye")])),_:1})]),_:1}),e(At,{class:"text-h6 font-weight-bold"},{default:a(()=>t[40]||(t[40]=[o("Sale Details")])),_:1}),e(G),e(O,{icon:"",onClick:t[7]||(t[7]=s=>E.value=!1)},{default:a(()=>[e(u,null,{default:a(()=>t[41]||(t[41]=[o("mdi-close")])),_:1})]),_:1})]),_:1}),e(y,{class:"pa-6"},{default:a(()=>[e(p,{class:"mb-6 elevation-2"},{default:a(()=>[e(y,{class:"pa-4"},{default:a(()=>[e(z,null,{default:a(()=>{var s;return[e(f,{class:"border-e",cols:"12",md:"6"},{default:a(()=>{var d,m;return[l("div",se,[e(k,{class:"mr-3",color:"primary",size:"48"},{default:a(()=>[e(u,{color:"white"},{default:a(()=>t[42]||(t[42]=[o("mdi-identifier")])),_:1})]),_:1}),l("div",null,[t[43]||(t[43]=l("div",{class:"text-caption text-grey"},"SALE ID",-1)),l("div",oe," #"+n((d=c.value)==null?void 0:d.id),1)])]),l("div",ie,[e(u,{class:"mr-3",color:"grey"},{default:a(()=>t[44]||(t[44]=[o("mdi-calendar")])),_:1}),l("div",null,[t[45]||(t[45]=l("div",{class:"text-caption text-grey"},"DATE",-1)),l("div",ne,n(J((m=c.value)==null?void 0:m.sale_date)),1)])])]}),_:1}),e(f,{cols:"12",md:"6"},{default:a(()=>{var d,m,A,$;return[l("div",re,[e(k,{class:"mr-3",color:X((d=c.value)==null?void 0:d.outlet_type),size:"48"},{default:a(()=>[e(u,{color:"white"},{default:a(()=>{var D;return[o(n(st((D=c.value)==null?void 0:D.outlet_type)),1)]}),_:1})]),_:1},8,["color"]),l("div",null,[t[46]||(t[46]=l("div",{class:"text-caption text-grey"},"OUTLET",-1)),l("div",de,n((m=c.value)==null?void 0:m.outlet_name),1),e(_,{class:"mt-1",color:X((A=c.value)==null?void 0:A.outlet_type),size:"small"},{default:a(()=>{var D;return[o(n((D=c.value)==null?void 0:D.outlet_type),1)]}),_:1},8,["color"])])]),l("div",ue,[e(u,{class:"mr-3",color:"grey"},{default:a(()=>t[47]||(t[47]=[o("mdi-account")])),_:1}),l("div",null,[t[48]||(t[48]=l("div",{class:"text-caption text-grey"},"CUSTOMER",-1)),l("div",me,n((($=c.value)==null?void 0:$.customer_name)||"Walk-in"),1)])])]}),_:1}),(s=c.value)!=null&&s.notes?(P(),Z(f,{key:0,cols:"12"},{default:a(()=>[e(nt,{class:"my-3"}),t[49]||(t[49]=l("div",{class:"text-caption text-grey mb-1"},"NOTES",-1)),e(p,{variant:"outlined"},{default:a(()=>[e(y,{class:"pa-3"},{default:a(()=>{var d;return[o(n((d=c.value)==null?void 0:d.notes),1)]}),_:1})]),_:1})]),_:1})):rt("",!0)]}),_:1})]),_:1})]),_:1}),e(p,{class:"mb-6 elevation-2"},{default:a(()=>[e(R,{class:"d-flex align-center bg-teal-lighten-5"},{default:a(()=>[e(u,{class:"mr-2",color:"teal"},{default:a(()=>t[50]||(t[50]=[o("mdi-package-variant")])),_:1}),t[51]||(t[51]=o(" Items "))]),_:1}),e(y,{class:"pa-0"},{default:a(()=>{var s,d,m,A,$,D;return[e(ft,{density:"comfortable"},{default:a(()=>[t[52]||(t[52]=l("thead",null,[l("tr",{class:"bg-grey-lighten-4"},[l("th",{class:"text-left font-weight-bold text-grey"}," PRODUCT "),l("th",{class:"text-center font-weight-bold text-grey"}," QUALITY "),l("th",{class:"text-center font-weight-bold text-grey"},"QTY"),l("th",{class:"text-right font-weight-bold text-grey"}," UNIT PRICE "),l("th",{class:"text-right font-weight-bold text-grey"}," TOTAL PRICE ")])],-1)),l("tbody",null,[(P(!0),F(dt,null,ut(lt.value,C=>(P(),F("tr",{key:C.id},[l("td",fe,n(C.product_name),1),l("td",ce,[e(_,{color:vt(C.quality),size:"small",variant:"flat"},{default:a(()=>[o(n(C.quality),1)]),_:2},1032,["color"])]),l("td",pe,n(parseFloat(C.quantity)),1),l("td",ge,n(S(C.unit_price)),1),l("td",ve,n(S(C.quantity*C.unit_price)),1)]))),128))])]),_:1}),l("div",ye,[l("div",_e,[t[53]||(t[53]=o(" Paid: ")),l("strong",null,n(S(((s=c.value)==null?void 0:s.total_paid)||0)),1)]),l("div",be,[t[54]||(t[54]=o(" Total: ")),l("strong",null,n(S(((d=c.value)==null?void 0:d.total_amount)||0)),1)]),l("div",{class:it(["mt-1",(((m=c.value)==null?void 0:m.total_amount)||0)-(((A=c.value)==null?void 0:A.total_paid)||0)>0?"text-error":"text-success"])},[t[55]||(t[55]=o(" Balance: ")),l("strong",null,n(S(((($=c.value)==null?void 0:$.total_amount)||0)-(((D=c.value)==null?void 0:D.total_paid)||0))),1)],2)])]}),_:1})]),_:1}),W.value.length>0?(P(),Z(p,{key:0,class:"elevation-2"},{default:a(()=>[e(R,{class:"d-flex align-center bg-blue-lighten-5"},{default:a(()=>[e(u,{class:"mr-2",color:"blue"},{default:a(()=>t[56]||(t[56]=[o("mdi-cash-multiple")])),_:1}),t[57]||(t[57]=o(" Payments "))]),_:1}),e(y,{class:"pa-0"},{default:a(()=>[e(ft,{density:"comfortable"},{default:a(()=>[t[58]||(t[58]=l("thead",null,[l("tr",{class:"bg-grey-lighten-4"},[l("th",{class:"text-left font-weight-bold text-grey"},"DATE"),l("th",{class:"text-left font-weight-bold text-grey"},"METHOD"),l("th",{class:"text-left font-weight-bold text-grey"}," REFERENCE "),l("th",{class:"text-right font-weight-bold text-grey"}," AMOUNT ")])],-1)),l("tbody",null,[(P(!0),F(dt,null,ut(W.value,s=>(P(),F("tr",{key:s.id},[l("td",xe,n(J(s.payment_date)),1),l("td",he,[e(_,{size:"small",variant:"outlined"},{default:a(()=>[o(n(s.method),1)]),_:2},1024)]),l("td",we,n(s.reference||"N/A"),1),l("td",Ve,n(S(s.amount)),1)]))),128))])]),_:1})]),_:1})]),_:1})):rt("",!0)]),_:1}),e(mt,{class:"pa-4 bg-grey-lighten-4"},{default:a(()=>[e(G),e(O,{color:"primary",size:"large",variant:"flat",onClick:t[8]||(t[8]=s=>E.value=!1)},{default:a(()=>[e(u,{start:""},{default:a(()=>t[59]||(t[59]=[o("mdi-close")])),_:1}),t[60]||(t[60]=o(" Close "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ge=Dt(Se,[["__scopeId","data-v-02782670"]]);export{Ge as default};
