import{a as ee,p as J,aJ as Ve,e as M,h as te,y as s,i as t,H as U,D as Le,bz as Pe,j as ne,ag as ke,ab as Ce,bb as Ue,ae as Ae,n as Se,bL as tt,bX as ue,ax as G,aN as pe,r as B,aK as _e,ad as De,d as Me,C as V,aA as de,bY as at,bZ as $e,w as ze,av as z,bx as Oe,b_ as lt,X as nt,bk as rt,aq as ot,bm as it,ac as st,ai as dt,b9 as ut,bp as ct,aj as mt,as as ft,ak as vt,al as yt,bt as gt,bc as ht,an as kt,af as pt,m as _t,bv as bt,bf as wt,b5 as xt,F as Dt,a0 as Vt,$ as Te,l as Pt,q as Ct,s as Ye,v as ve,x as n,a2 as At,O as ye,A as le,B as I,I as Y,aH as St,E as Ie,Q as Mt,aP as Ot}from"./index-Bm_1tDB1.js";import"./index-BG4iPnQu.js";import{V as L,b as $,a as ie,c as Tt}from"./VCard-rPQh7TtY.js";import{V as R}from"./VCol-Cxhy3hua.js";import{V as Re}from"./VAutocomplete-BZ1xi2_X.js";import{V as ge,f as Yt,b as It}from"./VDataTable-BBB9e339.js";import{V as Rt}from"./VTextField-CkPOq7cJ.js";import{V as qt}from"./VDataTableServer-Bug6P6JN.js";import{V as se}from"./VChip-BaMa1hN2.js";import{V as Nt}from"./VContainer-BKK7VQkU.js";import{h as he}from"./install-DoKjw2Sc.js";import"./dialog-transition-DpdgYHbX.js";import"./VSlideGroup-BuwiiylY.js";const Qe=J({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:ke,default:"$next"},prevIcon:{type:ke,default:"$prev"},modeIcon:{type:ke,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),qe=ee()({name:"VDatePickerControls",props:Qe(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,r){let{emit:p}=r;const{t:m}=Ve(),l=M(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),h=M(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),O=M(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=M(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function c(){p("click:prev")}function D(){p("click:next")}function d(){p("click:year")}function k(){p("click:month")}return te(()=>s("div",{class:ne(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Pe(e.controlHeight)}},[t(U,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:l.value,text:e.text,variant:"text",rounded:!0,onClick:k},null),t(U,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:h.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":m("$vuetify.datePicker.ariaLabel.selectYear"),onClick:d},null),t(Le,null,null),s("div",{class:"v-date-picker-controls__month"},[t(U,{"data-testid":"prev-month",disabled:O.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":m("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:c},null),t(U,{"data-testid":"next-month",disabled:i.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":m("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:D},null)])])),{}}}),jt=J({appendIcon:ke,color:String,header:String,transition:String,onClick:tt()},"VDatePickerHeader"),Ne=ee()({name:"VDatePickerHeader",props:jt(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,r){let{emit:p,slots:m}=r;const{backgroundColorClasses:l,backgroundColorStyles:h}=Ce(()=>e.color);function O(){p("click")}function i(){p("click:append")}return te(()=>{const c=!!(m.default||e.header),D=!!(m.append||e.appendIcon);return s("div",{class:ne(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},l.value]),style:Se(h.value),onClick:O},[m.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[m.prepend()]),c&&t(Ue,{key:"content",name:e.transition},{default:()=>{var d;return[s("div",{key:e.header,class:"v-date-picker-header__content"},[((d=m.default)==null?void 0:d.call(m))??e.header])]}}),D&&s("div",{class:"v-date-picker-header__append"},[m.append?t(Ae,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var d;return[(d=m.append)==null?void 0:d.call(m)]}}):t(U,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),Bt=J({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function Ft(e){const r=ue(),p=G(e,"modelValue",[],f=>pe(f).map(y=>r.date(y))),m=M(()=>e.displayValue?r.date(e.displayValue):p.value.length>0?r.date(p.value[0]):e.min?r.date(e.min):Array.isArray(e.allowedDates)?r.date(e.allowedDates[0]):r.date()),l=G(e,"year",void 0,f=>{const y=f!=null?Number(f):r.getYear(m.value);return r.startOfYear(r.setYear(r.date(),y))},f=>r.getYear(f)),h=G(e,"month",void 0,f=>{const y=f!=null?Number(f):r.getMonth(m.value),b=r.setYear(r.startOfMonth(r.date()),r.getYear(l.value));return r.setMonth(b,y)},f=>r.getMonth(f)),O=M(()=>{const f=r.toJsDate(r.startOfWeek(r.date(),e.firstDayOfWeek)).getDay();return r.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((y,b)=>e.weekdays.includes((b+f)%7))}),i=M(()=>{const f=r.getWeekArray(h.value,e.firstDayOfWeek),y=f.flat(),b=6*7;if(e.weeksInMonth==="static"&&y.length<b){const C=y[y.length-1];let F=[];for(let j=1;j<=b-y.length;j++)F.push(r.addDays(C,j)),j%7===0&&(f.push(F),F=[])}return f});function c(f,y){return f.filter(b=>e.weekdays.includes(r.toJsDate(b).getDay())).map((b,C)=>{const F=r.toISO(b),j=!r.isSameMonth(b,h.value),X=r.isSameDay(b,r.startOfMonth(h.value)),A=r.isSameDay(b,r.endOfMonth(h.value)),v=r.isSameDay(b,h.value),q=e.weekdays.length;return{date:b,formatted:r.format(b,"keyboardDate"),isAdjacent:j,isDisabled:P(b),isEnd:A,isHidden:j&&!e.showAdjacentMonths,isSame:v,isSelected:p.value.some(x=>r.isSameDay(b,x)),isStart:X,isToday:r.isSameDay(b,y),isWeekEnd:C%q===q-1,isWeekStart:C%q===0,isoDate:F,localized:r.format(b,"dayOfMonth"),month:r.getMonth(b),year:r.getYear(b)}})}const D=M(()=>{const f=r.startOfWeek(m.value,e.firstDayOfWeek),y=[];for(let C=0;C<=6;C++)y.push(r.addDays(f,C));const b=r.date();return c(y,b)}),d=M(()=>{const f=i.value.flat(),y=r.date();return c(f,y)}),k=M(()=>i.value.map(f=>f.length?r.getWeek(f[0],e.firstDayOfWeek,e.firstDayOfYear):null));function P(f){if(e.disabled)return!0;const y=r.date(f);return e.min&&r.isBefore(r.endOfDay(y),r.date(e.min))||e.max&&r.isAfter(y,r.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(b=>r.isSameDay(r.date(b),y)):typeof e.allowedDates=="function"?!e.allowedDates(y):!1}return{displayValue:m,daysInMonth:d,daysInWeek:D,genDays:c,model:p,weeksInMonth:i,weekdayLabels:O,weekNumbers:k}}const He=J({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...de(Bt(),["displayValue"])},"VDatePickerMonth"),je=ee()({name:"VDatePickerMonth",props:He(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,r){let{emit:p,slots:m}=r;const l=B(),{t:h}=Ve(),{daysInMonth:O,model:i,weekNumbers:c,weekdayLabels:D}=Ft(e),d=ue(),k=_e(),P=_e(),f=_e(!1),y=De(()=>f.value?e.reverseTransition:e.transition);e.multiple==="range"&&i.value.length>0&&(k.value=i.value[0],i.value.length>1&&(P.value=i.value[i.value.length-1]));const b=M(()=>{const A=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return i.value.length>=A});Me(O,(A,v)=>{v&&(f.value=d.isBefore(A[0].date,v[0].date))});function C(A){const v=d.startOfDay(A);if(i.value.length===0?k.value=void 0:i.value.length===1&&(k.value=i.value[0],P.value=void 0),!k.value)k.value=v,i.value=[k.value];else if(P.value)k.value=A,P.value=void 0,i.value=[k.value];else{if(d.isSameDay(v,k.value)){k.value=void 0,i.value=[];return}else d.isBefore(v,k.value)?(P.value=d.endOfDay(k.value),k.value=v):P.value=d.endOfDay(v);i.value=at(d,k.value,P.value)}}function F(A){const v=d.format(A.date,"fullDateWithWeekday"),q=A.isToday?"currentDate":"selectDate";return h(`$vuetify.datePicker.ariaLabel.${q}`,v)}function j(A){const v=i.value.findIndex(q=>d.isSameDay(q,A));if(v===-1)i.value=[...i.value,A];else{const q=[...i.value];q.splice(v,1),i.value=q}}function X(A){e.multiple==="range"?C(A):e.multiple?j(A):i.value=[A]}te(()=>s("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[V("Â ")]),c.value.map(A=>s("div",{class:ne(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[A]))]),t(Ue,{name:y.value},{default:()=>{var A;return[s("div",{ref:l,key:(A=O.value[0].date)==null?void 0:A.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&D.value.map(v=>s("div",{class:ne(["v-date-picker-month__day","v-date-picker-month__weekday"])},[v])),O.value.map((v,q)=>{var _;const x={props:{class:"v-date-picker-month__day-btn",color:v.isSelected||v.isToday?e.color:void 0,disabled:v.isDisabled,icon:!0,ripple:!1,text:v.localized,variant:v.isSelected?"flat":v.isToday?"outlined":"text","aria-label":F(v),"aria-current":v.isToday?"date":void 0,onClick:()=>X(v.date)},item:v,i:q};return b.value&&!v.isSelected&&(v.isDisabled=!0),s("div",{class:ne(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":v.isAdjacent,"v-date-picker-month__day--hide-adjacent":v.isHidden,"v-date-picker-month__day--selected":v.isSelected,"v-date-picker-month__day--week-end":v.isWeekEnd,"v-date-picker-month__day--week-start":v.isWeekStart}]),"data-v-date":v.isDisabled?void 0:v.isoDate},[(e.showAdjacentMonths||!v.isAdjacent)&&(((_=m.day)==null?void 0:_.call(m,x))??t(U,x.props,null))])})])]}})]))}}),Ge=J({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),Be=ee()({name:"VDatePickerMonths",props:Ge(),emits:{"update:modelValue":e=>!0},setup(e,r){let{emit:p,slots:m}=r;const l=ue(),h=G(e,"modelValue"),O=M(()=>{let c=l.startOfYear(l.date());return e.year&&(c=l.setYear(c,e.year)),$e(12).map(D=>{const d=l.format(c,"monthShort"),k=l.format(c,"month"),P=!!(!i(D)||e.min&&l.isAfter(l.startOfMonth(l.date(e.min)),c)||e.max&&l.isAfter(c,l.startOfMonth(l.date(e.max))));return c=l.getNextMonth(c),{isDisabled:P,text:d,label:k,value:D}})});ze(()=>{h.value=h.value??l.getMonth(l.date())});function i(c){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(c):typeof e.allowedMonths=="function"?e.allowedMonths(c):!0}return te(()=>s("div",{class:"v-date-picker-months",style:{height:Pe(e.height)}},[s("div",{class:"v-date-picker-months__content"},[O.value.map((c,D)=>{var P;const d={active:h.value===D,ariaLabel:c.label,color:h.value===D?e.color:void 0,disabled:c.isDisabled,rounded:!0,text:c.text,variant:h.value===c.value?"flat":"text",onClick:()=>k(D)};function k(f){if(h.value===f){p("update:modelValue",h.value);return}h.value=f}return((P=m.month)==null?void 0:P.call(m,{month:c,i:D,props:d}))??t(U,z({key:"month"},d),null)})])])),{}}}),Je=J({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),Fe=ee()({name:"VDatePickerYears",props:Je(),directives:{vIntersect:Oe},emits:{"update:modelValue":e=>!0},setup(e,r){let{emit:p,slots:m}=r;const l=ue(),h=G(e,"modelValue"),O=M(()=>{const d=l.getYear(l.date());let k=d-100,P=d+52;e.min&&(k=l.getYear(l.date(e.min))),e.max&&(P=l.getYear(l.date(e.max)));let f=l.startOfYear(l.date());return f=l.setYear(f,k),$e(P-k+1,k).map(y=>{const b=l.format(f,"year");return f=l.setYear(f,l.getYear(f)+1),{text:b,value:y,isDisabled:!D(y)}})});ze(()=>{h.value=h.value??l.getYear(l.date())});const i=lt();function c(){var d,k;(d=i.el)==null||d.focus(),(k=i.el)==null||k.scrollIntoView({block:"center"})}function D(d){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(d):typeof e.allowedYears=="function"?e.allowedYears(d):!0}return te(()=>nt(s("div",{class:"v-date-picker-years",style:{height:Pe(e.height)}},[s("div",{class:"v-date-picker-years__content"},[O.value.map((d,k)=>{var f;const P={ref:h.value===d.value?i:void 0,active:h.value===d.value,color:h.value===d.value?e.color:void 0,rounded:!0,text:d.text,disabled:d.isDisabled,variant:h.value===d.value?"flat":"text",onClick:()=>{if(h.value===d.value){p("update:modelValue",h.value);return}h.value=d.value}};return((f=m.year)==null?void 0:f.call(m,{year:d,i:k,props:P}))??t(U,z({key:"month"},P),null)})])]),[[Oe,{handler:c},null,{once:!0}]])),{}}}),Et=rt("v-picker-title"),Xe=J({color:String,...bt(),..._t(),...pt(),...kt(),...ht(),...gt(),...yt(),...vt(),...ft()},"VSheet"),Ee=ee()({name:"VSheet",props:Xe(),setup(e,r){let{slots:p}=r;const{themeClasses:m}=ot(e),{backgroundColorClasses:l,backgroundColorStyles:h}=Ce(()=>e.color),{borderClasses:O}=it(e),{dimensionStyles:i}=st(e),{elevationClasses:c}=dt(e),{locationStyles:D}=ut(e),{positionClasses:d}=ct(e),{roundedClasses:k}=mt(e);return te(()=>t(e.tag,{class:ne(["v-sheet",m.value,l.value,O.value,c.value,d.value,k.value,e.class]),style:Se([h.value,i.value,D.value,e.style])},p)),{}}}),Ke=J({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...Xe()},"VPicker"),We=ee()({name:"VPicker",props:Ke(),setup(e,r){let{slots:p}=r;const{backgroundColorClasses:m,backgroundColorStyles:l}=Ce(()=>e.color);return te(()=>{const h=Ee.filterProps(e),O=!e.hideTitle&&!!(e.title||p.title);return t(Ee,z(h,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!p.actions},e.class],style:e.style}),{default:()=>{var i;return[!e.hideHeader&&s("div",{key:"header",class:ne([m.value]),style:Se([l.value])},[O&&t(Et,{key:"picker-title"},{default:()=>{var c;return[((c=p.title)==null?void 0:c.call(p))??e.title]}}),p.header&&s("div",{class:"v-picker__header"},[p.header()])]),s("div",{class:"v-picker__body"},[(i=p.default)==null?void 0:i.call(p)]),p.actions&&t(Ae,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[p.actions()])]})]}})}),{}}}),Wt=J({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...Qe(),...He({weeksInMonth:"static"}),...de(Ge(),["modelValue"]),...de(Je(),["modelValue"]),...Ke({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Lt=ee()({name:"VDatePicker",props:Wt(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,r){let{emit:p,slots:m}=r;const l=ue(),{t:h}=Ve(),{rtlClasses:O}=wt(),i=G(e,"modelValue",void 0,g=>pe(g).map(w=>l.date(w)),g=>e.multiple?g:g[0]),c=G(e,"viewMode"),D=M(()=>{const g=l.date(e.min);return e.min&&l.isValid(g)?g:null}),d=M(()=>{const g=l.date(e.max);return e.max&&l.isValid(g)?g:null}),k=M(()=>{var S;const g=l.date();let w=g;return(S=i.value)!=null&&S[0]?w=l.date(i.value[0]):D.value&&l.isBefore(g,D.value)?w=D.value:d.value&&l.isAfter(g,d.value)&&(w=d.value),w&&l.isValid(w)?w:g}),P=De(()=>e.headerColor??e.color),f=G(e,"month"),y=M({get:()=>Number(f.value??l.getMonth(l.startOfMonth(k.value))),set:g=>f.value=g}),b=G(e,"year"),C=M({get:()=>Number(b.value??l.getYear(l.startOfYear(l.setMonth(k.value,y.value)))),set:g=>b.value=g}),F=_e(!1),j=M(()=>e.multiple&&i.value.length>1?h("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&l.isValid(i.value[0])?l.format(l.date(i.value[0]),"normalDateWithWeekday"):h(e.header)),X=M(()=>{let g=l.date();return g=l.setDate(g,1),g=l.setMonth(g,y.value),g=l.setYear(g,C.value),l.format(g,"monthAndYear")}),A=De(()=>`date-picker-header${F.value?"-reverse":""}-transition`),v=M(()=>{if(e.disabled)return!0;const g=[];if(c.value!=="month")g.push("prev","next");else{let w=l.date();if(w=l.startOfMonth(w),w=l.setMonth(w,y.value),w=l.setYear(w,C.value),D.value){const S=l.addDays(l.startOfMonth(w),-1);l.isAfter(D.value,S)&&g.push("prev")}if(d.value){const S=l.addDays(l.endOfMonth(w),1);l.isAfter(S,d.value)&&g.push("next")}}return g}),q=M(()=>e.allowedYears||be),x=M(()=>e.allowedMonths||we);function _(g,w){const S=e.allowedDates;if(typeof S!="function")return!0;const Q=l.getDiff(w,g,"days");for(let H=0;H<Q;H++)if(S(l.addDays(g,H)))return!0;return!1}function be(g){if(typeof e.allowedDates=="function"){const w=l.parseISO(`${g}-01-01`);return _(w,l.endOfYear(w))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const w of e.allowedDates)if(l.getYear(l.date(w))===g)return!0;return!1}return!0}function we(g){if(typeof e.allowedDates=="function"){const w=String(g+1).padStart(2,"0"),S=l.parseISO(`${C.value}-${w}-01`);return _(S,l.endOfMonth(S))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const w of e.allowedDates)if(l.getYear(l.date(w))===C.value&&l.getMonth(l.date(w))===g)return!0;return!1}return!0}function re(){y.value<11?y.value++:(C.value++,y.value=0,W()),K()}function ce(){y.value>0?y.value--:(C.value--,y.value=11,W()),K()}function xe(){c.value="month"}function me(){c.value=c.value==="months"?"month":"months"}function fe(){c.value=c.value==="year"?"month":"year"}function K(){c.value==="months"&&me()}function W(){c.value==="year"&&fe()}return Me(i,(g,w)=>{const S=pe(w),Q=pe(g);if(!Q.length)return;const H=l.date(S[S.length-1]),ae=l.date(Q[Q.length-1]),Z=l.getMonth(ae),T=l.getYear(ae);Z!==y.value&&(y.value=Z,K()),T!==C.value&&(C.value=T,W()),F.value=l.isBefore(H,ae)}),te(()=>{const g=We.filterProps(e),w=qe.filterProps(e),S=Ne.filterProps(e),Q=je.filterProps(e),H=de(Be.filterProps(e),["modelValue"]),ae=de(Fe.filterProps(e),["modelValue"]),Z={color:P.value,header:j.value,transition:A.value};return t(We,z(g,{color:P.value,class:["v-date-picker",`v-date-picker--${c.value}`,{"v-date-picker--show-week":e.showWeek},O.value,e.class],style:e.style}),{title:()=>{var T;return((T=m.title)==null?void 0:T.call(m))??s("div",{class:"v-date-picker__title"},[h(e.title)])},header:()=>m.header?t(Ae,{defaults:{VDatePickerHeader:{...Z}}},{default:()=>{var T;return[(T=m.header)==null?void 0:T.call(m,Z)]}}):t(Ne,z({key:"header"},S,Z,{onClick:c.value!=="month"?xe:void 0}),{prepend:m.prepend,append:m.append}),default:()=>s(Dt,null,[t(qe,z(w,{disabled:v.value,text:X.value,"onClick:next":re,"onClick:prev":ce,"onClick:month":me,"onClick:year":fe}),null),t(xt,{hideOnLeave:!0},{default:()=>[c.value==="months"?t(Be,z({key:"date-picker-months"},H,{modelValue:y.value,"onUpdate:modelValue":[T=>y.value=T,K],min:D.value,max:d.value,year:C.value,allowedMonths:x.value}),{month:m.month}):c.value==="year"?t(Fe,z({key:"date-picker-years"},ae,{modelValue:C.value,"onUpdate:modelValue":[T=>C.value=T,W],min:D.value,max:d.value,allowedYears:q.value}),{year:m.year}):t(je,z({key:"date-picker-month"},Q,{modelValue:i.value,"onUpdate:modelValue":T=>i.value=T,month:y.value,"onUpdate:month":[T=>y.value=T,K],year:C.value,"onUpdate:year":[T=>C.value=T,W],min:D.value,max:d.value}),{day:m.day})]})]),actions:m.actions})}),{}}}),Ut={class:"d-flex align-center"},$t={class:"d-flex align-center"},zt={class:"text-h5 font-weight-bold"},Qt={class:"d-flex align-center"},Ht={class:"text-h5 font-weight-bold"},Gt={class:"d-flex align-center"},Jt={class:"text-h5 font-weight-bold"},Xt={class:"d-flex align-center"},Kt={class:"text-h5 font-weight-bold"},Zt={class:"text-caption text-grey"},ea={class:"text-center"},ta={class:"d-flex align-center"},aa={class:"font-weight-medium"},la={class:"text-caption text-grey"},na={class:"d-flex align-center"},ra={class:"font-weight-medium"},oa={class:"text-caption text-grey"},ia={class:"d-flex align-center justify-center"},sa={class:"text-right font-weight-medium"},da={key:0,class:"text-caption"},ua={key:1,class:"text-caption text-grey"},ca={class:"text-caption text-grey"},Va={__name:"QualityAdjustmentReport",setup(e){const r=Vt(),p=B(!1),m=B(!1),l=B(!1),h=B(!1),O=B([]),i=B({}),c=B({totalAdjustments:0,totalQuantity:0,totalValue:0,uniqueProducts:0,uniqueOutlets:0,replacementCount:0,nonReplacementCount:0,averageQuantity:0}),D=B([]),d=B([]);let k=null,P=null,f=null,y=null;const b=B(null),C=B(null),F=B(null),j=B(null),X=[{text:"All Qualities",value:"ALL"},{text:"Good",value:"GOOD"},{text:"Damaged",value:"DAMAGED"},{text:"Reject",value:"REJECT"}],A=[{text:"All Types",value:"ALL"},{text:"Replacement Only",value:"true"},{text:"Non-Replacement Only",value:"false"}],v=B([new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],new Date().toISOString().split("T")[0]]),q=M(()=>v.value&&v.value.length===2?`${re(v.value[0])} - ${re(v.value[1])}`:"Select Date Range"),x=Te({currentPage:1,totalPages:1,totalRecords:0,limit:20}),_=Te({product_id:"",outlet_id:"",from_quality:"",to_quality:"",is_replacement:"",start_date:v.value[0],end_date:v.value[1]}),be=[{title:"Date",key:"movement_date",sortable:!1,align:"center"},{title:"Product",key:"product_name",sortable:!1},{title:"Outlet",key:"outlet_name",sortable:!1},{title:"Quality Flow",key:"quality_flow",align:"center",sortable:!1},{title:"Quantity",key:"quantity",align:"center",sortable:!1},{title:"Replacement",key:"is_replacement",align:"center",sortable:!1},{title:"Reference Type",key:"reference_type",align:"center",sortable:!1},{title:"Replacement Note",key:"replacement_note",sortable:!1},{title:"Adjustment Value",key:"adjustment_value",align:"right",sortable:!1},{title:"Created By",key:"created_by_name",sortable:!1}],we=M(()=>{const o=new URLSearchParams;return _.product_id&&o.append("product_id",_.product_id),_.outlet_id&&o.append("outlet_id",_.outlet_id),_.from_quality&&o.append("from_quality",_.from_quality),_.to_quality&&o.append("to_quality",_.to_quality),_.is_replacement&&o.append("is_replacement",_.is_replacement),_.start_date&&o.append("start_date",_.start_date),_.end_date&&o.append("end_date",_.end_date),o.append("page",x.currentPage),o.append("limit",x.limit),o});function re(o){if(!o)return"";const a=new Date(o),u=String(a.getDate()).padStart(2,"0"),E=String(a.getMonth()+1).padStart(2,"0"),N=a.getFullYear();return`${u}-${E}-${N}`}function ce(o){return{GOOD:"green",DAMAGED:"orange",REJECT:"red"}[o]||"grey"}function xe(o){return o>50?"red":o>20?"orange":"blue"}function me(o){return{MAIN:"primary",SHOP:"success",CAR:"warning"}[o]||"grey"}function fe(o){return{MAIN:"mdi-home",SHOP:"mdi-store",CAR:"mdi-truck"}[o]||"mdi-store"}function K(o){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(o)}function W(o){return new Intl.NumberFormat().format(o)}function g(){const o=(x.currentPage-1)*x.limit+1,a=Math.min(x.currentPage*x.limit,x.totalRecords);return`${W(o)} - ${W(a)}`}function w(o){o&&o.length===2&&(_.start_date=o[0],_.end_date=o[1])}async function S(){p.value=!0;try{const o=await fetch(`/reports/quality-adjustments?${we.value}`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const a=await o.json();O.value=a.data||[],O.value=O.value.map(u=>({...u,movement_date_formatted:re(u.movement_date)})),i.value=a.chartData||{},c.value=a.summary||{},a.pagination&&Object.assign(x,a.pagination),await Ot(),H()}catch(o){console.error("Error loading quality adjustments report:",o),r.commit("setMessage",{type:"error",text:"Failed to load quality adjustments report"})}finally{p.value=!1}}function Q(o){(o.page!==x.currentPage||o.itemsPerPage!==x.limit)&&(x.currentPage=o.page,x.limit=o.itemsPerPage,S())}function H(){var o,a,u;if([k,P,f,y].forEach(E=>E==null?void 0:E.dispose()),b.value&&((o=i.value.qualityFlow)==null?void 0:o.length)>0){k=he(b.value);const E={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center"},series:[{name:"Quality Flow",type:"pie",radius:["40%","70%"],data:i.value.qualityFlow.map(N=>({name:N.flow,value:N.quantity})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};k.setOption(E)}if(C.value&&i.value.replacementAnalysis){P=he(C.value);const E={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"Replacement Analysis",type:"pie",radius:"50%",data:[{name:"Replacement",value:i.value.replacementAnalysis.replacement},{name:"Non-Replacement",value:i.value.replacementAnalysis.nonReplacement}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};P.setOption(E)}if(F.value&&((a=i.value.monthlyTrend)==null?void 0:a.length)>0){f=he(F.value);const E={tooltip:{trigger:"axis"},xAxis:{type:"category",data:i.value.monthlyTrend.map(N=>N.month)},yAxis:[{type:"value",name:"Quantity"},{type:"value",name:"Value"}],series:[{name:"Quantity",type:"bar",data:i.value.monthlyTrend.map(N=>N.quantity)},{name:"Value",type:"line",yAxisIndex:1,data:i.value.monthlyTrend.map(N=>N.value)}]};f.setOption(E)}if(j.value&&((u=i.value.productBreakdown)==null?void 0:u.length)>0){y=he(j.value);const E={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"value"},yAxis:{type:"category",data:i.value.productBreakdown.map(N=>N.product.length>15?N.product.substring(0,15)+"...":N.product),axisLabel:{interval:0,rotate:0}},series:[{name:"Adjustments",type:"bar",data:i.value.productBreakdown.map(N=>N.quantity)}]};y.setOption(E)}}async function ae(){m.value=!0;try{r.commit("setMessage",{type:"success",text:"Export feature coming soon!"})}catch{r.commit("setMessage",{type:"error",text:"Failed to export report"})}finally{m.value=!1}}function Z(){_.product_id="",_.outlet_id="",_.from_quality="",_.to_quality="",_.is_replacement="";const o=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],a=new Date().toISOString().split("T")[0];v.value=[o,a],_.start_date=o,_.end_date=a,x.currentPage=1,S()}async function T(){h.value=!0;try{const o=await fetch("/outlets?limit=1000&active=true");if(o.ok){const a=await o.json();d.value=a.data||[]}}catch(o){console.error("Error loading outlets:",o)}finally{h.value=!1}}async function Ze(){l.value=!0;try{const o=await fetch("/products?limit=1000&active=true");if(o.ok){const a=await o.json();D.value=a.data||[]}}catch(o){console.error("Error loading products:",o)}finally{l.value=!1}}async function et(){await Promise.all([T(),Ze()]),await S()}let oe=null;return Me(()=>({..._}),()=>{x.currentPage=1,oe&&clearTimeout(oe),oe=setTimeout(()=>{S()},500)},{deep:!0}),Pt(()=>{et()}),Ct(()=>{[k,P,f,y].forEach(o=>o==null?void 0:o.dispose()),oe&&clearTimeout(oe)}),(o,a)=>(ve(),Ye(Nt,{class:"bg-grey-lighten-4 pa-6",fluid:""},{default:n(()=>[t(L,{class:"mb-6",elevation:"2"},{default:n(()=>[t($,{class:"pa-6"},{default:n(()=>[t(ye,{align:"center"},{default:n(()=>[t(R,{cols:"12",md:"6"},{default:n(()=>[s("div",Ut,[t(le,{class:"mr-4",color:"warning",size:"56"},{default:n(()=>[t(I,{color:"white",size:"32"},{default:n(()=>a[10]||(a[10]=[V("mdi-autorenew")])),_:1})]),_:1}),a[11]||(a[11]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold text-warning"}," Quality Adjustments Report "),s("p",{class:"text-body-1 text-grey mt-1"}," Track quality changes, replacements, and adjustments ")],-1))])]),_:1}),t(R,{class:"text-right",cols:"12",md:"6"},{default:n(()=>[t(U,{color:"warning",loading:m.value,size:"large",onClick:ae},{default:n(()=>[t(I,{start:""},{default:n(()=>a[12]||(a[12]=[V("mdi-file-excel")])),_:1}),a[13]||(a[13]=V(" Export Excel "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),t(L,{class:"mb-6",elevation:"1"},{default:n(()=>[t($,{class:"pa-4"},{default:n(()=>[t(ye,{align:"center",dense:""},{default:n(()=>[t(R,{cols:"12",sm:"2"},{default:n(()=>[t(Re,{modelValue:_.product_id,"onUpdate:modelValue":a[0]||(a[0]=u=>_.product_id=u),clearable:"",density:"comfortable","item-title":"name","item-value":"id",items:D.value,label:"Product",loading:l.value,variant:"outlined"},null,8,["modelValue","items","loading"])]),_:1}),t(R,{cols:"12",sm:"2"},{default:n(()=>[t(Re,{modelValue:_.outlet_id,"onUpdate:modelValue":a[1]||(a[1]=u=>_.outlet_id=u),clearable:"",density:"comfortable","item-title":"name","item-value":"id",items:d.value,label:"Outlet",loading:h.value,variant:"outlined"},null,8,["modelValue","items","loading"])]),_:1}),t(R,{cols:"12",sm:"2"},{default:n(()=>[t(ge,{modelValue:_.from_quality,"onUpdate:modelValue":a[2]||(a[2]=u=>_.from_quality=u),clearable:"",density:"comfortable","item-title":"text","item-value":"value",items:X,label:"From Quality",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(R,{cols:"12",sm:"2"},{default:n(()=>[t(ge,{modelValue:_.to_quality,"onUpdate:modelValue":a[3]||(a[3]=u=>_.to_quality=u),clearable:"",density:"comfortable","item-title":"text","item-value":"value",items:X,label:"To Quality",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(R,{cols:"12",sm:"2"},{default:n(()=>[t(ge,{modelValue:_.is_replacement,"onUpdate:modelValue":a[4]||(a[4]=u=>_.is_replacement=u),clearable:"",density:"comfortable","item-title":"text","item-value":"value",items:A,label:"Replacement",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(R,{cols:"12",sm:"2"},{default:n(()=>[t(Yt,null,{activator:n(({props:u})=>[t(Rt,z(u,{density:"comfortable",label:"Date Range","model-value":q.value,"prepend-inner-icon":"mdi-calendar",readonly:"",variant:"outlined"}),null,16,["model-value"])]),default:n(()=>[t(Lt,{modelValue:v.value,"onUpdate:modelValue":[a[5]||(a[5]=u=>v.value=u),w],range:""},null,8,["modelValue"])]),_:1})]),_:1}),t(R,{class:"d-flex justify-end",cols:"12",sm:"2"},{default:n(()=>[t(U,{class:"mr-2",color:"warning",loading:p.value,variant:"flat",onClick:S},{default:n(()=>[t(I,{start:""},{default:n(()=>a[14]||(a[14]=[V("mdi-magnify")])),_:1}),a[15]||(a[15]=V(" Generate "))]),_:1},8,["loading"]),t(U,{color:"grey",variant:"outlined",onClick:Z},{default:n(()=>[t(I,{start:""},{default:n(()=>a[16]||(a[16]=[V("mdi-refresh")])),_:1}),a[17]||(a[17]=V(" Reset "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ye,{class:"mb-6",dense:""},{default:n(()=>[t(R,{cols:"12",md:"3",sm:"6"},{default:n(()=>[t(L,{color:"blue-lighten-5",elevation:"1"},{default:n(()=>[t($,{class:"pa-4"},{default:n(()=>[s("div",$t,[t(le,{class:"mr-3",color:"blue",size:"48"},{default:n(()=>[t(I,{color:"white"},{default:n(()=>a[18]||(a[18]=[V("mdi-autorenew")])),_:1})]),_:1}),s("div",null,[a[19]||(a[19]=s("div",{class:"text-caption text-grey"},"TOTAL ADJUSTMENTS",-1)),s("div",zt,Y(c.value.totalAdjustments),1)])])]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",md:"3",sm:"6"},{default:n(()=>[t(L,{color:"green-lighten-5",elevation:"1"},{default:n(()=>[t($,{class:"pa-4"},{default:n(()=>[s("div",Qt,[t(le,{class:"mr-3",color:"green",size:"48"},{default:n(()=>[t(I,{color:"white"},{default:n(()=>a[20]||(a[20]=[V("mdi-package-variant")])),_:1})]),_:1}),s("div",null,[a[21]||(a[21]=s("div",{class:"text-caption text-grey"},"TOTAL QUANTITY",-1)),s("div",Ht,Y(W(c.value.totalQuantity)),1)])])]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",md:"3",sm:"6"},{default:n(()=>[t(L,{color:"orange-lighten-5",elevation:"1"},{default:n(()=>[t($,{class:"pa-4"},{default:n(()=>[s("div",Gt,[t(le,{class:"mr-3",color:"orange",size:"48"},{default:n(()=>[t(I,{color:"white"},{default:n(()=>a[22]||(a[22]=[V("mdi-currency-usd")])),_:1})]),_:1}),s("div",null,[a[23]||(a[23]=s("div",{class:"text-caption text-grey"},"TOTAL VALUE",-1)),s("div",Jt,Y(K(c.value.totalValue)),1)])])]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",md:"3",sm:"6"},{default:n(()=>[t(L,{color:"purple-lighten-5",elevation:"1"},{default:n(()=>[t($,{class:"pa-4"},{default:n(()=>[s("div",Xt,[t(le,{class:"mr-3",color:"purple",size:"48"},{default:n(()=>[t(I,{color:"white"},{default:n(()=>a[24]||(a[24]=[V("mdi-repeat")])),_:1})]),_:1}),s("div",null,[a[25]||(a[25]=s("div",{class:"text-caption text-grey"},"REPLACEMENTS",-1)),s("div",Kt,Y(c.value.replacementCount),1),s("div",Zt,Y((c.value.replacementCount/c.value.totalAdjustments*100||0).toFixed(1))+"% ",1)])])]),_:1})]),_:1})]),_:1})]),_:1}),i.value.qualityFlow&&i.value.qualityFlow.length>0?(ve(),Ye(ye,{key:0,class:"mb-6"},{default:n(()=>[t(R,{cols:"12",lg:"6"},{default:n(()=>[t(L,{elevation:"2"},{default:n(()=>[t(ie,{class:"d-flex align-center"},{default:n(()=>[t(I,{class:"mr-2",color:"warning"},{default:n(()=>a[26]||(a[26]=[V("mdi-transfer")])),_:1}),a[27]||(a[27]=V(" Quality Flow Analysis "))]),_:1}),t($,{class:"pa-4"},{default:n(()=>[s("div",{ref_key:"qualityFlowChart",ref:b,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",lg:"6"},{default:n(()=>[t(L,{elevation:"2"},{default:n(()=>[t(ie,{class:"d-flex align-center"},{default:n(()=>[t(I,{class:"mr-2",color:"warning"},{default:n(()=>a[28]||(a[28]=[V("mdi-swap-horizontal")])),_:1}),a[29]||(a[29]=V(" Replacement Analysis "))]),_:1}),t($,{class:"pa-4"},{default:n(()=>[s("div",{ref_key:"replacementChart",ref:C,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",lg:"8"},{default:n(()=>[t(L,{elevation:"2"},{default:n(()=>[t(ie,{class:"d-flex align-center"},{default:n(()=>[t(I,{class:"mr-2",color:"warning"},{default:n(()=>a[30]||(a[30]=[V("mdi-chart-line")])),_:1}),a[31]||(a[31]=V(" Monthly Adjustment Trend "))]),_:1}),t($,{class:"pa-4"},{default:n(()=>[s("div",{ref_key:"monthlyTrendChart",ref:F,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",lg:"4"},{default:n(()=>[t(L,{elevation:"2"},{default:n(()=>[t(ie,{class:"d-flex align-center"},{default:n(()=>[t(I,{class:"mr-2",color:"warning"},{default:n(()=>a[32]||(a[32]=[V("mdi-star")])),_:1}),a[33]||(a[33]=V(" Top Products by Adjustments "))]),_:1}),t($,{class:"pa-4"},{default:n(()=>[s("div",{ref_key:"productsChart",ref:j,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1})):At("",!0),t(L,{elevation:"2"},{default:n(()=>[t(St,{active:p.value,color:"warning",height:"4",indeterminate:p.value},null,8,["active","indeterminate"]),t(qt,{"items-per-page":x.limit,"onUpdate:itemsPerPage":a[8]||(a[8]=u=>x.limit=u),page:x.currentPage,"onUpdate:page":a[9]||(a[9]=u=>x.currentPage=u),headers:be,items:O.value,"items-length":x.totalRecords,loading:p.value,"loading-text":"Loading quality adjustments...","no-data-text":"No quality adjustments found","onUpdate:options":Q},{top:n(()=>[t(ie,{class:"d-flex align-center pt-4"},{default:n(()=>[t(I,{class:"mr-2",color:"warning"},{default:n(()=>a[34]||(a[34]=[V("mdi-table")])),_:1}),a[35]||(a[35]=V(" Quality Adjustment Details ")),t(se,{class:"ml-3",color:"warning",size:"small",variant:"flat"},{default:n(()=>[V(Y(W(x.totalRecords))+" total records ",1)]),_:1})]),_:1}),t(Mt)]),"item.movement_date":n(({item:u})=>[s("div",ea,Y(re(u.movement_date)),1)]),"item.product_name":n(({item:u})=>[s("div",ta,[t(le,{class:"mr-3",color:"blue",size:"36"},{default:n(()=>[t(I,{color:"white",size:"18"},{default:n(()=>a[36]||(a[36]=[V("mdi-cube")])),_:1})]),_:1}),s("div",null,[s("div",aa,Y(u.product_name),1),s("div",la,Y(u.unit),1)])])]),"item.outlet_name":n(({item:u})=>[s("div",na,[t(le,{class:"mr-2",color:me(u.outlet_type),size:"32"},{default:n(()=>[t(I,{color:"white",size:"16"},{default:n(()=>[V(Y(fe(u.outlet_type)),1)]),_:2},1024)]),_:2},1032,["color"]),s("div",null,[s("div",ra,Y(u.outlet_name),1),s("div",oa,Y(u.outlet_type),1)])])]),"item.quality_flow":n(({item:u})=>[s("div",ia,[t(se,{color:ce(u.from_quality),size:"small",variant:"flat"},{default:n(()=>[V(Y(u.from_quality),1)]),_:2},1032,["color"]),t(I,{class:"mx-2",color:"grey",size:"16"},{default:n(()=>a[37]||(a[37]=[V("mdi-arrow-right")])),_:1}),t(se,{color:ce(u.to_quality),size:"small",variant:"flat"},{default:n(()=>[V(Y(u.to_quality),1)]),_:2},1032,["color"])])]),"item.quantity":n(({item:u})=>[t(se,{color:xe(u.quantity),size:"small",variant:"flat"},{default:n(()=>[V(Y(W(u.quantity)),1)]),_:2},1032,["color"])]),"item.is_replacement":n(({item:u})=>[t(se,{color:u.is_replacement?"red":"green",size:"small",variant:"flat"},{default:n(()=>[t(I,{icon:u.is_replacement?"mdi-alert":"mdi-check",start:""},null,8,["icon"]),V(" "+Y(u.is_replacement?"Yes":"No"),1)]),_:2},1032,["color"])]),"item.adjustment_value":n(({item:u})=>[s("div",sa,Y(K(u.adjustment_value)),1)]),"item.replacement_note":n(({item:u})=>[u.replacement_note?(ve(),Ie("span",da,Y(u.replacement_note),1)):(ve(),Ie("span",ua,"-"))]),bottom:n(()=>[t(Tt,{class:"px-4 py-3 bg-grey-lighten-3"},{default:n(()=>[s("div",ca," Showing "+Y(g())+" of "+Y(W(x.totalRecords))+" adjustments ",1),t(Le),t(ge,{modelValue:x.limit,"onUpdate:modelValue":[a[6]||(a[6]=u=>x.limit=u),S],density:"compact",items:[10,20,50,100],label:"Items per page",style:{"max-width":"150px"},variant:"outlined"},null,8,["modelValue"]),t(It,{modelValue:x.currentPage,"onUpdate:modelValue":[a[7]||(a[7]=u=>x.currentPage=u),S],color:"warning",length:x.totalPages,"total-visible":"7"},null,8,["modelValue","length"])]),_:1})]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1})]),_:1}))}};export{Va as default};
