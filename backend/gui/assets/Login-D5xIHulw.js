import{_ as U,D as B,x as u,h as i,v as l,r as p,$ as N,a0 as E,s as F,t as h,V as O,b6 as A,q as J,Z as L,A as S,B as f,a4 as M,C,G as b}from"./index-H50W8i2e.js";import{u as T,r as I}from"./index-BQY3GocF.js";import{V as $,a as _,b as j,c as q}from"./VCard-C5kPO-IU.js";import{V as D}from"./VDialog-CbIFtiIj.js";import{V as z}from"./VAlert-BPfj7QNO.js";import{V as G}from"./VForm-DkaCVQlE.js";import{V as y}from"./VTextField-DlorsO1F.js";import"./dialog-transition-CzUKY-Zy.js";var V={exports:{}},x;function K(){return x||(x=1,function(m,e){(function(){var r={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax",partitioned:""},a={install:function(s,t){t&&this.config(t.expires,t.path,t.domain,t.secure,t.sameSite,t.partitioned);const o=s.config&&s.config.globalProperties;o&&(s.config.globalProperties.$cookies=this,s.provide&&s.provide("$cookies",this)),(!o||s.prototype)&&(s.prototype.$cookies=this),s.$cookies=this},config:function(s,t,o,g,d,v){r.expires=s||"1d",r.path=t?"; path="+t:"; path=/",r.domain=o?"; domain="+o:"",r.secure=g?"; Secure":"",r.sameSite=d?"; SameSite="+d:"; SameSite=Lax",r.partitioned=v?"; Partitioned":""},get:function(s){var t=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(s).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(t&&(t.substring(0,1)==="{"&&t.substring(t.length-1,t.length)==="}"||t.substring(0,1)==="["&&t.substring(t.length-1,t.length)==="]"))try{t=JSON.parse(t)}catch{return t}return t},set:function(s,t,o,g,d,v,w,k){if(s){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(s))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+s)}else throw new Error("Cookie name is not found in the first argument.");t&&typeof t=="object"&&(t=JSON.stringify(t));var n="";if(o=o===void 0?r.expires:o,o&&o!==0)switch(o.constructor){case Number:o===1/0||o===-1?n="; expires=Fri, 31 Dec 9999 23:59:59 GMT":n="; max-age="+o;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(o)){var c=o.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(o.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":n="; max-age="+ +c*2592e3;break;case"d":n="; max-age="+ +c*86400;break;case"h":n="; max-age="+ +c*3600;break;case"min":n="; max-age="+ +c*60;break;case"s":n="; max-age="+c;break;case"y":n="; max-age="+ +c*31104e3;break}}else n="; expires="+o;break;case Date:n="; expires="+o.toUTCString();break}return document.cookie=encodeURIComponent(s)+"="+encodeURIComponent(t)+n+(d?"; domain="+d:r.domain)+(g?"; path="+g:r.path)+(v===void 0?r.secure:v?"; Secure":"")+(w===void 0?r.sameSite:w?"; SameSite="+w:"")+(k===void 0?r.partitioned:k?"; Partitioned":""),this},remove:function(s,t,o){return!s||!this.isKey(s)?!1:(document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:r.domain)+(t?"; path="+t:r.path)+"; SameSite=Lax",!0)},isKey:function(s){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(s).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var s=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<s.length;t++)s[t]=decodeURIComponent(s[t]);return s}};m.exports=a,typeof window<"u"&&(window.$cookies=a)})()}(V)),V.exports}K();var R={};const H={setup(){const m=E(),e=F(),r=p(!1),a=p(!1),s=p(!1),t=p(!1),o=p(!1),g=p(R.VUE_APP_VERSION||"1.0.0"),d=N({username:"",password:""}),w=T({username:{required:I},password:{required:I}},d);function k(){s.value=!0,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.username,password:d.password})}).then(n=>n.json()).then(n=>{var c;if(!n.token){r.value=!0;return}m.state.auth.token=n.token,m.state.auth.username=d.username,m.state.auth.name=n.name,m.state.auth.role=((c=n.roles)==null?void 0:c.map(P=>P.display).join(", "))||"",m.state.auth.tasks=n.tasks||[],m.state.auth.outlets=n.outlets||[],localStorage.setItem("token",n.token),localStorage.setItem("username",d.username),localStorage.setItem("name",n.name),localStorage.setItem("role",n.role),localStorage.setItem("tasks",JSON.stringify(n.tasks)),localStorage.setItem("outlets",JSON.stringify(n.outlets)),m.state.denyAccess=!1,e.push("/Home")}).catch(n=>{console.error(n),r.value=!0}).finally(()=>{s.value=!1})}return{password_show:a,authStatus:r,loading:s,rememberMe:t,showForgotPassword:o,appVersion:g,state:d,authenticate:k,v$:w}}},W={class:"nature-login-container"},Z={class:"nature-visual-side"},Q={class:"nature-illustration"},X={class:"nature-form-side"},Y={class:"nature-form-header"},ee={class:"nature-actions"};function te(m,e,r,a,s,t){return h(),B("div",W,[e[17]||(e[17]=u("div",{class:"nature-bg-overlay"},null,-1)),e[18]||(e[18]=u("div",{class:"nature-bg-pattern"},null,-1)),i($,{class:"nature-login-card",elevation:"12"},{default:l(()=>[u("div",Z,[u("div",Q,[i(O,{class:"nature-illustration-img",contain:"",src:A})])]),u("div",X,[u("div",Y,[i(S,{color:"success",size:"40"},{default:l(()=>e[6]||(e[6]=[f("mdi-bread-slice")])),_:1}),e[7]||(e[7]=u("h2",null,"Welcome to Bakery Management System",-1)),e[8]||(e[8]=u("p",null,"Sign in to your account",-1))]),a.authStatus?(h(),J(z,{key:0,class:"nature-alert",density:"compact",type:"error",variant:"tonal"},{default:l(()=>e[9]||(e[9]=[u("strong",null,"Invalid credentials",-1),f(" - Please try again ")])),_:1})):L("",!0),i(G,{class:"nature-form",onSubmit:M(a.authenticate,["prevent"])},{default:l(()=>[i(y,{modelValue:a.state.username,"onUpdate:modelValue":e[0]||(e[0]=o=>a.state.username=o),class:"nature-input",color:"success","error-messages":a.v$.username.$errors.map(o=>o.$message),label:"Username","prepend-inner-icon":"mdi-account-outline",variant:"outlined",onBlur:a.v$.username.$touch,onInput:a.v$.username.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),i(y,{modelValue:a.state.password,"onUpdate:modelValue":e[1]||(e[1]=o=>a.state.password=o),"append-inner-icon":a.password_show?"mdi-eye":"mdi-eye-off",class:"nature-input",color:"success","error-messages":a.v$.password.$errors.map(o=>o.$message),label:"Password","prepend-inner-icon":"mdi-lock-outline",type:a.password_show?"text":"password",variant:"outlined",onBlur:a.v$.password.$touch,"onClick:appendInner":e[2]||(e[2]=o=>a.password_show=!a.password_show),onInput:a.v$.password.$touch},null,8,["modelValue","append-inner-icon","error-messages","type","onBlur","onInput"]),u("div",ee,[i(C),i(b,{color:"success",size:"small",variant:"text",onClick:e[3]||(e[3]=o=>a.showForgotPassword=!0)},{default:l(()=>e[10]||(e[10]=[f(" Forgot password? ")])),_:1})]),i(b,{block:"",class:"nature-submit-btn",color:"success",disabled:a.v$.$invalid,loading:a.loading,size:"large",type:"submit"},{default:l(()=>[i(S,{left:""},{default:l(()=>e[11]||(e[11]=[f("mdi-login-variant")])),_:1}),e[12]||(e[12]=f(" Sign In "))]),_:1},8,["disabled","loading"])]),_:1},8,["onSubmit"])])]),_:1}),i(D,{modelValue:a.showForgotPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>a.showForgotPassword=o),"max-width":"500"},{default:l(()=>[i($,{class:"nature-dialog"},{default:l(()=>[i(_,{class:"nature-dialog-title"},{default:l(()=>[i(S,{class:"mr-2",color:"success"},{default:l(()=>e[13]||(e[13]=[f("mdi-key-variant")])),_:1}),e[14]||(e[14]=f(" Password Assistance "))]),_:1}),i(j,null,{default:l(()=>[e[15]||(e[15]=u("p",null," Enter your email address to receive password reset instructions. ",-1)),i(y,{class:"nature-dialog-input",label:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined"})]),_:1}),i(q,null,{default:l(()=>[i(C),i(b,{color:"success",variant:"flat",onClick:e[4]||(e[4]=o=>a.showForgotPassword=!1)},{default:l(()=>e[16]||(e[16]=[f(" Send Instructions ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ue=U(H,[["render",te],["__scopeId","data-v-7f3e35c7"]]);export{ue as default};
