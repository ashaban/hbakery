import{_ as P,E as U,y as m,i,x as d,r as g,$ as B,a0 as E,t as F,v as h,V as _,ba as N,s as D,a2 as A,B as S,C as f,a6 as L,D as C,H as b}from"./index-Bnk5GYx6.js";import{u as M,r as I}from"./index-BgPRxr-N.js";import{V as $,a as O,b as T,c as q}from"./VCard-CKmrYMwT.js";import{V as z}from"./VDialog-GawDINYk.js";import{V as J}from"./VAlert-D8keRpz3.js";import{V as R}from"./VForm-CZoIHhKk.js";import{V}from"./VTextField--7_D2srZ.js";import"./dialog-transition-BvwwzNa3.js";var y={exports:{}},x;function j(){return x||(x=1,function(c,e){(function(){var r={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax",partitioned:""},s={install:function(o,t){t&&this.config(t.expires,t.path,t.domain,t.secure,t.sameSite,t.partitioned);const a=o.config&&o.config.globalProperties;a&&(o.config.globalProperties.$cookies=this,o.provide&&o.provide("$cookies",this)),(!a||o.prototype)&&(o.prototype.$cookies=this),o.$cookies=this},config:function(o,t,a,p,u,v){r.expires=o||"1d",r.path=t?"; path="+t:"; path=/",r.domain=a?"; domain="+a:"",r.secure=p?"; Secure":"",r.sameSite=u?"; SameSite="+u:"; SameSite=Lax",r.partitioned=v?"; Partitioned":""},get:function(o){var t=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(o).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(t&&(t.substring(0,1)==="{"&&t.substring(t.length-1,t.length)==="}"||t.substring(0,1)==="["&&t.substring(t.length-1,t.length)==="]"))try{t=JSON.parse(t)}catch{return t}return t},set:function(o,t,a,p,u,v,w,k){if(o){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(o))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+o)}else throw new Error("Cookie name is not found in the first argument.");t&&typeof t=="object"&&(t=JSON.stringify(t));var l="";if(a=a===void 0?r.expires:a,a&&a!==0)switch(a.constructor){case Number:a===1/0||a===-1?l="; expires=Fri, 31 Dec 9999 23:59:59 GMT":l="; max-age="+a;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(a)){var n=a.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(a.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":l="; max-age="+ +n*2592e3;break;case"d":l="; max-age="+ +n*86400;break;case"h":l="; max-age="+ +n*3600;break;case"min":l="; max-age="+ +n*60;break;case"s":l="; max-age="+n;break;case"y":l="; max-age="+ +n*31104e3;break}}else l="; expires="+a;break;case Date:l="; expires="+a.toUTCString();break}return document.cookie=encodeURIComponent(o)+"="+encodeURIComponent(t)+l+(u?"; domain="+u:r.domain)+(p?"; path="+p:r.path)+(v===void 0?r.secure:v?"; Secure":"")+(w===void 0?r.sameSite:w?"; SameSite="+w:"")+(k===void 0?r.partitioned:k?"; Partitioned":""),this},remove:function(o,t,a){return!o||!this.isKey(o)?!1:(document.cookie=encodeURIComponent(o)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:r.domain)+(t?"; path="+t:r.path)+"; SameSite=Lax",!0)},isKey:function(o){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(o).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var o=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<o.length;t++)o[t]=decodeURIComponent(o[t]);return o}};c.exports=s,typeof window<"u"&&(window.$cookies=s)})()}(y)),y.exports}j();var G={};const K={setup(){const c=E(),e=F(),r=g(!1),s=g(!1),o=g(!1),t=g(!1),a=g(!1),p=g(G.VUE_APP_VERSION||"1.0.0"),u=B({username:"",password:""}),w=M({username:{required:I},password:{required:I}},u);function k(){o.value=!0;const l=new FormData;l.append("username",u.username),l.append("password",u.password),fetch("/login/authenticate",{method:"POST",body:l}).then(n=>n.json()).then(n=>{if(!n.token){r.value=!0;return}c.state.auth.token=n.token,c.state.auth.username=u.username,c.state.auth.name=n.name,c.state.auth.role=n.role,c.state.auth.mda=n.mda,c.state.auth.dev_partner=n.dev_partner,localStorage.setItem("token",n.token),localStorage.setItem("username",u.username),localStorage.setItem("name",n.name),localStorage.setItem("role",n.role),localStorage.setItem("mda",n.mda),localStorage.setItem("dev_partner",n.dev_partner),c.state.denyAccess=!1,e.push("/ReportsBase")}).catch(n=>{console.error(n),r.value=!0}).finally(()=>{o.value=!1})}return{password_show:s,authStatus:r,loading:o,rememberMe:t,showForgotPassword:a,appVersion:p,state:u,authenticate:k,v$:w}}},H={class:"nature-login-container"},W={class:"nature-visual-side"},Q={class:"nature-illustration"},X={class:"nature-form-side"},Y={class:"nature-form-header"},Z={class:"nature-actions"};function ee(c,e,r,s,o,t){return h(),U("div",H,[e[17]||(e[17]=m("div",{class:"nature-bg-overlay"},null,-1)),e[18]||(e[18]=m("div",{class:"nature-bg-pattern"},null,-1)),i($,{class:"nature-login-card",elevation:"12"},{default:d(()=>[m("div",W,[m("div",Q,[i(_,{class:"nature-illustration-img",contain:"",src:N})])]),m("div",X,[m("div",Y,[i(S,{color:"success",size:"40"},{default:d(()=>e[6]||(e[6]=[f("mdi-bread-slice")])),_:1}),e[7]||(e[7]=m("h2",null,"Welcome to Bakery Management System",-1)),e[8]||(e[8]=m("p",null,"Sign in to your account",-1))]),s.authStatus?(h(),D(J,{key:0,class:"nature-alert",density:"compact",type:"error",variant:"tonal"},{default:d(()=>e[9]||(e[9]=[m("strong",null,"Invalid credentials",-1),f(" - Please try again ")])),_:1})):A("",!0),i(R,{class:"nature-form",onSubmit:L(s.authenticate,["prevent"])},{default:d(()=>[i(V,{modelValue:s.state.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.state.username=a),class:"nature-input",color:"success","error-messages":s.v$.username.$errors.map(a=>a.$message),label:"Username","prepend-inner-icon":"mdi-account-outline",variant:"outlined",onBlur:s.v$.username.$touch,onInput:s.v$.username.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),i(V,{modelValue:s.state.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.state.password=a),"append-inner-icon":s.password_show?"mdi-eye":"mdi-eye-off",class:"nature-input",color:"success","error-messages":s.v$.password.$errors.map(a=>a.$message),label:"Password","prepend-inner-icon":"mdi-lock-outline",type:s.password_show?"text":"password",variant:"outlined",onBlur:s.v$.password.$touch,"onClick:appendInner":e[2]||(e[2]=a=>s.password_show=!s.password_show),onInput:s.v$.password.$touch},null,8,["modelValue","append-inner-icon","error-messages","type","onBlur","onInput"]),m("div",Z,[i(C),i(b,{color:"success",size:"small",variant:"text",onClick:e[3]||(e[3]=a=>s.showForgotPassword=!0)},{default:d(()=>e[10]||(e[10]=[f(" Forgot password? ")])),_:1})]),i(b,{block:"",class:"nature-submit-btn",color:"success",disabled:s.v$.$invalid,loading:s.loading,size:"large",type:"submit"},{default:d(()=>[i(S,{left:""},{default:d(()=>e[11]||(e[11]=[f("mdi-login-variant")])),_:1}),e[12]||(e[12]=f(" Sign In "))]),_:1},8,["disabled","loading"])]),_:1},8,["onSubmit"])])]),_:1}),i(z,{modelValue:s.showForgotPassword,"onUpdate:modelValue":e[5]||(e[5]=a=>s.showForgotPassword=a),"max-width":"500"},{default:d(()=>[i($,{class:"nature-dialog"},{default:d(()=>[i(O,{class:"nature-dialog-title"},{default:d(()=>[i(S,{class:"mr-2",color:"success"},{default:d(()=>e[13]||(e[13]=[f("mdi-key-variant")])),_:1}),e[14]||(e[14]=f(" Password Assistance "))]),_:1}),i(T,null,{default:d(()=>[e[15]||(e[15]=m("p",null,"Enter your email address to receive password reset instructions.",-1)),i(V,{class:"nature-dialog-input",label:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined"})]),_:1}),i(q,null,{default:d(()=>[i(C),i(b,{color:"success",variant:"flat",onClick:e[4]||(e[4]=a=>s.showForgotPassword=!1)},{default:d(()=>e[16]||(e[16]=[f(" Send Instructions ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const de=P(K,[["render",ee],["__scopeId","data-v-2c8598bb"]]);export{de as default};
