import{_ as qe,r as y,$ as O,d as Y,k as Oe,q as U,v as l,a0 as Le,a1 as je,t as w,h as t,x as V,N as De,G as c,B as o,A as g,Z as L,ae as Ie,aM as Be,H as u,a2 as j,C as ze,a4 as ee,ay as C,D as Z,i as te,a3 as ae,K as we,L as N,M as P,af as F}from"./index-D9cZNx3d.js";import{u as Ge,r as le,m as Ke}from"./index-C16oOmSc.js";import{V as Ze}from"./VContainer-CCsgfsl3.js";import{V as k,b as h,c as J,a as Se}from"./VCard-BjfRmh3q.js";import{V as A}from"./VCol-CkxF1Ihr.js";import{V as E}from"./VTextField-BbL5CjgL.js";import{V as se,a as _e,b as Je}from"./VDataTable-CEOIylXn.js";import{V as oe}from"./VChip-BuGryoYn.js";import{V as I}from"./VDialog-7c1Isxk_.js";import{V as re}from"./VForm-BWpc7Lay.js";import{V as ke}from"./VTextarea-CxLfI211.js";import"./dialog-transition-DrLwMtH5.js";import"./VSlideGroup-C0nbVrpN.js";const Qe={class:"d-flex justify-space-between mb-4"},We={class:"d-flex justify-end align-center mt-4"},Xe={class:"d-flex align-center flex-wrap"},Ye={class:"text-white font-weight-bold text-h6"},et={class:"mb-4"},tt={key:0,class:"text-caption text-error mt-1"},at={class:"mb-4"},lt={key:0,class:"text-caption text-error mt-1"},st={class:"text-caption text-grey"},ot={class:"mb-4"},rt={key:0,class:"text-caption text-error mt-1"},nt={key:1,class:"text-grey"},dt=10,it={__name:"Staffs",setup(ut){const b=Le(),m=y(!1),x=y(!1),$=y(!1),S=y(!1),Q=y(null),T=y(!1),R=y(!1);y(!1);const B=y(!1),H=y(1),ne=y(1),de=y([]),xe=O({total_staff:""});y([]);const ie=y([]),i=y(null),v=O({search:"",status:"",hiredDate:null}),Ce=[{title:"Name",key:"name"},{title:"Phone",key:"phone"},{title:"Position",key:"position"},{title:"Salary",key:"salary"},{title:"Last Hired Date",key:"hired_at"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],he=[{title:"Position",key:"position"},{title:"Salary",key:"salary"},{title:"Start Date",key:"start_date"},{title:"End Date",key:"end_date"},{title:"End Reason",key:"end_reason"},{title:"Notes",key:"notes"}],d=O({name:"",phone:"",position:"",salary:"",status:"Active",hired_at:new Date().toISOString().split("T")[0]}),p=O({end_date:new Date().toISOString().split("T")[0],end_reason:"Resignation",notes:""}),f=O({position:"",salary:"",rehire_date:new Date().toISOString().split("T")[0],notes:""}),Ee={name:{required:le},salary:{required:le,minValue:Ke(0)},hired_at:{required:le}},D=Ge(Ee,d),ue=Y(()=>{if(!d.hired_at)return"Hire date is required";const s=q(d.hired_at);if(!s)return"Invalid date format";const e=new Date;return e.setHours(0,0,0,0),s>e?"Hire date cannot be in the future":""}),fe=Y(()=>{if(!p.end_date)return"End date is required";const s=q(p.end_date),e=ve();if(!s)return"Invalid date format";const r=new Date;return r.setHours(0,0,0,0),s>r?"End date cannot be in the future":e&&s<e?`End date must be on or after ${M(e)}`:""}),me=Y(()=>{if(!f.rehire_date)return"Rehire date is required";const s=q(f.rehire_date),e=ce();if(!s)return"Invalid date format";const r=new Date;return r.setHours(0,0,0,0),s>r?"Rehire date cannot be in the future":e&&s<e?`Rehire date must be on or after ${M(e)}`:""}),W=s=>s?Number(s).toLocaleString("en-US",{minimumFractionDigits:0})+" TSh":"0 TSh",M=s=>{if(!s)return"";let e;if(s instanceof Date)e=s;else if(typeof s=="string"){const r=s.split("-");if(r.length===3){const[a,n,X]=r;e=new Date(X,n-1,a)}else e=new Date(s)}return e&&!isNaN(e.getTime())?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):String(s)},q=s=>{if(!s)return null;if(s instanceof Date)return s;if(typeof s=="string"){const e=s.split("-");if(e.length===3){const[a,n,X]=e,be=new Date(X,n-1,a);if(!isNaN(be.getTime()))return be}const r=new Date(s);if(!isNaN(r.getTime()))return r}return null},pe=s=>{switch(s){case"Active":return"green";case"Resigned":return"orange";case"Terminated":return"red";default:return"grey"}},$e=s=>{switch(s){case"Termination":return"red";case"Resignation":return"orange";case"Contract Expired":return"blue";case"Retirement":return"purple";default:return"grey"}},z=()=>!ue.value&&d.hired_at,G=()=>!fe.value&&p.end_date,K=()=>!me.value&&f.rehire_date,ve=()=>{if(!i.value)return null;const s=i.value.hired_at;return q(s)},ce=()=>i.value&&i.value.last_end_date?q(i.value.last_end_date):null;async function _(){m.value=!0;const s=new URLSearchParams({page:H.value,limit:dt});if(v.search&&s.append("search",v.search),v.status&&s.append("status",v.status),v.hiredDate){const r=new Date(v.hiredDate).toISOString().split("T")[0];s.append("hired_at",r)}try{const r=await(await fetch(`/staffs?${s.toString()}`)).json();de.value=r.data||[],ne.value=r.totalPages||1,xe.total_staff=r.totalRecords||0}catch(e){console.error(e),b.commit("setMessage",{type:"error",text:"Failed to load staff"})}finally{m.value=!1}}async function ye(s){m.value=!0;try{const r=await(await fetch(`/staffs/${s}/contracts`)).json();if(ie.value=r.data||[],r.data&&r.data.length>0){const a=r.data.find(n=>n.end_date)||r.data[0];a&&a.end_date&&(i.value.last_end_date=a.end_date)}}catch(e){console.error(e),b.commit("setMessage",{type:"error",text:"Failed to load staff contract history"})}finally{m.value=!1}}function Te(){H.value=1,_()}function Re(){v.search="",v.status="",v.hiredDate=null,H.value=1,_()}function Me(){S.value=!1,Object.assign(d,{name:"",phone:"",position:"",salary:"",status:"Active",hired_at:""}),x.value=!0,D.value.$reset()}function Ue(s){S.value=!0,Q.value=s.id,Object.assign(d,{...s,hired_at:s.hired_at||new Date().toISOString().split("T")[0]}),x.value=!0,D.value.$reset()}async function Ne(s){i.value=s,Object.assign(p,{end_date:new Date().toISOString().split("T")[0],end_reason:"Resignation",notes:""}),T.value=!0}async function Pe(s){i.value=s,Object.assign(f,{position:s.position||"",salary:s.salary||"",rehire_date:new Date().toISOString().split("T")[0],notes:""}),await ye(s.id),R.value=!0}async function Fe(s){i.value=s,await ye(s.id),B.value=!0}async function ge(){if(!p.end_date||!p.end_reason||!G()){b.commit("setMessage",{type:"error",text:"Please fix the validation errors"});return}m.value=!0;try{const s=new FormData;if(s.append("staff_id",i.value.id),s.append("end_date",p.end_date),s.append("end_reason",p.end_reason),s.append("notes",p.notes),s.append("status",p.end_reason==="Resignation"?"Resigned":"Terminated"),!(await fetch("/staffs/contracts/end",{method:"POST",body:s})).ok)throw new Error("Failed to end contract");T.value=!1,_(),b.commit("setMessage",{type:"success",text:`Contract ended for ${i.value.name}`})}catch(s){console.error(s),b.commit("setMessage",{type:"error",text:"Failed to end contract"})}finally{m.value=!1}}async function Ve(){if(!f.position||!f.salary||!f.rehire_date||!K()){b.commit("setMessage",{type:"error",text:"Please fix the validation errors"});return}m.value=!0;try{const s=new FormData;if(s.append("staff_id",i.value.id),s.append("position",f.position),s.append("salary",f.salary),s.append("rehire_date",f.rehire_date),s.append("notes",f.notes),!(await fetch("/staffs/contracts/rehire",{method:"POST",body:s})).ok)throw new Error("Failed to rehire staff");R.value=!1,_(),b.commit("setMessage",{type:"success",text:`${i.value.name} rehired successfully`})}catch(s){console.error(s),b.commit("setMessage",{type:"error",text:"Failed to rehire staff"})}finally{m.value=!1}}async function Ae(){if(D.value.$touch(),D.value.$invalid||!z())return;m.value=!0;const s=new FormData;s.append("name",d.name),s.append("phone",d.phone),s.append("position",d.position),s.append("salary",d.salary),s.append("status",d.status),s.append("hired_at",d.hired_at);const e=S.value?`/staffs/${Q.value}`:"/staffs",r=S.value?"PUT":"POST";try{if(!(await fetch(e,{method:r,body:s})).ok)throw new Error("Failed to save");x.value=!1,_(),b.commit("setMessage",{type:"success",text:S.value?"Staff updated!":"Staff added!"})}catch{b.commit("setMessage",{type:"error",text:"Failed to save staff"})}finally{m.value=!1}}async function He(){m.value=!0;try{await fetch(`/staffs/${Q.value}`,{method:"DELETE"}),$.value=!1,x.value=!1,_(),b.commit("setMessage",{type:"success",text:"Staff deleted!"})}catch{b.commit("setMessage",{type:"error",text:"Failed to delete staff"})}finally{m.value=!1}}return Oe(()=>_()),(s,e)=>{const r=je("VueDatePicker");return w(),U(Ze,{fluid:""},{default:l(()=>[t(k,{class:"pa-4 mb-4"},{default:l(()=>[t(De,{dense:""},{default:l(()=>[t(A,{cols:"12",sm:"4"},{default:l(()=>[t(E,{modelValue:v.search,"onUpdate:modelValue":e[0]||(e[0]=a=>v.search=a),"append-inner-icon":"mdi-close-circle",clearable:"",label:"Search Staff Name","onClick:appendInner":e[1]||(e[1]=a=>v.search="")},null,8,["modelValue"])]),_:1}),t(A,{cols:"12",sm:"3"},{default:l(()=>[t(se,{modelValue:v.status,"onUpdate:modelValue":e[2]||(e[2]=a=>v.status=a),clearable:"",items:["Active","Resigned","Terminated"],label:"Filter by Status"},null,8,["modelValue"])]),_:1}),t(A,{cols:"12",sm:"3"},{default:l(()=>[t(r,{modelValue:v.hiredDate,"onUpdate:modelValue":e[3]||(e[3]=a=>v.hiredDate=a),"auto-apply":"",class:"flex-1 border rounded-lg px-2 py-1",format:"dd-MM-yyyy","model-type":"format",placeholder:"From",teleport:!0},null,8,["modelValue"])]),_:1}),t(A,{class:"d-flex justify-end",cols:"12"},{default:l(()=>[t(c,{color:"primary",onClick:Te},{default:l(()=>[t(g,{start:""},{default:l(()=>e[33]||(e[33]=[o("mdi-filter")])),_:1}),e[34]||(e[34]=o(" Apply "))]),_:1}),t(c,{class:"ml-2",color:"grey",onClick:Re},{default:l(()=>[t(g,{start:""},{default:l(()=>e[35]||(e[35]=[o("mdi-refresh")])),_:1}),e[36]||(e[36]=o(" Reset "))]),_:1})]),_:1})]),_:1})]),_:1}),V("div",Qe,[e[39]||(e[39]=V("h3",null,"Staff Management",-1)),V("div",null,[s.$store.getters.hasTask("can_add_staffs")?(w(),U(c,{key:0,class:"text-white mr-2",color:"primary",size:"small",onClick:Me},{default:l(()=>[t(g,{start:""},{default:l(()=>e[37]||(e[37]=[o("mdi-plus")])),_:1}),e[38]||(e[38]=o(" Add Staff "))]),_:1})):L("",!0)])]),t(Ie,{active:m.value,indeterminate:m.value},null,8,["active","indeterminate"]),t(_e,{class:"elevation-1",dense:"",headers:Ce,items:de.value,loading:m.value},Be({"item.salary":l(({item:a})=>[o(u(W(a.salary)),1)]),"item.hired_at":l(({item:a})=>[o(u(M(a.hired_at)),1)]),"item.status":l(({item:a})=>[t(oe,{color:pe(a.status),label:"",size:"small"},{default:l(()=>[o(u(a.status),1)]),_:2},1032,["color"])]),_:2},[s.$store.getters.hasTask("can_edit_staffs")?{name:"item.actions",fn:l(({item:a})=>[t(g,{class:"mr-2",color:"info",title:"View Details",onClick:n=>Fe(a)},{default:l(()=>e[40]||(e[40]=[o(" mdi-eye ")])),_:2},1032,["onClick"]),a.status==="Active"?(w(),U(g,{key:0,class:"mr-2",color:"warning",title:"End Contract",onClick:n=>Ne(a)},{default:l(()=>e[41]||(e[41]=[o(" mdi-account-arrow-right ")])),_:2},1032,["onClick"])):(w(),U(g,{key:1,class:"mr-2",color:"success",title:"Rehire Staff",onClick:n=>Pe(a)},{default:l(()=>e[42]||(e[42]=[o(" mdi-account-arrow-left ")])),_:2},1032,["onClick"])),t(g,{color:"primary",onClick:n=>Ue(a)},{default:l(()=>e[43]||(e[43]=[o(" mdi-square-edit-outline ")])),_:2},1032,["onClick"])]),key:"0"}:void 0]),1032,["items","loading"]),V("div",We,[t(Je,{modelValue:H.value,"onUpdate:modelValue":[e[4]||(e[4]=a=>H.value=a),_],length:ne.value,"total-visible":"7"},null,8,["modelValue","length"])]),t(I,{modelValue:x.value,"onUpdate:modelValue":e[14]||(e[14]=a=>x.value=a),"max-width":"600",transition:"dialog-top-transition"},{default:l(()=>[t(k,{class:"rounded-xl pa-4",elevation:"10"},{default:l(()=>[t(j,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:l(()=>[V("div",Xe,[t(g,{class:"mr-2 text-white"},{default:l(()=>e[44]||(e[44]=[o("mdi-account")])),_:1}),V("span",Ye,u(S.value?"Edit Staff":"Add Staff"),1)]),t(ze),t(c,{color:"white",icon:"mdi-close",onClick:e[5]||(e[5]=a=>x.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(re,{onSubmit:e[12]||(e[12]=ee(()=>{},["prevent"]))},{default:l(()=>{var a;return[t(E,{modelValue:d.name,"onUpdate:modelValue":e[6]||(e[6]=n=>d.name=n),"bg-color":"#E0E0E0","error-messages":C(D).name.$errors.map(n=>n.$message),label:"Full Name",required:"",onBlur:C(D).name.$touch},null,8,["modelValue","error-messages","onBlur"]),t(E,{modelValue:d.phone,"onUpdate:modelValue":e[7]||(e[7]=n=>d.phone=n),"bg-color":"#E0E0E0",label:"Phone Number"},null,8,["modelValue"]),t(E,{modelValue:d.position,"onUpdate:modelValue":e[8]||(e[8]=n=>d.position=n),"bg-color":"#E0E0E0",label:"Position"},null,8,["modelValue"]),t(E,{modelValue:d.salary,"onUpdate:modelValue":e[9]||(e[9]=n=>d.salary=n),"bg-color":"#E0E0E0","error-messages":C(D).salary.$errors.map(n=>n.$message),label:"Salary (TSh)",required:"",type:"number",onBlur:C(D).salary.$touch},null,8,["modelValue","error-messages","onBlur"]),V("div",et,[e[45]||(e[45]=V("label",{class:"v-label text-body-2 mb-2"},"Hired Date *",-1)),t(r,{modelValue:d.hired_at,"onUpdate:modelValue":e[10]||(e[10]=n=>d.hired_at=n),"auto-apply":"",class:te({"datepicker-error":!z()}),clearable:!1,"enable-time-picker":!1,format:"dd-MM-yyyy","max-date":new Date,"model-type":"format",placeholder:"Select Hire Date",required:"",teleport:!0},null,8,["modelValue","class","max-date"]),C(D).hired_at.$error||!z()?(w(),Z("div",tt,u(((a=C(D).hired_at.$errors[0])==null?void 0:a.$message)||ue.value),1)):L("",!0)]),t(se,{modelValue:d.status,"onUpdate:modelValue":e[11]||(e[11]=n=>d.status=n),"bg-color":"#E0E0E0",items:["Active","Resigned","Terminated"],label:"Status",readonly:"true",required:""},null,8,["modelValue"])]}),_:1})]),_:1}),t(J,{class:"d-flex justify-end"},{default:l(()=>[t(c,{color:"success",disabled:C(D).$invalid||!z(),loading:m.value,onClick:Ae},{default:l(()=>[t(g,{start:""},{default:l(()=>e[46]||(e[46]=[o("mdi-content-save")])),_:1}),o(" "+u(S.value?"Save Changes":"Add Staff"),1)]),_:1},8,["disabled","loading"]),S.value?(w(),U(c,{key:0,color:"error",onClick:e[13]||(e[13]=a=>$.value=!0)},{default:l(()=>[t(g,{start:""},{default:l(()=>e[47]||(e[47]=[o("mdi-delete")])),_:1}),e[48]||(e[48]=o(" Delete "))]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:T.value,"onUpdate:modelValue":e[20]||(e[20]=a=>T.value=a),"max-width":"500"},{default:l(()=>[t(k,null,{default:l(()=>[t(j,{color:"warning"},{default:l(()=>[t(ae,null,{default:l(()=>{var a;return[o("End Contract - "+u((a=i.value)==null?void 0:a.name),1)]}),_:1}),t(c,{color:"white",icon:"mdi-close",onClick:e[15]||(e[15]=a=>T.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(re,{onSubmit:ee(ge,["prevent"])},{default:l(()=>[V("div",at,[e[49]||(e[49]=V("label",{class:"v-label text-body-2 mb-2"},"End Date *",-1)),t(r,{modelValue:p.end_date,"onUpdate:modelValue":e[16]||(e[16]=a=>p.end_date=a),"auto-apply":"",class:te({"datepicker-error":!G()}),clearable:!1,"enable-time-picker":!1,format:"dd-MM-yyyy","max-date":new Date,"min-date":ve(),"model-type":"format",placeholder:"Select End Date",required:"",teleport:!0},null,8,["modelValue","class","max-date","min-date"]),G()?L("",!0):(w(),Z("div",lt,u(fe.value),1))]),t(se,{modelValue:p.end_reason,"onUpdate:modelValue":e[17]||(e[17]=a=>p.end_reason=a),items:["Resignation","Termination","Contract Expired","Mutual Agreement","Retirement","Other"],label:"Reason for Ending Contract *",required:""},null,8,["modelValue"]),t(ke,{modelValue:p.notes,"onUpdate:modelValue":e[18]||(e[18]=a=>p.notes=a),label:"Additional Notes",placeholder:"Enter any additional details about the contract end...",rows:"3"},null,8,["modelValue"]),V("div",st,[t(g,{class:"mr-1",small:""},{default:l(()=>e[50]||(e[50]=[o("mdi-information")])),_:1}),e[51]||(e[51]=o(" This will change the staff status to the selected reason and record the contract end. The staff can be rehired later if needed. "))])]),_:1})]),_:1}),t(J,{class:"d-flex justify-end"},{default:l(()=>[t(c,{color:"grey",onClick:e[19]||(e[19]=a=>T.value=!1)},{default:l(()=>e[52]||(e[52]=[o("Cancel")])),_:1}),t(c,{color:"warning",disabled:!G()||!p.end_reason,loading:m.value,onClick:ge},{default:l(()=>[t(g,{start:""},{default:l(()=>e[53]||(e[53]=[o("mdi-account-arrow-right")])),_:1}),e[54]||(e[54]=o(" End Contract "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:R.value,"onUpdate:modelValue":e[27]||(e[27]=a=>R.value=a),"max-width":"500"},{default:l(()=>[t(k,null,{default:l(()=>[t(j,{color:"success"},{default:l(()=>[t(ae,null,{default:l(()=>{var a;return[o("Rehire Staff - "+u((a=i.value)==null?void 0:a.name),1)]}),_:1}),t(c,{color:"white",icon:"mdi-close",onClick:e[21]||(e[21]=a=>R.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(re,{onSubmit:ee(Ve,["prevent"])},{default:l(()=>[t(E,{modelValue:f.position,"onUpdate:modelValue":e[22]||(e[22]=a=>f.position=a),label:"Position *",required:""},null,8,["modelValue"]),t(E,{modelValue:f.salary,"onUpdate:modelValue":e[23]||(e[23]=a=>f.salary=a),label:"Salary (TSh) *",required:"",type:"number"},null,8,["modelValue"]),V("div",ot,[e[55]||(e[55]=V("label",{class:"v-label text-body-2 mb-2"},"Rehire Date *",-1)),t(r,{modelValue:f.rehire_date,"onUpdate:modelValue":e[24]||(e[24]=a=>f.rehire_date=a),"auto-apply":"",class:te({"datepicker-error":!K()}),clearable:!1,"enable-time-picker":!1,format:"dd-MM-yyyy","max-date":new Date,"min-date":ce(),"model-type":"format",placeholder:"Select Rehire Date",required:"",teleport:!0},null,8,["modelValue","class","max-date","min-date"]),K()?L("",!0):(w(),Z("div",rt,u(me.value),1))]),t(ke,{modelValue:f.notes,"onUpdate:modelValue":e[25]||(e[25]=a=>f.notes=a),label:"Rehire Notes",placeholder:"Enter any notes about the rehire...",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),t(J,{class:"d-flex justify-end"},{default:l(()=>[t(c,{color:"grey",onClick:e[26]||(e[26]=a=>R.value=!1)},{default:l(()=>e[56]||(e[56]=[o("Cancel")])),_:1}),t(c,{color:"success",disabled:!f.position||!f.salary||!K(),loading:m.value,onClick:Ve},{default:l(()=>[t(g,{start:""},{default:l(()=>e[57]||(e[57]=[o("mdi-account-arrow-left")])),_:1}),e[58]||(e[58]=o(" Rehire Staff "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:B.value,"onUpdate:modelValue":e[29]||(e[29]=a=>B.value=a),"max-width":"1000"},{default:l(()=>[t(k,null,{default:l(()=>[t(j,{color:"info"},{default:l(()=>[t(ae,null,{default:l(()=>{var a;return[o("Staff Details - "+u((a=i.value)==null?void 0:a.name),1)]}),_:1}),t(c,{color:"white",icon:"mdi-close",onClick:e[28]||(e[28]=a=>B.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(k,{class:"mb-6",variant:"outlined"},{default:l(()=>[t(Se,{class:"text-h6"},{default:l(()=>[t(g,{class:"mr-2"},{default:l(()=>e[59]||(e[59]=[o("mdi-account")])),_:1}),e[60]||(e[60]=o(" Personal Information "))]),_:1}),t(h,null,{default:l(()=>[t(De,null,{default:l(()=>[t(A,{cols:"6"},{default:l(()=>[t(we,null,{default:l(()=>[t(N,null,{default:l(()=>[t(P,{class:"font-weight-bold"},{default:l(()=>e[61]||(e[61]=[o("Name:")])),_:1}),t(F,null,{default:l(()=>{var a;return[o(u((a=i.value)==null?void 0:a.name),1)]}),_:1})]),_:1}),t(N,null,{default:l(()=>[t(P,{class:"font-weight-bold"},{default:l(()=>e[62]||(e[62]=[o("Phone:")])),_:1}),t(F,null,{default:l(()=>{var a;return[o(u(((a=i.value)==null?void 0:a.phone)||"Not provided"),1)]}),_:1})]),_:1}),t(N,null,{default:l(()=>[t(P,{class:"font-weight-bold"},{default:l(()=>e[63]||(e[63]=[o("Current Status:")])),_:1}),t(F,null,{default:l(()=>{var a;return[t(oe,{color:pe((a=i.value)==null?void 0:a.status),size:"small"},{default:l(()=>{var n;return[o(u((n=i.value)==null?void 0:n.status),1)]}),_:1},8,["color"])]}),_:1})]),_:1})]),_:1})]),_:1}),t(A,{cols:"6"},{default:l(()=>[t(we,null,{default:l(()=>[t(N,null,{default:l(()=>[t(P,{class:"font-weight-bold"},{default:l(()=>e[64]||(e[64]=[o("Position:")])),_:1}),t(F,null,{default:l(()=>{var a;return[o(u(((a=i.value)==null?void 0:a.position)||"Not specified"),1)]}),_:1})]),_:1}),t(N,null,{default:l(()=>[t(P,{class:"font-weight-bold"},{default:l(()=>e[65]||(e[65]=[o("Salary:")])),_:1}),t(F,null,{default:l(()=>{var a;return[o(u(W((a=i.value)==null?void 0:a.salary)),1)]}),_:1})]),_:1}),t(N,null,{default:l(()=>[t(P,{class:"font-weight-bold"},{default:l(()=>e[66]||(e[66]=[o("Last Hired Date:")])),_:1}),t(F,null,{default:l(()=>{var a;return[o(u(M((a=i.value)==null?void 0:a.hired_at)),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{variant:"outlined"},{default:l(()=>[t(Se,{class:"text-h6"},{default:l(()=>[t(g,{class:"mr-2"},{default:l(()=>e[67]||(e[67]=[o("mdi-history")])),_:1}),e[68]||(e[68]=o(" Contract History "))]),_:1}),t(h,null,{default:l(()=>[t(_e,{class:"elevation-1",headers:he,items:ie.value,loading:m.value},{"item.start_date":l(({item:a})=>[o(u(M(a.start_date)),1)]),"item.end_date":l(({item:a})=>[o(u(a.end_date?M(a.end_date):a.display_end_date),1)]),"item.salary":l(({item:a})=>[o(u(W(a.salary)),1)]),"item.end_reason":l(({item:a})=>[a.end_reason?(w(),U(oe,{key:0,color:$e(a.end_reason),size:"small"},{default:l(()=>[o(u(a.end_reason),1)]),_:2},1032,["color"])):(w(),Z("span",nt,u(a.display_status),1))]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(I,{modelValue:$.value,"onUpdate:modelValue":e[32]||(e[32]=a=>$.value=a),persistent:"",width:"400"},{default:l(()=>[t(k,null,{default:l(()=>[t(j,{color:"warning",title:"Confirm Deleting "+d.name},{default:l(()=>[t(c,{color:"white",icon:"mdi-close",onClick:e[30]||(e[30]=a=>$.value=!1)})]),_:1},8,["title"]),t(h,null,{default:l(()=>[o("Are you sure you want to delete "+u(d.name)+"?",1)]),_:1}),t(J,{class:"d-flex justify-end"},{default:l(()=>[t(c,{color:"grey",onClick:e[31]||(e[31]=a=>$.value=!1)},{default:l(()=>e[69]||(e[69]=[o("Cancel")])),_:1}),t(c,{color:"error",onClick:He},{default:l(()=>e[70]||(e[70]=[o("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},kt=qe(it,[["__scopeId","data-v-1d2fc64f"]]);export{kt as default};
