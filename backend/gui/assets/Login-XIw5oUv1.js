import{_ as U,E as B,y as u,i,x as l,r as g,a0 as E,a1 as F,t as N,v as h,V as A,b7 as L,s as M,$ as O,B as S,C as f,a5 as R,D as C,H as b}from"./index-DjOEAoKG.js";import{u as T,r as I}from"./index-Bo6p8uHi.js";import{V as $,a as _,b as j,c as D}from"./VCard-DBo8W4Of.js";import{V as J}from"./VDialog-D-5jawNd.js";import{V as q}from"./VAlert-J1YXwmpZ.js";import{V as z}from"./VForm-DhQx-1tv.js";import{V as y}from"./VTextField-D7ZdN6jE.js";import"./dialog-transition-CZeN_weD.js";var V={exports:{}},x;function G(){return x||(x=1,function(m,e){(function(){var r={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax",partitioned:""},s={install:function(a,t){t&&this.config(t.expires,t.path,t.domain,t.secure,t.sameSite,t.partitioned);const o=a.config&&a.config.globalProperties;o&&(a.config.globalProperties.$cookies=this,a.provide&&a.provide("$cookies",this)),(!o||a.prototype)&&(a.prototype.$cookies=this),a.$cookies=this},config:function(a,t,o,p,d,v){r.expires=a||"1d",r.path=t?"; path="+t:"; path=/",r.domain=o?"; domain="+o:"",r.secure=p?"; Secure":"",r.sameSite=d?"; SameSite="+d:"; SameSite=Lax",r.partitioned=v?"; Partitioned":""},get:function(a){var t=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(t&&(t.substring(0,1)==="{"&&t.substring(t.length-1,t.length)==="}"||t.substring(0,1)==="["&&t.substring(t.length-1,t.length)==="]"))try{t=JSON.parse(t)}catch{return t}return t},set:function(a,t,o,p,d,v,w,k){if(a){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(a))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+a)}else throw new Error("Cookie name is not found in the first argument.");t&&typeof t=="object"&&(t=JSON.stringify(t));var n="";if(o=o===void 0?r.expires:o,o&&o!==0)switch(o.constructor){case Number:o===1/0||o===-1?n="; expires=Fri, 31 Dec 9999 23:59:59 GMT":n="; max-age="+o;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(o)){var c=o.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(o.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":n="; max-age="+ +c*2592e3;break;case"d":n="; max-age="+ +c*86400;break;case"h":n="; max-age="+ +c*3600;break;case"min":n="; max-age="+ +c*60;break;case"s":n="; max-age="+c;break;case"y":n="; max-age="+ +c*31104e3;break}}else n="; expires="+o;break;case Date:n="; expires="+o.toUTCString();break}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(t)+n+(d?"; domain="+d:r.domain)+(p?"; path="+p:r.path)+(v===void 0?r.secure:v?"; Secure":"")+(w===void 0?r.sameSite:w?"; SameSite="+w:"")+(k===void 0?r.partitioned:k?"; Partitioned":""),this},remove:function(a,t,o){return!a||!this.isKey(a)?!1:(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:r.domain)+(t?"; path="+t:r.path)+"; SameSite=Lax",!0)},isKey:function(a){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<a.length;t++)a[t]=decodeURIComponent(a[t]);return a}};m.exports=s,typeof window<"u"&&(window.$cookies=s)})()}(V)),V.exports}G();var H={};const K={setup(){const m=F(),e=N(),r=g(!1),s=g(!1),a=g(!1),t=g(!1),o=g(!1),p=g(H.VUE_APP_VERSION||"1.0.0"),d=E({username:"",password:""}),w=T({username:{required:I},password:{required:I}},d);function k(){a.value=!0,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.username,password:d.password})}).then(n=>n.json()).then(n=>{var c;if(!n.token){r.value=!0;return}m.state.auth.token=n.token,m.state.auth.username=d.username,m.state.auth.name=n.name,m.state.auth.role=((c=n.roles)==null?void 0:c.map(P=>P.display).join(", "))||"",m.state.auth.tasks=n.tasks||[],localStorage.setItem("token",n.token),localStorage.setItem("username",d.username),localStorage.setItem("name",n.name),localStorage.setItem("role",n.role),m.state.denyAccess=!1,e.push("/Home")}).catch(n=>{console.error(n),r.value=!0}).finally(()=>{a.value=!1})}return{password_show:s,authStatus:r,loading:a,rememberMe:t,showForgotPassword:o,appVersion:p,state:d,authenticate:k,v$:w}}},W={class:"nature-login-container"},Q={class:"nature-visual-side"},X={class:"nature-illustration"},Y={class:"nature-form-side"},Z={class:"nature-form-header"},ee={class:"nature-actions"};function te(m,e,r,s,a,t){return h(),B("div",W,[e[17]||(e[17]=u("div",{class:"nature-bg-overlay"},null,-1)),e[18]||(e[18]=u("div",{class:"nature-bg-pattern"},null,-1)),i($,{class:"nature-login-card",elevation:"12"},{default:l(()=>[u("div",Q,[u("div",X,[i(A,{class:"nature-illustration-img",contain:"",src:L})])]),u("div",Y,[u("div",Z,[i(S,{color:"success",size:"40"},{default:l(()=>e[6]||(e[6]=[f("mdi-bread-slice")])),_:1}),e[7]||(e[7]=u("h2",null,"Welcome to Bakery Management System",-1)),e[8]||(e[8]=u("p",null,"Sign in to your account",-1))]),s.authStatus?(h(),M(q,{key:0,class:"nature-alert",density:"compact",type:"error",variant:"tonal"},{default:l(()=>e[9]||(e[9]=[u("strong",null,"Invalid credentials",-1),f(" - Please try again ")])),_:1})):O("",!0),i(z,{class:"nature-form",onSubmit:R(s.authenticate,["prevent"])},{default:l(()=>[i(y,{modelValue:s.state.username,"onUpdate:modelValue":e[0]||(e[0]=o=>s.state.username=o),class:"nature-input",color:"success","error-messages":s.v$.username.$errors.map(o=>o.$message),label:"Username","prepend-inner-icon":"mdi-account-outline",variant:"outlined",onBlur:s.v$.username.$touch,onInput:s.v$.username.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),i(y,{modelValue:s.state.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.state.password=o),"append-inner-icon":s.password_show?"mdi-eye":"mdi-eye-off",class:"nature-input",color:"success","error-messages":s.v$.password.$errors.map(o=>o.$message),label:"Password","prepend-inner-icon":"mdi-lock-outline",type:s.password_show?"text":"password",variant:"outlined",onBlur:s.v$.password.$touch,"onClick:appendInner":e[2]||(e[2]=o=>s.password_show=!s.password_show),onInput:s.v$.password.$touch},null,8,["modelValue","append-inner-icon","error-messages","type","onBlur","onInput"]),u("div",ee,[i(C),i(b,{color:"success",size:"small",variant:"text",onClick:e[3]||(e[3]=o=>s.showForgotPassword=!0)},{default:l(()=>e[10]||(e[10]=[f(" Forgot password? ")])),_:1})]),i(b,{block:"",class:"nature-submit-btn",color:"success",disabled:s.v$.$invalid,loading:s.loading,size:"large",type:"submit"},{default:l(()=>[i(S,{left:""},{default:l(()=>e[11]||(e[11]=[f("mdi-login-variant")])),_:1}),e[12]||(e[12]=f(" Sign In "))]),_:1},8,["disabled","loading"])]),_:1},8,["onSubmit"])])]),_:1}),i(J,{modelValue:s.showForgotPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>s.showForgotPassword=o),"max-width":"500"},{default:l(()=>[i($,{class:"nature-dialog"},{default:l(()=>[i(_,{class:"nature-dialog-title"},{default:l(()=>[i(S,{class:"mr-2",color:"success"},{default:l(()=>e[13]||(e[13]=[f("mdi-key-variant")])),_:1}),e[14]||(e[14]=f(" Password Assistance "))]),_:1}),i(j,null,{default:l(()=>[e[15]||(e[15]=u("p",null," Enter your email address to receive password reset instructions. ",-1)),i(y,{class:"nature-dialog-input",label:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined"})]),_:1}),i(D,null,{default:l(()=>[i(C),i(b,{color:"success",variant:"flat",onClick:e[4]||(e[4]=o=>s.showForgotPassword=!1)},{default:l(()=>e[16]||(e[16]=[f(" Send Instructions ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ue=U(K,[["render",te],["__scopeId","data-v-181268f7"]]);export{ue as default};
