import{_ as P,E as U,y as m,i,x as d,r as g,a0 as B,a1 as E,t as F,v as h,V as _,bf as N,s as D,$ as A,B as S,C as f,a5 as L,D as C,H as b}from"./index-hRTnDxYa.js";import{u as M,r as I}from"./index-DbPMBwVU.js";import{V as $,a as O,b as T,c as q}from"./VCard-B6ed0Y7W.js";import{V as z}from"./VDialog-DYnows3y.js";import{V as J}from"./VAlert-CorEw9HQ.js";import{V as j}from"./VForm-C4r1Uo1a.js";import{V}from"./VTextField-CLgfAQjx.js";import"./dialog-transition-_2eqseLT.js";var y={exports:{}},x;function G(){return x||(x=1,function(c,e){(function(){var r={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax",partitioned:""},s={install:function(a,t){t&&this.config(t.expires,t.path,t.domain,t.secure,t.sameSite,t.partitioned);const o=a.config&&a.config.globalProperties;o&&(a.config.globalProperties.$cookies=this,a.provide&&a.provide("$cookies",this)),(!o||a.prototype)&&(a.prototype.$cookies=this),a.$cookies=this},config:function(a,t,o,p,u,v){r.expires=a||"1d",r.path=t?"; path="+t:"; path=/",r.domain=o?"; domain="+o:"",r.secure=p?"; Secure":"",r.sameSite=u?"; SameSite="+u:"; SameSite=Lax",r.partitioned=v?"; Partitioned":""},get:function(a){var t=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(t&&(t.substring(0,1)==="{"&&t.substring(t.length-1,t.length)==="}"||t.substring(0,1)==="["&&t.substring(t.length-1,t.length)==="]"))try{t=JSON.parse(t)}catch{return t}return t},set:function(a,t,o,p,u,v,w,k){if(a){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(a))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+a)}else throw new Error("Cookie name is not found in the first argument.");t&&typeof t=="object"&&(t=JSON.stringify(t));var l="";if(o=o===void 0?r.expires:o,o&&o!==0)switch(o.constructor){case Number:o===1/0||o===-1?l="; expires=Fri, 31 Dec 9999 23:59:59 GMT":l="; max-age="+o;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(o)){var n=o.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(o.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":l="; max-age="+ +n*2592e3;break;case"d":l="; max-age="+ +n*86400;break;case"h":l="; max-age="+ +n*3600;break;case"min":l="; max-age="+ +n*60;break;case"s":l="; max-age="+n;break;case"y":l="; max-age="+ +n*31104e3;break}}else l="; expires="+o;break;case Date:l="; expires="+o.toUTCString();break}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(t)+l+(u?"; domain="+u:r.domain)+(p?"; path="+p:r.path)+(v===void 0?r.secure:v?"; Secure":"")+(w===void 0?r.sameSite:w?"; SameSite="+w:"")+(k===void 0?r.partitioned:k?"; Partitioned":""),this},remove:function(a,t,o){return!a||!this.isKey(a)?!1:(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:r.domain)+(t?"; path="+t:r.path)+"; SameSite=Lax",!0)},isKey:function(a){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<a.length;t++)a[t]=decodeURIComponent(a[t]);return a}};c.exports=s,typeof window<"u"&&(window.$cookies=s)})()}(y)),y.exports}G();var H={};const K={setup(){const c=E(),e=F(),r=g(!1),s=g(!1),a=g(!1),t=g(!1),o=g(!1),p=g(H.VUE_APP_VERSION||"1.0.0"),u=B({username:"",password:""}),w=M({username:{required:I},password:{required:I}},u);function k(){a.value=!0;const l=new FormData;l.append("username",u.username),l.append("password",u.password),fetch("/login/authenticate",{method:"POST",body:l}).then(n=>n.json()).then(n=>{if(!n.token){r.value=!0;return}c.state.auth.token=n.token,c.state.auth.username=u.username,c.state.auth.name=n.name,c.state.auth.role=n.role,c.state.auth.mda=n.mda,c.state.auth.dev_partner=n.dev_partner,localStorage.setItem("token",n.token),localStorage.setItem("username",u.username),localStorage.setItem("name",n.name),localStorage.setItem("role",n.role),localStorage.setItem("mda",n.mda),localStorage.setItem("dev_partner",n.dev_partner),c.state.denyAccess=!1,e.push("/Home")}).catch(n=>{console.error(n),r.value=!0}).finally(()=>{a.value=!1})}return{password_show:s,authStatus:r,loading:a,rememberMe:t,showForgotPassword:o,appVersion:p,state:u,authenticate:k,v$:w}}},R={class:"nature-login-container"},W={class:"nature-visual-side"},Q={class:"nature-illustration"},X={class:"nature-form-side"},Y={class:"nature-form-header"},Z={class:"nature-actions"};function ee(c,e,r,s,a,t){return h(),U("div",R,[e[17]||(e[17]=m("div",{class:"nature-bg-overlay"},null,-1)),e[18]||(e[18]=m("div",{class:"nature-bg-pattern"},null,-1)),i($,{class:"nature-login-card",elevation:"12"},{default:d(()=>[m("div",W,[m("div",Q,[i(_,{class:"nature-illustration-img",contain:"",src:N})])]),m("div",X,[m("div",Y,[i(S,{color:"success",size:"40"},{default:d(()=>e[6]||(e[6]=[f("mdi-bread-slice")])),_:1}),e[7]||(e[7]=m("h2",null,"Welcome to Bakery Management System",-1)),e[8]||(e[8]=m("p",null,"Sign in to your account",-1))]),s.authStatus?(h(),D(J,{key:0,class:"nature-alert",density:"compact",type:"error",variant:"tonal"},{default:d(()=>e[9]||(e[9]=[m("strong",null,"Invalid credentials",-1),f(" - Please try again ")])),_:1})):A("",!0),i(j,{class:"nature-form",onSubmit:L(s.authenticate,["prevent"])},{default:d(()=>[i(V,{modelValue:s.state.username,"onUpdate:modelValue":e[0]||(e[0]=o=>s.state.username=o),class:"nature-input",color:"success","error-messages":s.v$.username.$errors.map(o=>o.$message),label:"Username","prepend-inner-icon":"mdi-account-outline",variant:"outlined",onBlur:s.v$.username.$touch,onInput:s.v$.username.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),i(V,{modelValue:s.state.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.state.password=o),"append-inner-icon":s.password_show?"mdi-eye":"mdi-eye-off",class:"nature-input",color:"success","error-messages":s.v$.password.$errors.map(o=>o.$message),label:"Password","prepend-inner-icon":"mdi-lock-outline",type:s.password_show?"text":"password",variant:"outlined",onBlur:s.v$.password.$touch,"onClick:appendInner":e[2]||(e[2]=o=>s.password_show=!s.password_show),onInput:s.v$.password.$touch},null,8,["modelValue","append-inner-icon","error-messages","type","onBlur","onInput"]),m("div",Z,[i(C),i(b,{color:"success",size:"small",variant:"text",onClick:e[3]||(e[3]=o=>s.showForgotPassword=!0)},{default:d(()=>e[10]||(e[10]=[f(" Forgot password? ")])),_:1})]),i(b,{block:"",class:"nature-submit-btn",color:"success",disabled:s.v$.$invalid,loading:s.loading,size:"large",type:"submit"},{default:d(()=>[i(S,{left:""},{default:d(()=>e[11]||(e[11]=[f("mdi-login-variant")])),_:1}),e[12]||(e[12]=f(" Sign In "))]),_:1},8,["disabled","loading"])]),_:1},8,["onSubmit"])])]),_:1}),i(z,{modelValue:s.showForgotPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>s.showForgotPassword=o),"max-width":"500"},{default:d(()=>[i($,{class:"nature-dialog"},{default:d(()=>[i(O,{class:"nature-dialog-title"},{default:d(()=>[i(S,{class:"mr-2",color:"success"},{default:d(()=>e[13]||(e[13]=[f("mdi-key-variant")])),_:1}),e[14]||(e[14]=f(" Password Assistance "))]),_:1}),i(T,null,{default:d(()=>[e[15]||(e[15]=m("p",null," Enter your email address to receive password reset instructions. ",-1)),i(V,{class:"nature-dialog-input",label:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined"})]),_:1}),i(q,null,{default:d(()=>[i(C),i(b,{color:"success",variant:"flat",onClick:e[4]||(e[4]=o=>s.showForgotPassword=!1)},{default:d(()=>e[16]||(e[16]=[f(" Send Instructions ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const de=P(K,[["render",ee],["__scopeId","data-v-d9b21553"]]);export{de as default};
