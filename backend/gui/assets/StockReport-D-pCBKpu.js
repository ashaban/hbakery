import{a0 as qt,r as v,$ as lt,d as ot,c as Dt,k as Pt,l as Ot,q as it,t as T,v as t,h as a,Z as L,N as z,x as i,z as _,A as g,B as n,G as H,H as d,K as St,L as F,M as E,af as I,O as nt,ae as Ct,C as Tt,a5 as Rt,D as J,n as W,am as jt}from"./index-CvqfsKbz.js";import"./index-CkS2svNU.js";import{V as b,b as x,a as R,c as At}from"./VCard-BH6mYS9X.js";import{V as p}from"./VCol-_bfXGXKh.js";import{V as rt}from"./VAutocomplete-CcnWSf-M.js";import{V as st,b as Lt}from"./VDataTable-CTPdSVK4.js";import{V as dt}from"./VTextField-Ccwdki6l.js";import{V as w}from"./VChip-DD800yi0.js";import{V as zt}from"./VDataTableServer-BUJDW5n9.js";import{V as Ft}from"./VTooltip-Bun6twrO.js";import{V as Et}from"./VContainer-BBk2FiR3.js";import{h as Y}from"./install-_nF_yPR_.js";import"./dialog-transition-4lhr0DM9.js";import"./VSlideGroup-BbGWgYtj.js";const It={class:"d-flex align-center"},Ut={class:"d-flex align-center"},Gt={class:"text-h5 font-weight-bold"},$t={class:"d-flex align-center"},Bt={class:"text-h5 font-weight-bold"},Mt={class:"d-flex align-center"},Nt={class:"text-h5 font-weight-bold"},Qt={class:"d-flex align-center"},Ht={class:"text-h5 font-weight-bold"},Jt={class:"d-flex align-center"},Wt={class:"font-weight-medium"},Yt={class:"text-caption text-grey"},Kt={class:"d-flex align-center"},Zt={class:"font-weight-medium"},Xt={class:"text-caption text-grey"},te={class:"quality-breakdown-bar"},ee=["title"],ae=["title"],le=["title"],oe={class:"text-caption text-center mt-1"},ie={class:"d-flex align-center mb-1"},ne={class:"d-flex align-center mb-1"},re={class:"d-flex align-center"},se={class:"text-right font-weight-medium"},de={class:"text-caption text-grey"},ue=`
.quality-breakdown-container {
  max-width: 120px;
  margin: 0 auto;
}

.quality-breakdown-bar {
  height: 20px;
  background: #f0f0f0;
  border-radius: 10px;
  overflow: hidden;
  display: flex;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
}

.quality-segment {
  height: 100%;
  transition: width 0.3s ease;
  position: relative;
}

.quality-segment.good {
  background: linear-gradient(45deg, #4CAF50, #66BB6A);
}

.quality-segment.damaged {
  background: linear-gradient(45deg, #FF9800, #FFB74D);
}

.quality-segment.reject {
  background: linear-gradient(45deg, #F44336, #EF5350);
}

.quality-indicator {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  display: inline-block;
}

.quality-indicator.good {
  background: #4CAF50;
}

.quality-indicator.damaged {
  background: #FF9800;
}

.quality-indicator.reject {
  background: #F44336;
}
`,De={__name:"StockReport",setup(ce){const S=qt(),U=v(null);let P=null;const O=v(!1),G=v(!1),$=v(!1),B=v(!1),K=v([]),f=v({}),C=v({totalProducts:0,totalOutlets:0,totalOpening:0,totalIncoming:0,totalOutgoing:0,totalClosing:0,totalValue:0}),Z=v([]),X=v([]),ut=[{text:"All Qualities",value:"ALL"},{text:"Good Only",value:"GOOD"},{text:"Damaged Only",value:"DAMAGED"},{text:"Reject Only",value:"REJECT"}];let h=null,k=null;const u=lt({currentPage:1,totalPages:1,totalRecords:0,limit:20}),M=v(null),N=v(null),s=lt({product_id:"",outlet_id:"",quality:"GOOD",start_date:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),ct=[{title:"Product",key:"product_name",sortable:!1},{title:"Outlet",key:"outlet_name",sortable:!1},{title:"Quality Breakdown",key:"quality_breakdown",align:"center",sortable:!1,width:"150px"},{title:"Opening",key:"opening_balance",align:"center",sortable:!1},{title:"Incoming",key:"incoming",align:"center",sortable:!1},{title:"Outgoing",key:"outgoing",align:"center",sortable:!1},{title:"Closing",key:"closing_balance",align:"center",sortable:!1},{title:"Total Value",key:"total_value",align:"right",sortable:!1}],mt=ot(()=>{const o=new URLSearchParams;return s.product_id&&o.append("product_id",s.product_id),s.outlet_id&&o.append("outlet_id",s.outlet_id),s.quality&&o.append("quality",s.quality),s.start_date&&o.append("start_date",s.start_date),s.end_date&&o.append("end_date",s.end_date),o.append("page",u.currentPage),o.append("limit",u.limit),o}),V=ot(()=>{if(!f.value.qualityDistribution)return{good:0,damaged:0,reject:0,total:0,goodPercentage:0,damagedPercentage:0,rejectPercentage:0};const o=f.value.qualityDistribution.reduce((r,y)=>r+y.good,0),e=f.value.qualityDistribution.reduce((r,y)=>r+y.damaged,0),l=f.value.qualityDistribution.reduce((r,y)=>r+y.reject,0),m=o+e+l;return{good:o,damaged:e,reject:l,total:m,goodPercentage:m>0?(o/m*100).toFixed(1):0,damagedPercentage:m>0?(e/m*100).toFixed(1):0,rejectPercentage:m>0?(l/m*100).toFixed(1):0}});function gt(o){return{GOOD:"green",DAMAGED:"orange",REJECT:"red",ALL:"primary"}[o]||"grey"}function ft(o){return{GOOD:"Good",DAMAGED:"Damaged",REJECT:"Reject",ALL:"All Qualities"}[o]||o}function Q(o,e){const l=o.total||1,m=o[e]/l*100;return`${Math.max(m,5)}%`}function pt(o){return{MAIN:"primary",SHOP:"success",CAR:"warning"}[o]||"grey"}function yt(o){return{MAIN:"mdi-home",SHOP:"mdi-store",CAR:"mdi-truck"}[o]||"mdi-store"}function tt(o){return o>0?"green":o<0?"red":"grey"}function j(o){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(o)}function c(o){return new Intl.NumberFormat().format(o)}function vt(){const o=(u.currentPage-1)*u.limit+1,e=Math.min(u.currentPage*u.limit,u.totalRecords);return`${c(o)} - ${c(e)}`}async function q(){O.value=!0;try{const o=await fetch(`/reports/stock-balance?${mt.value}`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const e=await o.json();K.value=e.data||[],f.value=e.chartData||{},C.value=e.summary||{},e.pagination&&Object.assign(u,e.pagination),await jt(),_t()}catch(o){console.error("Error loading stock report:",o),S.commit("setMessage",{type:"error",text:"Failed to load stock report"})}finally{O.value=!1}}function bt(o){(o.page!==u.currentPage||o.itemsPerPage!==u.limit)&&(u.currentPage=o.page,u.limit=o.itemsPerPage,q())}function _t(){var o,e,l;if(h&&h.dispose(),k&&k.dispose(),P&&P.dispose(),M.value&&((o=f.value.products)==null?void 0:o.length)>0){h=Y(M.value);const m={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",type:"scroll"},series:[{name:"Closing Balance",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:f.value.products.map(r=>({name:r.name.length>20?r.name.substring(0,20)+"...":r.name,value:r.closing}))}]};h.setOption(m)}if(N.value&&((e=f.value.outlets)==null?void 0:e.length)>0){k=Y(N.value);const m={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:r=>{const y=r[0];return`${y.name}<br/>${j(y.value)}`}},xAxis:{type:"category",data:f.value.outlets.map(r=>r.name.length>15?r.name.substring(0,15)+"...":r.name),axisLabel:{rotate:45}},yAxis:{type:"value",name:"Stock Value ($)",axisLabel:{formatter:r=>j(r)}},series:[{name:"Stock Value",type:"bar",data:f.value.outlets.map(r=>r.value),itemStyle:{color:"#2196F3"}}]};k.setOption(m)}if(U.value&&((l=f.value.qualityDistribution)==null?void 0:l.length)>0){P=Y(U.value);const m={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter(r){let y=`<div class="font-weight-bold">${r[0].name}</div>`,at=0;return r.forEach(A=>{y+=`<div style="display: flex; justify-content: space-between; align-items: center; margin: 5px 0;">
              <span style="display: inline-block; width: 12px; height: 12px; background: ${A.color}; border-radius: 2px; margin-right: 8px;"></span>
              <span style="flex: 1;">${A.seriesName}:</span>
              <span style="font-weight: bold; margin-left: 10px;">${c(A.value)}</span>
            </div>`,at+=A.value}),y+=`<hr style="margin: 8px 0;">
            <div style="display: flex; justify-content: space-between; font-weight: bold;">
              <span>Total:</span>
              <span>${c(at)}</span>
            </div>`,y}},legend:{data:["Good","Damaged","Reject"],top:10},grid:{left:"3%",right:"4%",bottom:"3%",top:"15%",containLabel:!0},xAxis:{type:"value",name:"Quantity",axisLabel:{formatter(r){return c(r)}}},yAxis:{type:"category",data:f.value.qualityDistribution.map(r=>r.product.length>20?r.product.substring(0,20)+"...":r.product),axisLabel:{interval:0,rotate:0}},series:[{name:"Good",type:"bar",stack:"total",emphasis:{focus:"series"},data:f.value.qualityDistribution.map(r=>r.good),itemStyle:{color:"#4CAF50"}},{name:"Damaged",type:"bar",stack:"total",emphasis:{focus:"series"},data:f.value.qualityDistribution.map(r=>r.damaged),itemStyle:{color:"#FF9800"}},{name:"Reject",type:"bar",stack:"total",emphasis:{focus:"series"},data:f.value.qualityDistribution.map(r=>r.reject),itemStyle:{color:"#F44336"}}]};P.setOption(m)}}async function xt(){G.value=!0;try{const o=new URLSearchParams;s.start_date&&o.append("start_date",s.start_date),s.end_date&&o.append("end_date",s.end_date);const l=await(await fetch(`/reports/stock-balance/export?${o}`)).blob(),m=window.URL.createObjectURL(l),r=document.createElement("a");r.href=m,r.download=`stock-balance-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(m),document.body.removeChild(r),S.commit("setMessage",{type:"success",text:"Report exported successfully!"})}catch(o){console.error("Export error:",o),S.commit("setMessage",{type:"error",text:"Failed to export report"})}finally{G.value=!1}}function wt(){s.product_id="",s.outlet_id="",s.start_date=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],s.end_date=new Date().toISOString().split("T")[0],u.currentPage=1,q()}async function ht(){B.value=!0;try{const o=new URLSearchParams({limit:1e3,active:"true"});S.state.auth.outlets.length?S.state.auth.outlets.forEach(m=>o.append("id[]",m.outlet_id)):o.append("id[]",-1);const l=await(await fetch(`/outlets?${o}`)).json();Z.value=l.data||[]}catch(o){console.error("Error loading outlets:",o)}finally{B.value=!1}}async function kt(){$.value=!0;try{const e=await(await fetch("/products?limit=1000&active=true")).json();X.value=e.data||[]}catch(o){console.error("Error loading products:",o)}finally{$.value=!1}}async function Vt(){await Promise.all([ht(),kt()]),await q()}let D=null;Dt(()=>({...s}),()=>{u.currentPage=1,D&&clearTimeout(D),D=setTimeout(()=>{q()},500)},{deep:!0}),Pt(()=>{Vt(),h&&h.dispose(),k&&k.dispose(),P&&P.dispose(),D&&clearTimeout(D)}),Ot(()=>{h&&h.dispose(),k&&k.dispose(),D&&clearTimeout(D)});const et=document.createElement("style");return et.textContent=ue,document.head.appendChild(et),(o,e)=>(T(),it(Et,{class:"bg-grey-lighten-4 pa-6",fluid:""},{default:t(()=>[a(b,{class:"mb-6",elevation:"2"},{default:t(()=>[a(x,{class:"pa-6"},{default:t(()=>[a(z,{align:"center"},{default:t(()=>[a(p,{cols:"12",md:"6"},{default:t(()=>[i("div",It,[a(_,{class:"mr-4",color:"primary",size:"56"},{default:t(()=>[a(g,{color:"white",size:"32"},{default:t(()=>e[9]||(e[9]=[n("mdi-chart-box")])),_:1})]),_:1}),e[10]||(e[10]=i("div",null,[i("h1",{class:"text-h4 font-weight-bold text-primary"}," Stock Balance Report "),i("p",{class:"text-body-1 text-grey mt-1"}," Aggregated inventory balances and movements with quality tracking ")],-1))])]),_:1}),a(p,{class:"text-right",cols:"12",md:"6"},{default:t(()=>[a(H,{color:"primary",loading:G.value,size:"large",onClick:xt},{default:t(()=>[a(g,{start:""},{default:t(()=>e[11]||(e[11]=[n("mdi-file-excel")])),_:1}),e[12]||(e[12]=n(" Export Excel "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),a(b,{class:"mb-6",elevation:"1"},{default:t(()=>[a(x,{class:"pa-4"},{default:t(()=>[a(z,{align:"center",dense:""},{default:t(()=>[a(p,{cols:"12",sm:"2"},{default:t(()=>[a(rt,{modelValue:s.product_id,"onUpdate:modelValue":e[0]||(e[0]=l=>s.product_id=l),clearable:"",density:"comfortable","item-title":"name","item-value":"id",items:X.value,label:"Product",loading:$.value,variant:"outlined"},null,8,["modelValue","items","loading"])]),_:1}),a(p,{cols:"12",sm:"2"},{default:t(()=>[a(rt,{modelValue:s.outlet_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s.outlet_id=l),clearable:"",density:"comfortable","item-title":"name","item-value":"id",items:Z.value,label:"Outlet",loading:B.value,variant:"outlined"},null,8,["modelValue","items","loading"])]),_:1}),a(p,{cols:"12",sm:"2"},{default:t(()=>[a(st,{modelValue:s.quality,"onUpdate:modelValue":e[2]||(e[2]=l=>s.quality=l),clearable:"",density:"comfortable","item-title":"text","item-value":"value",items:ut,label:"Quality",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12",sm:"2"},{default:t(()=>[a(dt,{modelValue:s.start_date,"onUpdate:modelValue":e[3]||(e[3]=l=>s.start_date=l),density:"comfortable",label:"Start Date",max:s.end_date,type:"date",variant:"outlined"},null,8,["modelValue","max"])]),_:1}),a(p,{cols:"12",sm:"2"},{default:t(()=>[a(dt,{modelValue:s.end_date,"onUpdate:modelValue":e[4]||(e[4]=l=>s.end_date=l),density:"comfortable",label:"End Date",min:s.start_date,type:"date",variant:"outlined"},null,8,["modelValue","min"])]),_:1}),a(p,{class:"d-flex justify-end"},{default:t(()=>[a(H,{class:"mr-2",color:"primary",loading:O.value,variant:"flat",onClick:q},{default:t(()=>[a(g,{start:""},{default:t(()=>e[13]||(e[13]=[n("mdi-magnify")])),_:1}),e[14]||(e[14]=n(" Generate "))]),_:1},8,["loading"]),a(H,{color:"grey",variant:"outlined",onClick:wt},{default:t(()=>[a(g,{start:""},{default:t(()=>e[15]||(e[15]=[n("mdi-refresh")])),_:1}),e[16]||(e[16]=n(" Reset "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(z,{class:"mb-6",dense:""},{default:t(()=>[a(p,{cols:"12",md:"3",sm:"6"},{default:t(()=>[a(b,{color:"blue-lighten-5",elevation:"1"},{default:t(()=>[a(x,{class:"pa-4"},{default:t(()=>[i("div",Ut,[a(_,{class:"mr-3",color:"blue",size:"48"},{default:t(()=>[a(g,{color:"white"},{default:t(()=>e[17]||(e[17]=[n("mdi-package-variant")])),_:1})]),_:1}),i("div",null,[e[18]||(e[18]=i("div",{class:"text-caption text-grey"},"TOTAL PRODUCTS",-1)),i("div",Gt,d(C.value.totalProducts),1)])])]),_:1})]),_:1})]),_:1}),a(p,{cols:"12",md:"3",sm:"6"},{default:t(()=>[a(b,{color:"green-lighten-5",elevation:"1"},{default:t(()=>[a(x,{class:"pa-4"},{default:t(()=>[i("div",$t,[a(_,{class:"mr-3",color:"green",size:"48"},{default:t(()=>[a(g,{color:"white"},{default:t(()=>e[19]||(e[19]=[n("mdi-trending-up")])),_:1})]),_:1}),i("div",null,[e[20]||(e[20]=i("div",{class:"text-caption text-grey"},"TOTAL INCOMING",-1)),i("div",Bt,d(c(C.value.totalIncoming)),1)])])]),_:1})]),_:1})]),_:1}),a(p,{cols:"12",md:"3",sm:"6"},{default:t(()=>[a(b,{color:"orange-lighten-5",elevation:"1"},{default:t(()=>[a(x,{class:"pa-4"},{default:t(()=>[i("div",Mt,[a(_,{class:"mr-3",color:"orange",size:"48"},{default:t(()=>[a(g,{color:"white"},{default:t(()=>e[21]||(e[21]=[n("mdi-trending-down")])),_:1})]),_:1}),i("div",null,[e[22]||(e[22]=i("div",{class:"text-caption text-grey"},"TOTAL OUTGOING",-1)),i("div",Nt,d(c(C.value.totalOutgoing)),1)])])]),_:1})]),_:1})]),_:1}),a(p,{cols:"12",md:"3",sm:"6"},{default:t(()=>[a(b,{color:"purple-lighten-5",elevation:"1"},{default:t(()=>[a(x,{class:"pa-4"},{default:t(()=>[i("div",Qt,[a(_,{class:"mr-3",color:"purple",size:"48"},{default:t(()=>[a(g,{color:"white"},{default:t(()=>e[23]||(e[23]=[n("mdi-currency-usd")])),_:1})]),_:1}),i("div",null,[e[24]||(e[24]=i("div",{class:"text-caption text-grey"},"TOTAL VALUE",-1)),i("div",Ht,d(j(C.value.totalValue)),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),f.value.products&&f.value.products.length>0?(T(),it(z,{key:0,class:"mb-6"},{default:t(()=>[a(p,{cols:"12",lg:"6"},{default:t(()=>[a(b,{elevation:"2"},{default:t(()=>[a(R,{class:"d-flex align-center"},{default:t(()=>[a(g,{class:"mr-2",color:"primary"},{default:t(()=>e[25]||(e[25]=[n("mdi-chart-pie")])),_:1}),e[26]||(e[26]=n(" Stock Distribution by Product "))]),_:1}),a(x,{class:"pa-4"},{default:t(()=>[i("div",{ref_key:"productChart",ref:M,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),a(p,{cols:"12",lg:"6"},{default:t(()=>[a(b,{elevation:"2"},{default:t(()=>[a(R,{class:"d-flex align-center"},{default:t(()=>[a(g,{class:"mr-2",color:"primary"},{default:t(()=>e[27]||(e[27]=[n("mdi-chart-bar")])),_:1}),e[28]||(e[28]=n(" Stock Value by Outlet "))]),_:1}),a(x,{class:"pa-4"},{default:t(()=>[i("div",{ref_key:"outletChart",ref:N,style:{height:"400px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),a(p,{cols:"12",lg:"8"},{default:t(()=>[a(b,{elevation:"2"},{default:t(()=>[a(R,{class:"d-flex align-center"},{default:t(()=>[a(g,{class:"mr-2",color:"primary"},{default:t(()=>e[29]||(e[29]=[n("mdi-stack-overflow")])),_:1}),e[30]||(e[30]=n(" Quality Distribution by Product "))]),_:1}),a(x,{class:"pa-4"},{default:t(()=>[i("div",{ref_key:"qualityChart",ref:U,style:{height:"500px",width:"100%"}},null,512)]),_:1})]),_:1})]),_:1}),a(p,{cols:"12",lg:"4"},{default:t(()=>[a(b,{elevation:"2"},{default:t(()=>[a(R,{class:"d-flex align-center"},{default:t(()=>[a(g,{class:"mr-2",color:"primary"},{default:t(()=>e[31]||(e[31]=[n("mdi-quality-high")])),_:1}),e[32]||(e[32]=n(" Quality Summary "))]),_:1}),a(x,{class:"pa-4"},{default:t(()=>[a(St,null,{default:t(()=>[a(F,null,{prepend:t(()=>[a(_,{color:"green",size:"32"},{default:t(()=>[a(g,{color:"white",size:"18"},{default:t(()=>e[33]||(e[33]=[n("mdi-check")])),_:1})]),_:1})]),append:t(()=>[a(w,{color:"green",variant:"flat"},{default:t(()=>[n(d(V.value.goodPercentage)+"% ",1)]),_:1})]),default:t(()=>[a(E,{class:"font-weight-medium"},{default:t(()=>e[34]||(e[34]=[n("Good Stock")])),_:1}),a(I,null,{default:t(()=>[n(d(c(V.value.good))+" units",1)]),_:1})]),_:1}),a(F,null,{prepend:t(()=>[a(_,{color:"orange",size:"32"},{default:t(()=>[a(g,{color:"white",size:"18"},{default:t(()=>e[35]||(e[35]=[n("mdi-alert")])),_:1})]),_:1})]),append:t(()=>[a(w,{color:"orange",variant:"flat"},{default:t(()=>[n(d(V.value.damagedPercentage)+"% ",1)]),_:1})]),default:t(()=>[a(E,{class:"font-weight-medium"},{default:t(()=>e[36]||(e[36]=[n("Damaged Stock")])),_:1}),a(I,null,{default:t(()=>[n(d(c(V.value.damaged))+" units",1)]),_:1})]),_:1}),a(F,null,{prepend:t(()=>[a(_,{color:"red",size:"32"},{default:t(()=>[a(g,{color:"white",size:"18"},{default:t(()=>e[37]||(e[37]=[n("mdi-close")])),_:1})]),_:1})]),append:t(()=>[a(w,{color:"red",variant:"flat"},{default:t(()=>[n(d(V.value.rejectPercentage)+"% ",1)]),_:1})]),default:t(()=>[a(E,{class:"font-weight-medium"},{default:t(()=>e[38]||(e[38]=[n("Reject Stock")])),_:1}),a(I,null,{default:t(()=>[n(d(c(V.value.reject))+" units",1)]),_:1})]),_:1}),a(nt,{class:"my-2"}),a(F,null,{prepend:t(()=>[a(_,{color:"blue",size:"32"},{default:t(()=>[a(g,{color:"white",size:"18"},{default:t(()=>e[39]||(e[39]=[n("mdi-package-variant")])),_:1})]),_:1})]),default:t(()=>[a(E,{class:"font-weight-medium"},{default:t(()=>e[40]||(e[40]=[n("Total Stock")])),_:1}),a(I,null,{default:t(()=>[n(d(c(V.value.total))+" units",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0),a(b,{elevation:"2"},{default:t(()=>[a(Ct,{active:O.value,color:"primary",height:"4",indeterminate:O.value},null,8,["active","indeterminate"]),a(zt,{"items-per-page":u.limit,"onUpdate:itemsPerPage":e[7]||(e[7]=l=>u.limit=l),page:u.currentPage,"onUpdate:page":e[8]||(e[8]=l=>u.currentPage=l),headers:ct,items:K.value,"items-length":u.totalRecords,loading:O.value,"loading-text":"Loading stock report...","no-data-text":"No stock data found","onUpdate:options":bt},{top:t(()=>[a(R,{class:"d-flex align-center pt-4"},{default:t(()=>[a(g,{class:"mr-2",color:"primary"},{default:t(()=>e[41]||(e[41]=[n("mdi-table")])),_:1}),e[42]||(e[42]=n(" Stock Balance Details ")),a(w,{class:"ml-3",color:"primary",size:"small",variant:"flat"},{default:t(()=>[n(d(c(u.totalRecords))+" total records ",1)]),_:1}),a(w,{class:"ml-2",color:gt(s.quality),size:"small",variant:"flat"},{default:t(()=>[n(" Quality: "+d(ft(s.quality)),1)]),_:1},8,["color"])]),_:1}),a(nt)]),"item.product_name":t(({item:l})=>[i("div",Jt,[a(_,{class:"mr-3",color:"blue",size:"36"},{default:t(()=>[a(g,{color:"white",size:"18"},{default:t(()=>e[43]||(e[43]=[n("mdi-cube")])),_:1})]),_:1}),i("div",null,[i("div",Wt,d(l.product_name),1),i("div",Yt,d(l.unit),1)])])]),"item.outlet_name":t(({item:l})=>[i("div",Kt,[a(_,{class:"mr-2",color:pt(l.outlet_type),size:"32"},{default:t(()=>[a(g,{color:"white",size:"16"},{default:t(()=>[n(d(yt(l.outlet_type)),1)]),_:2},1024)]),_:2},1032,["color"]),i("div",null,[i("div",Zt,d(l.outlet_name),1),i("div",Xt,d(l.outlet_type),1)])])]),"item.quality_breakdown":t(({item:l})=>[a(Ft,{location:"top"},{activator:t(({props:m})=>[i("div",Rt(m,{class:"quality-breakdown-container"}),[i("div",te,[l.quality_breakdown.good>0?(T(),J("div",{key:0,class:"quality-segment good",style:W({width:Q(l.quality_breakdown,"good")}),title:`Good: ${c(l.quality_breakdown.good)}`},null,12,ee)):L("",!0),l.quality_breakdown.damaged>0?(T(),J("div",{key:1,class:"quality-segment damaged",style:W({width:Q(l.quality_breakdown,"damaged")}),title:`Damaged: ${c(l.quality_breakdown.damaged)}`},null,12,ae)):L("",!0),l.quality_breakdown.reject>0?(T(),J("div",{key:2,class:"quality-segment reject",style:W({width:Q(l.quality_breakdown,"reject")}),title:`Reject: ${c(l.quality_breakdown.reject)}`},null,12,le)):L("",!0)]),i("div",oe,d(c(l.quality_breakdown.total))+" total ",1)],16)]),default:t(()=>[a(b,{class:"pa-2"},{default:t(()=>[e[47]||(e[47]=i("div",{class:"text-caption font-weight-bold mb-1"}," Quality Breakdown ",-1)),i("div",ie,[e[44]||(e[44]=i("div",{class:"quality-indicator good mr-2"},null,-1)),i("span",null,"Good: "+d(c(l.quality_breakdown.good)),1)]),i("div",ne,[e[45]||(e[45]=i("div",{class:"quality-indicator damaged mr-2"},null,-1)),i("span",null,"Damaged: "+d(c(l.quality_breakdown.damaged)),1)]),i("div",re,[e[46]||(e[46]=i("div",{class:"quality-indicator reject mr-2"},null,-1)),i("span",null,"Reject: "+d(c(l.quality_breakdown.reject)),1)])]),_:2},1024)]),_:2},1024)]),"item.opening_balance":t(({item:l})=>[a(w,{color:tt(l.opening_balance),size:"small",variant:"flat"},{default:t(()=>[n(d(c(l.opening_balance)),1)]),_:2},1032,["color"])]),"item.incoming":t(({item:l})=>[a(w,{color:"green",size:"small",variant:"flat"},{default:t(()=>[n(" +"+d(c(l.incoming)),1)]),_:2},1024)]),"item.outgoing":t(({item:l})=>[a(w,{color:"orange",size:"small",variant:"flat"},{default:t(()=>[n(" -"+d(c(l.outgoing)),1)]),_:2},1024)]),"item.closing_balance":t(({item:l})=>[a(w,{color:tt(l.closing_balance),size:"small",variant:"flat"},{default:t(()=>[n(d(c(l.closing_balance)),1)]),_:2},1032,["color"])]),"item.total_value":t(({item:l})=>[i("div",se,d(j(l.total_value)),1)]),bottom:t(()=>[a(At,{class:"px-4 py-3 bg-grey-lighten-3"},{default:t(()=>[i("div",de," Showing "+d(vt())+" of "+d(c(u.totalRecords))+" records ",1),a(Tt),a(st,{modelValue:u.limit,"onUpdate:modelValue":[e[5]||(e[5]=l=>u.limit=l),q],density:"compact",items:[10,20,50,100],label:"Items per page",style:{"max-width":"150px"},variant:"outlined"},null,8,["modelValue"]),a(Lt,{modelValue:u.currentPage,"onUpdate:modelValue":[e[6]||(e[6]=l=>u.currentPage=l),q],color:"primary",length:u.totalPages,"total-visible":"7"},null,8,["modelValue","length"])]),_:1})]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1})]),_:1}))}};export{De as default};
