import{_ as O,q as J,t as L,v as o,h as a,x as v,$ as k,A as f,B as n,C as E,G as d,a1 as j,H as G,Z as H,W,r as g,U as Z,k as K}from"./index-7L47QNVH.js";import{u as Q,r as I}from"./index-CZ-HeV5N.js";import{V as B}from"./VDialog-Cs_EBcHJ.js";import{V as C,b as U,c as R}from"./VCard-CcXLJqVt.js";import{V as F}from"./VForm-6jd5yX24.js";import{V}from"./VTextField-DK2CbxIB.js";import{a as X}from"./VDataTable-Cj5L-oTY.js";import{V as Y}from"./VContainer-C70kHoiC.js";import"./dialog-transition-Y_FcWeit.js";import"./VChip-CcN0LJRZ.js";import"./VSlideGroup-C-BVKwkJ.js";const $={setup(){const m=W(),e=g(!1),b=g([]),t=g({}),h=g([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Short Name",key:"shortname"},{title:"Edit",key:"edit"}]),y=g(!1),l=g(!1),w=g(!1),S=g(!1),u=Z({name:"",shortname:""}),c=Q({name:{required:I},shortname:{required:I}},u);function D(){e.value=!0,fetch("/units").then(s=>{s.json().then(i=>{e.value=!1,b.value=i}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function A(){c.value.name.$touch(),y.value=!0,u.name=""}function M(s){t.value=JSON.parse(JSON.stringify(s)),l.value=!0,u.name=s.name,u.shortname=s.shortname}async function N(){if(c.value.$touch(),!await c.value.$validate())return;e.value=!0,y.value=!1;const i=new FormData;i.append("name",u.name),i.append("shortname",u.shortname),fetch("/units",{body:i,method:"POST"}).then(r=>{e.value=!1,r.status!==200&&r.status!==201?r.json().then(x=>{m.commit("setMessage",{type:"error",text:"Failed to save Unit! "+x.error,timeout:2e3})}):r.json().then(()=>{D(),m.commit("setMessage",{type:"primary",text:"Unit saved successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,m.commit("setMessage",{type:"error",text:"Failed to save Unit!",timeout:2e3}),console.error("Error:",r)})}async function T(){if(c.value.$touch(),!await c.value.$validate())return;e.value=!0;const i=new FormData;i.append("name",u.name),i.append("shortname",u.shortname),fetch("/units/"+t.value.id,{body:i,method:"PUT"}).then(r=>{e.value=!1,l.value=!1,r.status!==200&&r.status!==201?r.json().then(x=>{m.commit("setMessage",{type:"error",text:"Failed to edit Unit! "+x.error,timeout:2e3})}):r.json().then(()=>{D(),m.commit("setMessage",{type:"primary",text:"Unit edited successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,m.commit("setMessage",{type:"error",text:"Failed to edit Unit!",timeout:2e3}),console.error("Error:",r)})}function q(){e.value=!0;const s=new FormData;w.value=!1,fetch("/units/"+t.value.id,{body:s,method:"DELETE"}).then(i=>{e.value=!1,l.value=!1,i.status!==200&&i.status!==201?i.json().then(r=>{m.commit("setMessage",{type:"error",text:"Failed to delete Unit! "+r.error,timeout:2e3})}):i.json().then(()=>{D(),m.commit("setMessage",{type:"primary",text:"Unit delete successfully!",timeout:2e3})})}).catch(i=>{e.value=!1,m.commit("setMessage",{type:"error",text:"Failed to delete Unit!",timeout:2e3}),console.error("Error:",i)})}function z(){fetch("/units?response=csv").then(s=>{s.text().then(i=>{const r="csv",P="data:text/csv;charset=utf-8,"+escape(i),p=document.createElement("a");p.setAttribute("href",P),p.setAttribute("download",`Unit.${r}`),p.click()})}).catch(()=>{e.value=!1})}return K(()=>{D()}),{loading:e,values:b,headers:h,addDialog:y,editDialog:l,form:S,state:u,v$:c,editingItem:t,confirmDeleteDialog:w,csvExport:z,loadValues:D,activateAddDialog:A,activateEditDialog:M,create:N,saveEdit:T,remove:q}}},_={class:"d-flex align-center flex-wrap"},ee={class:"d-flex justify-end"},te={class:"d-flex align-center flex-wrap"},ae={class:"d-flex justify-end justify-space-between"},le={class:"d-flex justify-space-between mb-6"};function oe(m,e,b,t,h,y){return L(),J(Y,{fluid:""},{default:o(()=>[a(B,{modelValue:t.addDialog,"onUpdate:modelValue":e[4]||(e[4]=l=>t.addDialog=l),transition:"dialog-top-transition",width:"600"},{default:o(()=>[a(C,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[a(k,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:o(()=>[v("div",_,[a(f,{class:"mr-2 text-white"},{default:o(()=>e[16]||(e[16]=[n("mdi-map")])),_:1}),e[17]||(e[17]=v("span",{class:"text-white font-weight-bold text-h6"},"Add Unit",-1))]),a(E),a(d,{color:"white",icon:"mdi-close",onClick:e[0]||(e[0]=l=>t.addDialog=!1)})]),_:1}),a(U,{class:"pt-6"},{default:o(()=>[a(F,{onSubmit:e[3]||(e[3]=j(()=>{},["prevent"]))},{default:o(()=>[a(V,{modelValue:t.state.name,"onUpdate:modelValue":e[1]||(e[1]=l=>t.state.name=l),"bg-color":"#BDBDBD","error-messages":t.v$.name.$errors.map(l=>l.$message),label:"Unit Name",required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(V,{modelValue:t.state.shortname,"onUpdate:modelValue":e[2]||(e[2]=l=>t.state.shortname=l),"bg-color":"#BDBDBD","error-messages":t.v$.shortname.$errors.map(l=>l.$message),label:"Short Name",required:"",onBlur:t.v$.shortname.$touch,onInput:t.v$.shortname.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),v("div",ee,[a(d,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.create},{default:o(()=>[a(f,{start:""},{default:o(()=>e[18]||(e[18]=[n("mdi-plus")])),_:1}),e[19]||(e[19]=n(" Add "))]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1},8,["modelValue"]),a(B,{modelValue:t.editDialog,"onUpdate:modelValue":e[12]||(e[12]=l=>t.editDialog=l),transition:"dialog-top-transition",width:"400"},{default:o(()=>[a(C,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[a(k,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:o(()=>[v("div",te,[a(f,{class:"mr-2 text-white"},{default:o(()=>e[20]||(e[20]=[n("mdi-map")])),_:1}),e[21]||(e[21]=v("span",{class:"text-white font-weight-bold text-h6"},"Edit Unit",-1))]),a(E),a(d,{color:"white",icon:"mdi-close",onClick:e[5]||(e[5]=l=>t.editDialog=!1)})]),_:1}),a(U,{class:"pt-6"},{default:o(()=>[a(F,{onSubmit:e[9]||(e[9]=j(()=>{},["prevent"]))},{default:o(()=>[e[22]||(e[22]=v("br",null,null,-1)),a(V,{modelValue:t.editingItem.id,"onUpdate:modelValue":e[6]||(e[6]=l=>t.editingItem.id=l),"bg-color":"#BDBDBD",label:"ID",readonly:""},null,8,["modelValue"]),a(V,{modelValue:t.state.name,"onUpdate:modelValue":e[7]||(e[7]=l=>t.state.name=l),"bg-color":"#BDBDBD",clearable:"","error-messages":t.v$.name.$errors.map(l=>l.$message),label:"Unit",readonly:t.loading,required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","readonly","onBlur","onInput"]),a(V,{modelValue:t.state.shortname,"onUpdate:modelValue":e[8]||(e[8]=l=>t.state.shortname=l),"bg-color":"#BDBDBD","error-messages":t.v$.shortname.$errors.map(l=>l.$message),label:"Short Name",required:"",onBlur:t.v$.shortname.$touch,onInput:t.v$.shortname.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),a(R,{class:"d-flex justify-end justify-space-between"},{default:o(()=>[a(d,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.saveEdit},{default:o(()=>[a(f,{start:""},{default:o(()=>e[23]||(e[23]=[n("mdi-plus")])),_:1}),e[24]||(e[24]=n(" Save "))]),_:1},8,["disabled","loading","onClick"]),a(d,{color:"black",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[10]||(e[10]=l=>t.editDialog=!1)},{default:o(()=>[a(f,{start:""},{default:o(()=>e[25]||(e[25]=[n("mdi-cancel")])),_:1}),e[26]||(e[26]=n(" Cancel "))]),_:1},8,["disabled","loading"]),a(d,{color:"error",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[11]||(e[11]=l=>t.confirmDeleteDialog=!0)},{default:o(()=>[a(f,{start:""},{default:o(()=>e[27]||(e[27]=[n("mdi-delete")])),_:1}),e[28]||(e[28]=n(" Delete "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(B,{modelValue:t.confirmDeleteDialog,"onUpdate:modelValue":e[15]||(e[15]=l=>t.confirmDeleteDialog=l),persistent:"",width:"auto"},{default:o(()=>[a(C,null,{default:o(()=>[a(k,{color:"warning",title:"Confirm Deleteting "+t.state.name},{default:o(()=>[a(d,{color:"white",icon:"mdi-close",onClick:e[13]||(e[13]=l=>t.confirmDeleteDialog=!1)})]),_:1},8,["title"]),a(U,null,{default:o(()=>[n("Are you sure you want to delete "+G(t.state.name)+"?",1)]),_:1}),v("div",ae,[a(d,{color:"success",onClick:e[14]||(e[14]=l=>t.confirmDeleteDialog=!1)},{default:o(()=>e[29]||(e[29]=[n("Cancel")])),_:1}),a(d,{color:"error",onClick:t.remove},{default:o(()=>e[30]||(e[30]=[n("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),v("div",le,[e[35]||(e[35]=n(" Unit ")),a(d,{class:"text-black justify-end",size:"small",onClick:t.csvExport},{default:o(()=>[a(f,{color:"green",start:""},{default:o(()=>e[31]||(e[31]=[n("mdi-download")])),_:1}),e[32]||(e[32]=n(" Download "))]),_:1},8,["onClick"]),a(d,{class:"text-white justify-end",color:"#1A237E",size:"small",onClick:t.activateAddDialog},{default:o(()=>[a(f,null,{default:o(()=>e[33]||(e[33]=[n("mdi-plus")])),_:1}),e[34]||(e[34]=n(" Add New"))]),_:1},8,["onClick"])]),a(H,{active:t.loading,indeterminate:t.loading},null,8,["active","indeterminate"]),a(X,{class:"elevation-1",dense:"",headers:t.headers,height:"300",items:t.values,loading:t.loading},{"item.edit":o(({item:l})=>[a(f,{color:"#3F51B5",onClick:w=>t.activateEditDialog(l)},{default:o(()=>e[36]||(e[36]=[n("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})}const Ve=O($,[["render",oe]]);export{Ve as default};
