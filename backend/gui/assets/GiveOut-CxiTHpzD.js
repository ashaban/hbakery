import{_ as Ht,r as y,$ as Ct,d as Dt,k as Qt,q as G,v as l,a0 as Bt,t as _,h as e,N as M,Z as z,x as i,z as O,A as u,B as s,G as v,ae as Yt,a5 as at,H as m,O as Et,C as R,a2 as ot,a3 as st,D as T,F as it,E as nt}from"./index-H50W8i2e.js";import{V as Jt}from"./VContainer-DMI-Talr.js";import{V as b,b as x,a as H,c as Q}from"./VCard-C5kPO-IU.js";import{V as c}from"./VCol-DKsUkiwi.js";import{V as F,a as Xt,b as Kt,g as Wt}from"./VDataTable-DzzvSt4O.js";import{V as S}from"./VTextField-DlorsO1F.js";import{V as rt}from"./VTooltip-DwwKazbP.js";import{V as C}from"./VChip-CknWNZ2i.js";import{V as dt}from"./VDialog-CbIFtiIj.js";import{V as Zt}from"./VTextarea-D4NHbpGV.js";import{V as te}from"./VAlert-BPfj7QNO.js";import{V as ee}from"./VAutocomplete-CV6x0zIW.js";import"./dialog-transition-CzUKY-Zy.js";import"./VSlideGroup-CGGaxYAb.js";const le={class:"d-flex align-center"},ae={class:"d-flex align-center"},oe={class:"font-weight-medium"},se={class:"d-flex align-center"},ie={class:"font-weight-medium"},ne={class:"text-right font-weight-bold text-orange"},re={class:"d-flex justify-end"},de={class:"d-flex align-center"},ue={class:"text-h6 font-weight-bold text-blue-darken-3"},me={key:1,class:"text-center py-8"},fe={class:"d-flex align-center mb-4"},ce={class:"text-h5 font-weight-bold"},pe={class:"d-flex align-center"},ve={class:"text-body-1 font-weight-medium"},ye={class:"d-flex align-center mb-4"},ge={class:"text-body-1 font-weight-medium"},_e={class:"d-flex align-center"},be={class:"text-body-1 font-weight-medium"},we={class:"text-left"},Ve={class:"text-center"},xe={class:"text-center"},ke={class:"text-center"},Ce={class:"text-right pa-4"},De={class:"text-h6 text-orange"},Ee={class:"text-body-1 text-grey mb-4"},Ae={class:"font-weight-bold text-error"},qe={__name:"GiveOut",setup(Oe){const w=Bt(),k=y(!1),B=y(!1),Y=y(!1),J=y([]),X=y([]),ut=y([]),K=y(1),mt=y(1),h=y(!1),U=y(!1),$=y(!1),V=y(!1),q=y(null),g=y(null),f=Ct({outlet_id:[],status:"",reason:"",start_date:"",end_date:""}),W=new Date().toISOString().split("T")[0],n=Ct({outlet_id:"",out_date:W,reason:"CHARITY",notes:"",items:[]}),P=y([]),At=[{title:"ID",key:"id"},{title:"Date",key:"out_date"},{title:"Outlet",key:"outlet_name"},{title:"Reason",key:"reason"},{title:"Items",key:"items_count",align:"center"},{title:"Qty",key:"total_qty",align:"center"},{title:"Cost Value",key:"total_cost_value",align:"end"},{title:"Status",key:"status",align:"center"},{title:"Actions",key:"actions",sortable:!1}],qt=[{title:"GOOD",value:"GOOD"},{title:"DAMAGED",value:"DAMAGED"},{title:"REJECT",value:"REJECT"}],Ot=["CHARITY","REJECT","SAMPLE","DAMAGED","EXPIRED","OTHER"],Tt=Dt(()=>0),ft=Dt(()=>n.outlet_id&&n.out_date&&n.reason&&n.items.length>0&&P.value.length===0);function Z(o){return Number(o||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ct(o){return new Date(o).toLocaleDateString()}function pt(o){return{MAIN:"mdi-home",SHOP:"mdi-store",CAR:"mdi-truck"}[o]||"mdi-store"}function tt(o){return{MAIN:"primary",SHOP:"success",CAR:"warning"}[o]||"grey"}function vt(o){return{GOOD:"success",DAMAGED:"warning",EXPIRED:"error"}[o]||"grey"}function It(o){return{POSTED:"success",CANCELLED:"error"}[o]||"grey"}function yt(o){return{CHARITY:"purple",REJECT:"red",SAMPLE:"blue",DAMAGED:"orange",EXPIRED:"brown",OTHER:"grey"}[o]||"grey"}function gt(){n.items.push({product_id:"",quality:"GOOD",quantity:"",remarks:"",stockData:null}),D()}function Gt(o){n.items.splice(o,1),D()}function et(o){return o.stockData&&o.stockData[o.quality]||0}async function zt(o){await j(o),D()}async function Rt(o){await j(o),D()}async function j(o){if(!n.outlet_id||!o.product_id){o.stockData=null;return}try{const a=await(await fetch(`/stocktransfers/availableByQuality?outlet_id=${n.outlet_id}&product_id=${o.product_id}`)).json();o.stockData=a.stock||{GOOD:0,DAMAGED:0,EXPIRED:0}}catch(t){console.error("Stock check failed:",t),o.stockData=null}}function _t(o){return!o.product_id||!o.quality||!o.quantity?!1:Number(o.quantity)>Number(et(o)||0)}function St(o){return o.product_id?`Available: ${et(o)}`:"Pick a product"}function D(){const o=[];n.outlet_id||o.push("Outlet is required."),n.out_date||o.push("Date is required."),n.reason||o.push("Reason is required.");const t=new Set;n.items.forEach((a,r)=>{const d=r+1;if(a.product_id||o.push(`Item ${d}: product is required.`),a.quality||o.push(`Item ${d}: quality is required.`),(a.quantity===""||Number(a.quantity)<=0)&&o.push(`Item ${d}: quantity is required and must be > 0.`),_t(a)&&o.push(`Item ${d}: insufficient ${a.quality} stock.`),a.product_id&&a.quality){const p=`${a.product_id}|${a.quality}`;t.has(p)&&o.push(`Duplicate product and quality detected on item ${r+1}.`),t.add(p)}}),P.value=o}async function I(){var t;k.value=!0;const o=new URLSearchParams({page:K.value,limit:10});(t=f.outlet_id)!=null&&t.length?f.outlet_id.forEach(a=>o.append("outlet_id[]",a)):w.state.auth.outlets.length&&w.state.auth.outlets.forEach(a=>o.append("outlet_id[]",a.outlet_id)),f.status&&o.append("status",f.status),f.reason&&o.append("reason",f.reason),f.start_date&&o.append("start_date",f.start_date),f.end_date&&o.append("end_date",f.end_date);try{const r=await(await fetch(`/productOut?${o}`)).json();J.value=r.data||[],mt.value=r.totalPages||1}catch{w.commit("setMessage",{type:"error",text:"Failed to load giveaways"})}finally{k.value=!1}}function ht(){f.outlet_id="",f.status="",f.reason="",f.start_date="",f.end_date="",I()}function Ut(){V.value=!1,q.value=null,bt(),h.value=!0}async function $t(o){var t;V.value=!0,q.value=o.id,k.value=!0;try{const r=await(await fetch(`/productOut/${o.id}`)).json();n.outlet_id=r.out.outlet_id,n.out_date=((t=r.out.out_date)==null?void 0:t.split("T")[0])||W,n.reason=r.out.reason,n.notes=r.out.notes||"",n.items=(r.items||[]).map(d=>({product_id:d.product_id,quality:d.quality,quantity:String(d.quantity),remarks:d.remarks||"",stockData:null}));for(const d of n.items)await j(d);D(),h.value=!0}catch{w.commit("setMessage",{type:"error",text:"Failed to load giveaway"})}finally{k.value=!1}}async function Pt(o){q.value=o.id,k.value=!0;try{const a=await(await fetch(`/productOut/${o.id}`)).json();g.value=a,U.value=!0}catch{w.commit("setMessage",{type:"error",text:"Failed to load giveaway details"})}finally{k.value=!1}}function lt(){h.value=!1,bt()}function bt(){n.outlet_id="",n.out_date=W,n.reason="CHARITY",n.notes="",n.items=[],P.value=[]}function Nt(o){q.value=o.id,$.value=!0}async function Lt(){Y.value=!0;try{if(!(await fetch(`/productOut/${q.value}`,{method:"DELETE"})).ok)throw new Error("Failed to cancel");w.commit("setMessage",{type:"success",text:"Giveaway cancelled successfully"}),$.value=!1,I()}catch{w.commit("setMessage",{type:"error",text:"Failed to cancel giveaway"})}finally{Y.value=!1}}async function Mt(){for(const o of n.items)await j(o);D()}async function Ft(){if(D(),!ft.value)return;B.value=!0;const o={outlet_id:n.outlet_id,out_date:n.out_date,reason:n.reason,notes:n.notes||null,items:n.items.map(r=>({product_id:r.product_id,quality:r.quality,quantity:Number(r.quantity),remarks:r.remarks||null}))},t=V.value?`/productOut/${q.value}`:"/productOut",a=V.value?"PUT":"POST";try{const r=await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok)throw new Error("Failed to save giveaway");const d=await r.json();w.commit("setMessage",{type:"success",text:V.value?"Giveaway updated successfully":"Giveaway created successfully"}),lt(),I()}catch{w.commit("setMessage",{type:"error",text:"Failed to save giveaway"})}finally{B.value=!1}}async function jt(){try{const o=new URLSearchParams({limit:1e3});w.state.auth.outlets.length?w.state.auth.outlets.forEach(r=>o.append("id[]",r.outlet_id)):o.append("id[]",-1);const[t,a]=await Promise.all([fetch(`/outlets?${o}`),fetch("/products?limit=1000")]);X.value=(await t.json()).data||[],ut.value=(await a.json()).data||[]}catch(o){console.error("Init data load failed:",o)}}return Qt(()=>{I(),jt()}),(o,t)=>(_(),G(Jt,{class:"bg-grey-lighten-4 pa-6",fluid:""},{default:l(()=>[e(b,{class:"mb-6",elevation:"2"},{default:l(()=>[e(x,{class:"pa-6"},{default:l(()=>[e(M,{align:"center"},{default:l(()=>[e(c,{cols:"12",md:"6"},{default:l(()=>[i("div",le,[e(O,{class:"mr-4",color:"primary",size:"56"},{default:l(()=>[e(u,{color:"white",size:"32"},{default:l(()=>t[16]||(t[16]=[s("mdi-gift-outline")])),_:1})]),_:1}),t[17]||(t[17]=i("div",null,[i("h1",{class:"text-h4 font-weight-bold text-primary"}," Product Giveaways "),i("p",{class:"text-body-1 text-grey mt-1"}," Manage charity donations and product rejects with stock tracking ")],-1))])]),_:1}),o.$store.getters.hasTask("can_release_products_for_free")?(_(),G(c,{key:0,class:"text-right",cols:"12",md:"6"},{default:l(()=>[e(v,{color:"primary",size:"large",onClick:Ut},{default:l(()=>[e(u,{start:""},{default:l(()=>t[18]||(t[18]=[s("mdi-plus")])),_:1}),t[19]||(t[19]=s(" New Giveaway "))]),_:1})]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1}),e(b,{class:"mb-6",elevation:"1"},{default:l(()=>[e(x,{class:"pa-4"},{default:l(()=>[e(M,{align:"center",dense:""},{default:l(()=>[e(c,{cols:"12",sm:"3"},{default:l(()=>[e(F,{modelValue:f.outlet_id,"onUpdate:modelValue":t[0]||(t[0]=a=>f.outlet_id=a),clearable:"",density:"comfortable","item-title":"name","item-value":"id",items:X.value,label:"Outlets",multiple:"","prepend-inner-icon":"mdi-store",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"12",sm:"2"},{default:l(()=>[e(F,{modelValue:f.status,"onUpdate:modelValue":t[1]||(t[1]=a=>f.status=a),clearable:"",density:"comfortable",items:[{title:"All",value:""},{title:"Posted",value:"POSTED"},{title:"Cancelled",value:"CANCELLED"}],label:"Status","prepend-inner-icon":"mdi-filter",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"2"},{default:l(()=>[e(S,{modelValue:f.reason,"onUpdate:modelValue":t[2]||(t[2]=a=>f.reason=a),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"Reason","prepend-inner-icon":"mdi-tag",spellcheck:"false",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"2"},{default:l(()=>[e(S,{modelValue:f.start_date,"onUpdate:modelValue":t[3]||(t[3]=a=>f.start_date=a),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"Start Date","prepend-inner-icon":"mdi-calendar",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"2"},{default:l(()=>[e(S,{modelValue:f.end_date,"onUpdate:modelValue":t[4]||(t[4]=a=>f.end_date=a),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"End Date","prepend-inner-icon":"mdi-calendar",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{class:"d-flex justify-end",cols:"12",sm:"1"},{default:l(()=>[e(v,{class:"mr-2",color:"primary",variant:"flat",onClick:I},{default:l(()=>[e(u,{start:""},{default:l(()=>t[20]||(t[20]=[s("mdi-magnify")])),_:1}),t[21]||(t[21]=s(" Search "))]),_:1}),e(v,{color:"grey",variant:"outlined",onClick:ht},{default:l(()=>[e(u,{start:""},{default:l(()=>t[22]||(t[22]=[s("mdi-refresh")])),_:1}),t[23]||(t[23]=s(" Reset "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{class:"rounded-lg",elevation:"2"},{default:l(()=>[e(Yt,{active:k.value,color:"primary",height:"4",indeterminate:k.value},null,8,["active","indeterminate"]),e(Xt,{class:"elevation-0",headers:At,items:J.value,"items-per-page":10,loading:k.value,"loading-text":"Loading giveaways...","no-data-text":"No giveaways found"},{top:l(()=>[e(H,{class:"d-flex align-center pt-4"},{default:l(()=>[e(u,{class:"mr-2",color:"primary"},{default:l(()=>t[24]||(t[24]=[s("mdi-format-list-bulleted")])),_:1}),t[25]||(t[25]=s(" Recent Giveaways ")),e(C,{class:"ml-3",color:"primary",size:"small",variant:"flat"},{default:l(()=>[s(m(J.value.length)+" total ",1)]),_:1})]),_:1}),e(Et)]),"item.out_date":l(({item:a})=>[i("div",ae,[e(u,{class:"mr-2",color:"grey",size:"16"},{default:l(()=>t[26]||(t[26]=[s("mdi-calendar")])),_:1}),i("span",oe,m(ct(a.out_date)),1)])]),"item.outlet_name":l(({item:a})=>[i("div",se,[e(O,{class:"mr-2",color:tt(a.outlet_type),size:"28"},{default:l(()=>[e(u,{color:"white",size:"14"},{default:l(()=>[s(m(pt(a.outlet_type)),1)]),_:2},1024)]),_:2},1032,["color"]),i("div",ie,m(a.outlet_name),1)])]),"item.reason":l(({item:a})=>[e(C,{color:yt(a.reason),size:"small",variant:"flat"},{default:l(()=>[s(m(a.reason),1)]),_:2},1032,["color"])]),"item.total_qty":l(({item:a})=>[e(C,{color:"green",size:"small",variant:"flat"},{default:l(()=>[s(m(a.total_qty),1)]),_:2},1024)]),"item.total_cost_value":l(({item:a})=>[i("div",ne,m(Z(a.total_cost_value)),1)]),"item.status":l(({item:a})=>[e(C,{color:It(a.status),size:"small",variant:"flat"},{default:l(()=>[s(m(a.status),1)]),_:2},1032,["color"])]),"item.actions":l(({item:a})=>[i("div",re,[e(rt,{location:"top"},{activator:l(({props:r})=>[e(v,at(r,{color:"info",icon:"",size:"small",variant:"text",onClick:d=>Pt(a)}),{default:l(()=>[e(u,null,{default:l(()=>t[27]||(t[27]=[s("mdi-eye-outline")])),_:1})]),_:2},1040,["onClick"])]),default:l(()=>[t[28]||(t[28]=i("span",null,"View",-1))]),_:2},1024),e(rt,{location:"top"},{activator:l(({props:r})=>[o.$store.getters.hasTask("can_edit_free_release")?(_(),G(v,at({key:0},r,{color:"primary",disabled:a.status==="CANCELLED",icon:"",size:"small",variant:"text",onClick:d=>$t(a)}),{default:l(()=>[e(u,null,{default:l(()=>t[29]||(t[29]=[s("mdi-pencil-outline")])),_:1})]),_:2},1040,["disabled","onClick"])):z("",!0)]),default:l(()=>[t[30]||(t[30]=i("span",null,"Edit",-1))]),_:2},1024),e(rt,{location:"top"},{activator:l(({props:r})=>[o.$store.getters.hasTask("can_delete_free_release")?(_(),G(v,at({key:0},r,{color:"error",disabled:a.status==="CANCELLED",icon:"",size:"small",variant:"text",onClick:d=>Nt(a)}),{default:l(()=>[e(u,null,{default:l(()=>t[31]||(t[31]=[s("mdi-delete-outline")])),_:1})]),_:2},1040,["disabled","onClick"])):z("",!0)]),default:l(()=>[t[32]||(t[32]=i("span",null,"Cancel",-1))]),_:2},1024)])]),_:1},8,["items","loading"]),e(Q,{class:"px-4 py-3 bg-grey-lighten-3"},{default:l(()=>[e(R),e(Kt,{modelValue:K.value,"onUpdate:modelValue":[t[5]||(t[5]=a=>K.value=a),I],color:"primary",length:mt.value,"total-visible":"7"},null,8,["modelValue","length"])]),_:1})]),_:1}),e(dt,{modelValue:h.value,"onUpdate:modelValue":t[10]||(t[10]=a=>h.value=a),"max-width":"1200",persistent:"",scrollable:""},{default:l(()=>[e(b,{class:"rounded-lg"},{default:l(()=>[e(ot,{color:V.value?"warning":"primary",density:"comfortable"},{default:l(()=>[e(O,{class:"mr-3",color:V.value?"warning":"primary",size:"40"},{default:l(()=>[e(u,{color:"white"},{default:l(()=>[s(m(V.value?"mdi-pencil":"mdi-plus"),1)]),_:1})]),_:1},8,["color"]),e(st,{class:"text-h6 font-weight-bold"},{default:l(()=>[s(m(V.value?"Edit Giveaway":"Create New Giveaway"),1)]),_:1}),e(R),e(v,{icon:"",onClick:lt},{default:l(()=>[e(u,null,{default:l(()=>t[33]||(t[33]=[s("mdi-close")])),_:1})]),_:1})]),_:1},8,["color"]),e(x,{class:"pa-6"},{default:l(()=>[e(b,{class:"mb-6",variant:"outlined"},{default:l(()=>[e(H,{class:"d-flex align-center bg-blue-lighten-5"},{default:l(()=>[e(u,{class:"mr-2",color:"primary"},{default:l(()=>t[34]||(t[34]=[s("mdi-information")])),_:1}),t[35]||(t[35]=s(" Giveaway Information "))]),_:1}),e(x,{class:"pa-4"},{default:l(()=>[e(M,null,{default:l(()=>[e(c,{cols:"12",md:"4"},{default:l(()=>[e(F,{modelValue:n.outlet_id,"onUpdate:modelValue":[t[6]||(t[6]=a=>n.outlet_id=a),Mt],"item-title":"name","item-value":"id",items:X.value,label:"Outlet *","prepend-inner-icon":"mdi-store",required:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"12",md:"4"},{default:l(()=>[e(S,{modelValue:n.out_date,"onUpdate:modelValue":t[7]||(t[7]=a=>n.out_date=a),autocomplete:"off",autocorrect:"off",inputmode:"none",label:"Date *","prepend-inner-icon":"mdi-calendar",required:"",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"4"},{default:l(()=>[e(F,{modelValue:n.reason,"onUpdate:modelValue":t[8]||(t[8]=a=>n.reason=a),items:Ot,label:"Reason *","prepend-inner-icon":"mdi-tag",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:l(()=>[e(Zt,{modelValue:n.notes,"onUpdate:modelValue":t[9]||(t[9]=a=>n.notes=a),label:"Notes",placeholder:"Add any notes about this giveaway...",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{class:"mb-6",variant:"outlined"},{default:l(()=>[e(H,{class:"d-flex align-center justify-space-between bg-green-lighten-5"},{default:l(()=>[i("div",de,[e(u,{class:"mr-2",color:"green"},{default:l(()=>t[36]||(t[36]=[s("mdi-package-variant")])),_:1}),t[37]||(t[37]=s(" Give Away Items ")),e(C,{class:"ml-3",color:"green",size:"small",variant:"flat"},{default:l(()=>[s(m(n.items.length)+" items ",1)]),_:1}),e(C,{class:"ml-2",color:"orange",size:"small",variant:"tonal"},{default:l(()=>[s(" Total Cost: "+m(Z(Tt.value)),1)]),_:1})]),e(v,{color:"green",disabled:!n.outlet_id,size:"small",onClick:gt},{default:l(()=>[e(u,{start:""},{default:l(()=>t[38]||(t[38]=[s("mdi-plus")])),_:1}),t[39]||(t[39]=s(" Add Item "))]),_:1},8,["disabled"])]),_:1}),e(x,{class:"pa-4"},{default:l(()=>[P.value.length?(_(),G(te,{key:0,class:"mb-4",color:"error",icon:"mdi-alert-circle",variant:"tonal"},{default:l(()=>[(_(!0),T(it,null,nt(P.value,a=>(_(),T("div",{key:a}," â€¢ "+m(a),1))),128))]),_:1})):z("",!0),(_(!0),T(it,null,nt(n.items,(a,r)=>(_(),T("div",{key:r,class:"mb-4"},[e(b,{class:"elevation-1"},{default:l(()=>[e(x,{class:"pa-4"},{default:l(()=>[e(M,{align:"center",dense:""},{default:l(()=>[e(c,{cols:"12",md:"3"},{default:l(()=>[e(ee,{modelValue:a.product_id,"onUpdate:modelValue":[d=>a.product_id=d,()=>zt(a)],autocomplete:"off",autocorrect:"off",inputmode:"none","item-title":"name","item-value":"id",items:ut.value,label:"Product *","prepend-inner-icon":"mdi-cube-outline",required:"",spellcheck:"false",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(c,{cols:"12",md:"2"},{default:l(()=>[e(F,{modelValue:a.quality,"onUpdate:modelValue":[d=>a.quality=d,()=>Rt(a)],color:vt(a.quality),"item-title":"title","item-value":"value",items:qt,label:"Quality *",required:"",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),e(c,{cols:"12",md:"2"},{default:l(()=>[e(S,{modelValue:a.quantity,"onUpdate:modelValue":d=>a.quantity=d,autocomplete:"off",autocorrect:"off",density:"comfortable",error:_t(a),hint:St(a),inputmode:"none",label:"Quantity *","persistent-hint":"",spellcheck:"false",type:"number",variant:"outlined",onInput:D},null,8,["modelValue","onUpdate:modelValue","error","hint"])]),_:2},1024),e(c,{cols:"12",md:"2"},{default:l(()=>[e(S,{modelValue:a.remarks,"onUpdate:modelValue":d=>a.remarks=d,autocomplete:"off",autocorrect:"off",density:"comfortable",inputmode:"none",label:"Remarks",placeholder:"Optional remarks...",spellcheck:"false",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(c,{cols:"12",md:"2"},{default:l(()=>[e(b,{class:"pa-3 text-center",color:"blue-lighten-5",variant:"flat"},{default:l(()=>[t[40]||(t[40]=i("div",{class:"text-caption text-blue-darken-3 font-weight-bold"}," AVAILABLE ",-1)),i("div",ue,m(et(a)),1)]),_:2},1024)]),_:2},1024),e(c,{class:"text-right",cols:"12",md:"1"},{default:l(()=>[e(v,{color:"error",icon:"",size:"small",variant:"text",onClick:d=>Gt(r)},{default:l(()=>[e(u,null,{default:l(()=>t[41]||(t[41]=[s("mdi-delete-outline")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),n.items.length===0?(_(),T("div",me,[e(u,{class:"mb-4",color:"grey",size:"64"},{default:l(()=>t[42]||(t[42]=[s("mdi-package-variant-plus")])),_:1}),t[45]||(t[45]=i("div",{class:"text-h6 text-grey mb-2"},"No Items Added",-1)),t[46]||(t[46]=i("div",{class:"text-body-1 text-grey mb-4"},' Click "Add Item" to start adding products to this giveaway ',-1)),e(v,{color:"primary",disabled:!n.outlet_id,onClick:gt},{default:l(()=>[e(u,{start:""},{default:l(()=>t[43]||(t[43]=[s("mdi-plus")])),_:1}),t[44]||(t[44]=s(" Add Your First Item "))]),_:1},8,["disabled"])])):z("",!0)]),_:1})]),_:1})]),_:1}),e(Q,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[e(R),e(v,{size:"large",variant:"outlined",onClick:lt},{default:l(()=>t[47]||(t[47]=[s("Cancel")])),_:1}),e(v,{color:"primary",disabled:!ft.value,loading:B.value,size:"large",variant:"flat",onClick:Ft},{default:l(()=>[e(u,{start:""},{default:l(()=>[s(m(V.value?"mdi-content-save":"mdi-check"),1)]),_:1}),s(" "+m(V.value?"Update Giveaway":"Create Giveaway"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(dt,{modelValue:U.value,"onUpdate:modelValue":t[13]||(t[13]=a=>U.value=a),"max-width":"800",scrollable:"",transition:"dialog-bottom-transition"},{default:l(()=>[e(b,{class:"rounded-lg"},{default:l(()=>[e(ot,{color:"info",density:"comfortable"},{default:l(()=>[e(O,{class:"mr-3",color:"info",size:"40"},{default:l(()=>[e(u,{color:"white"},{default:l(()=>t[48]||(t[48]=[s("mdi-eye")])),_:1})]),_:1}),e(st,{class:"text-h6 font-weight-bold"},{default:l(()=>t[49]||(t[49]=[s("Giveaway Details")])),_:1}),e(R),e(v,{icon:"",onClick:t[11]||(t[11]=a=>U.value=!1)},{default:l(()=>[e(u,null,{default:l(()=>t[50]||(t[50]=[s("mdi-close")])),_:1})]),_:1})]),_:1}),e(x,{class:"pa-6"},{default:l(()=>[e(b,{class:"mb-6 elevation-2"},{default:l(()=>[e(x,{class:"pa-4"},{default:l(()=>[e(M,null,{default:l(()=>{var a,r;return[e(c,{class:"border-e",cols:"12",md:"6"},{default:l(()=>{var d,p,N,L;return[i("div",fe,[e(O,{class:"mr-3",color:"primary",size:"48"},{default:l(()=>[e(u,{color:"white"},{default:l(()=>t[51]||(t[51]=[s("mdi-identifier")])),_:1})]),_:1}),i("div",null,[t[52]||(t[52]=i("div",{class:"text-caption text-grey"},"GIVEAWAY ID",-1)),i("div",ce," #"+m((p=(d=g.value)==null?void 0:d.out)==null?void 0:p.id),1)])]),i("div",pe,[e(u,{class:"mr-3",color:"grey"},{default:l(()=>t[53]||(t[53]=[s("mdi-calendar")])),_:1}),i("div",null,[t[54]||(t[54]=i("div",{class:"text-caption text-grey"},"DATE",-1)),i("div",ve,m(ct((L=(N=g.value)==null?void 0:N.out)==null?void 0:L.out_date)),1)])])]}),_:1}),e(c,{cols:"12",md:"6"},{default:l(()=>{var d,p,N,L,wt,Vt,xt,kt;return[i("div",ye,[e(O,{class:"mr-3",color:tt((p=(d=g.value)==null?void 0:d.out)==null?void 0:p.outlet_type),size:"48"},{default:l(()=>[e(u,{color:"white"},{default:l(()=>{var E,A;return[s(m(pt((A=(E=g.value)==null?void 0:E.out)==null?void 0:A.outlet_type)),1)]}),_:1})]),_:1},8,["color"]),i("div",null,[t[55]||(t[55]=i("div",{class:"text-caption text-grey"},"OUTLET",-1)),i("div",ge,m((L=(N=g.value)==null?void 0:N.out)==null?void 0:L.outlet_name),1),e(C,{class:"mt-1",color:tt((Vt=(wt=g.value)==null?void 0:wt.out)==null?void 0:Vt.outlet_type),size:"small"},{default:l(()=>{var E,A;return[s(m((A=(E=g.value)==null?void 0:E.out)==null?void 0:A.outlet_type),1)]}),_:1},8,["color"])])]),i("div",_e,[e(u,{class:"mr-3",color:"grey"},{default:l(()=>t[56]||(t[56]=[s("mdi-tag")])),_:1}),i("div",null,[t[57]||(t[57]=i("div",{class:"text-caption text-grey"},"REASON",-1)),i("div",be,[e(C,{color:yt((kt=(xt=g.value)==null?void 0:xt.out)==null?void 0:kt.reason),size:"small"},{default:l(()=>{var E,A;return[s(m((A=(E=g.value)==null?void 0:E.out)==null?void 0:A.reason),1)]}),_:1},8,["color"])])])])]}),_:1}),(r=(a=g.value)==null?void 0:a.out)!=null&&r.notes?(_(),G(c,{key:0,cols:"12"},{default:l(()=>[e(Et,{class:"my-3"}),t[58]||(t[58]=i("div",{class:"text-caption text-grey mb-1"},"NOTES",-1)),e(b,{variant:"outlined"},{default:l(()=>[e(x,{class:"pa-3"},{default:l(()=>{var d,p;return[s(m((p=(d=g.value)==null?void 0:d.out)==null?void 0:p.notes),1)]}),_:1})]),_:1})]),_:1})):z("",!0)]}),_:1})]),_:1})]),_:1}),e(b,{class:"mb-6 elevation-2"},{default:l(()=>[e(H,{class:"d-flex align-center bg-teal-lighten-5"},{default:l(()=>[e(u,{class:"mr-2",color:"teal"},{default:l(()=>t[59]||(t[59]=[s("mdi-package-variant")])),_:1}),t[60]||(t[60]=s(" Items "))]),_:1}),e(x,{class:"pa-0"},{default:l(()=>{var a,r;return[e(Wt,{density:"comfortable"},{default:l(()=>{var d;return[t[61]||(t[61]=i("thead",null,[i("tr",{class:"bg-grey-lighten-4"},[i("th",{class:"text-left font-weight-bold text-grey"}," PRODUCT "),i("th",{class:"text-center font-weight-bold text-grey"}," QUALITY "),i("th",{class:"text-center font-weight-bold text-grey"},"QTY"),i("th",{class:"text-center font-weight-bold text-grey"}," REMARKS ")])],-1)),i("tbody",null,[(_(!0),T(it,null,nt(((d=g.value)==null?void 0:d.items)||[],p=>(_(),T("tr",{key:p.id},[i("td",we,m(p.product_name),1),i("td",Ve,[e(C,{color:vt(p.quality),size:"small",variant:"flat"},{default:l(()=>[s(m(p.quality),1)]),_:2},1032,["color"])]),i("td",xe,m(parseFloat(p.quantity)),1),i("td",ke,m(p.remarks||"-"),1)]))),128))])]}),_:1}),i("div",Ce,[i("div",De,[t[62]||(t[62]=s(" Total Cost Value: ")),i("strong",null,m(Z(((r=(a=g.value)==null?void 0:a.out)==null?void 0:r.total_cost_value)||0)),1)])])]}),_:1})]),_:1})]),_:1}),e(Q,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[e(R),e(v,{color:"primary",size:"large",variant:"flat",onClick:t[12]||(t[12]=a=>U.value=!1)},{default:l(()=>[e(u,{start:""},{default:l(()=>t[63]||(t[63]=[s("mdi-close")])),_:1}),t[64]||(t[64]=s(" Close "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(dt,{modelValue:$.value,"onUpdate:modelValue":t[15]||(t[15]=a=>$.value=a),"max-width":"500"},{default:l(()=>[e(b,{class:"rounded-lg"},{default:l(()=>[e(ot,{color:"error",density:"comfortable"},{default:l(()=>[e(O,{class:"mr-3",color:"error",size:"40"},{default:l(()=>[e(u,{color:"white"},{default:l(()=>t[65]||(t[65]=[s("mdi-alert")])),_:1})]),_:1}),e(st,{class:"text-h6 font-weight-bold"},{default:l(()=>t[66]||(t[66]=[s("Confirm Cancellation")])),_:1})]),_:1}),e(x,{class:"pa-6 text-center"},{default:l(()=>[e(u,{class:"mb-4",color:"error",size:"64"},{default:l(()=>t[67]||(t[67]=[s("mdi-cancel")])),_:1}),t[70]||(t[70]=i("div",{class:"text-h5 font-weight-bold mb-2"},"Cancel Giveaway?",-1)),i("div",Ee,[t[68]||(t[68]=s(" Are you sure you want to cancel giveaway ")),i("span",Ae,"#"+m(q.value),1),t[69]||(t[69]=s("? This will reverse the stock adjustments. "))])]),_:1}),e(Q,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[e(R),e(v,{size:"large",variant:"outlined",onClick:t[14]||(t[14]=a=>$.value=!1)},{default:l(()=>t[71]||(t[71]=[s("Cancel")])),_:1}),e(v,{color:"error",loading:Y.value,size:"large",variant:"flat",onClick:Lt},{default:l(()=>[e(u,{start:""},{default:l(()=>t[72]||(t[72]=[s("mdi-cancel")])),_:1}),t[73]||(t[73]=s(" Cancel Giveaway "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},je=Ht(qe,[["__scopeId","data-v-545902f4"]]);export{je as default};
