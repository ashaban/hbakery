import{_ as He,r as y,a0 as Ce,e as De,l as Qe,s as G,x as l,a1 as Be,v as _,i as t,O as h,$ as z,y as i,A as O,B as u,C as s,H as v,af as Ye,a6 as ae,I as m,Q as Ee,D as R,a3 as oe,a4 as se,E as T,F as ie,G as ne}from"./index-BEY1_AxZ.js";import{V as Je}from"./VContainer-4YzK1OXF.js";import{V as b,b as V,a as H,c as Q}from"./VCard-BWg2kNvx.js";import{V as c}from"./VCol-D55Xswv8.js";import{V as F,a as Xe,b as Ke,g as We}from"./VDataTable-XrgRokO0.js";import{V as S}from"./VTextField-CUtfiNtd.js";import{V as re}from"./VTooltip-DnJAFQRt.js";import{V as k}from"./VChip-B31zWpvD.js";import{V as de}from"./VDialog-BZVGdgk4.js";import{V as Ze}from"./VTextarea-CV8OKWvr.js";import{V as et}from"./VAlert-B1FPeFl4.js";import{V as tt}from"./VAutocomplete-BZjErokO.js";import"./dialog-transition-CW_75ERn.js";import"./VSlideGroup-BBNvX3-_.js";const lt={class:"d-flex align-center"},at={class:"d-flex align-center"},ot={class:"font-weight-medium"},st={class:"d-flex align-center"},it={class:"font-weight-medium"},nt={class:"text-right font-weight-bold text-orange"},rt={class:"d-flex justify-end"},dt={class:"d-flex align-center"},ut={class:"text-h6 font-weight-bold text-blue-darken-3"},mt={key:1,class:"text-center py-8"},ft={class:"d-flex align-center mb-4"},ct={class:"text-h5 font-weight-bold"},pt={class:"d-flex align-center"},vt={class:"text-body-1 font-weight-medium"},yt={class:"d-flex align-center mb-4"},gt={class:"text-body-1 font-weight-medium"},_t={class:"d-flex align-center"},bt={class:"text-body-1 font-weight-medium"},wt={class:"text-left"},Vt={class:"text-center"},xt={class:"text-center"},kt={class:"text-center"},Ct={class:"text-right pa-4"},Dt={class:"text-h6 text-orange"},Et={class:"text-body-1 text-grey mb-4"},At={class:"font-weight-bold text-error"},qt={__name:"GiveOut",setup(Ot){const A=Be(),x=y(!1),B=y(!1),Y=y(!1),J=y([]),X=y([]),ue=y([]),K=y(1),me=y(1),U=y(!1),$=y(!1),P=y(!1),w=y(!1),q=y(null),g=y(null),f=Ce({outlet_id:"",status:"",reason:"",start_date:"",end_date:""}),W=new Date().toISOString().split("T")[0],n=Ce({outlet_id:"",out_date:W,reason:"CHARITY",notes:"",items:[]}),N=y([]),Ae=[{title:"ID",key:"id"},{title:"Date",key:"out_date"},{title:"Outlet",key:"outlet_name"},{title:"Reason",key:"reason"},{title:"Items",key:"items_count",align:"center"},{title:"Qty",key:"total_qty",align:"center"},{title:"Cost Value",key:"total_cost_value",align:"end"},{title:"Status",key:"status",align:"center"},{title:"Actions",key:"actions",sortable:!1}],qe=[{title:"GOOD",value:"GOOD"},{title:"DAMAGED",value:"DAMAGED"},{title:"REJECT",value:"REJECT"}],Oe=["CHARITY","REJECT","SAMPLE","DAMAGED","EXPIRED","OTHER"],Te=De(()=>0),fe=De(()=>n.outlet_id&&n.out_date&&n.reason&&n.items.length>0&&N.value.length===0);function Z(o){return Number(o||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function ce(o){return new Date(o).toLocaleDateString()}function pe(o){return{MAIN:"mdi-home",SHOP:"mdi-store",CAR:"mdi-truck"}[o]||"mdi-store"}function ee(o){return{MAIN:"primary",SHOP:"success",CAR:"warning"}[o]||"grey"}function ve(o){return{GOOD:"success",DAMAGED:"warning",EXPIRED:"error"}[o]||"grey"}function Ie(o){return{POSTED:"success",CANCELLED:"error"}[o]||"grey"}function ye(o){return{CHARITY:"purple",REJECT:"red",SAMPLE:"blue",DAMAGED:"orange",EXPIRED:"brown",OTHER:"grey"}[o]||"grey"}function ge(){n.items.push({product_id:"",quality:"GOOD",quantity:"",remarks:"",stockData:null}),C()}function Ge(o){n.items.splice(o,1),C()}function te(o){return o.stockData&&o.stockData[o.quality]||0}async function ze(o){await j(o),C()}async function Re(o){await j(o),C()}async function j(o){if(!n.outlet_id||!o.product_id){o.stockData=null;return}try{const a=await(await fetch(`/stocktransfers/availableByQuality?outlet_id=${n.outlet_id}&product_id=${o.product_id}`)).json();o.stockData=a.stock||{GOOD:0,DAMAGED:0,EXPIRED:0}}catch(e){console.error("Stock check failed:",e),o.stockData=null}}function _e(o){return!o.product_id||!o.quality||!o.quantity?!1:Number(o.quantity)>Number(te(o)||0)}function Se(o){return o.product_id?`Available: ${te(o)}`:"Pick a product"}function C(){const o=[];n.outlet_id||o.push("Outlet is required."),n.out_date||o.push("Date is required."),n.reason||o.push("Reason is required.");const e=new Set;n.items.forEach((a,d)=>{const r=d+1;if(a.product_id||o.push(`Item ${r}: product is required.`),a.quality||o.push(`Item ${r}: quality is required.`),(a.quantity===""||Number(a.quantity)<=0)&&o.push(`Item ${r}: quantity is required and must be > 0.`),_e(a)&&o.push(`Item ${r}: insufficient ${a.quality} stock.`),a.product_id&&a.quality){const p=`${a.product_id}|${a.quality}`;e.has(p)&&o.push(`Duplicate product and quality detected on item ${d+1}.`),e.add(p)}}),N.value=o}async function I(){x.value=!0;const o=new URLSearchParams({page:K.value,limit:10});f.outlet_id&&o.append("outlet_id",f.outlet_id),f.status&&o.append("status",f.status),f.reason&&o.append("reason",f.reason),f.start_date&&o.append("start_date",f.start_date),f.end_date&&o.append("end_date",f.end_date);try{const a=await(await fetch(`/productOut?${o}`)).json();J.value=a.data||[],me.value=a.totalPages||1}catch{A.commit("setMessage",{type:"error",text:"Failed to load giveaways"})}finally{x.value=!1}}function Ue(){f.outlet_id="",f.status="",f.reason="",f.start_date="",f.end_date="",I()}function $e(){w.value=!1,q.value=null,be(),U.value=!0}async function Pe(o){var e;w.value=!0,q.value=o.id,x.value=!0;try{const d=await(await fetch(`/productOut/${o.id}`)).json();n.outlet_id=d.out.outlet_id,n.out_date=((e=d.out.out_date)==null?void 0:e.split("T")[0])||W,n.reason=d.out.reason,n.notes=d.out.notes||"",n.items=(d.items||[]).map(r=>({product_id:r.product_id,quality:r.quality,quantity:String(r.quantity),remarks:r.remarks||"",stockData:null}));for(const r of n.items)await j(r);C(),U.value=!0}catch{A.commit("setMessage",{type:"error",text:"Failed to load giveaway"})}finally{x.value=!1}}async function Ne(o){q.value=o.id,x.value=!0;try{const a=await(await fetch(`/productOut/${o.id}`)).json();g.value=a,$.value=!0}catch{A.commit("setMessage",{type:"error",text:"Failed to load giveaway details"})}finally{x.value=!1}}function le(){U.value=!1,be()}function be(){n.outlet_id="",n.out_date=W,n.reason="CHARITY",n.notes="",n.items=[],N.value=[]}function Le(o){q.value=o.id,P.value=!0}async function Me(){Y.value=!0;try{if(!(await fetch(`/productOut/${q.value}`,{method:"DELETE"})).ok)throw new Error("Failed to cancel");A.commit("setMessage",{type:"success",text:"Giveaway cancelled successfully"}),P.value=!1,I()}catch{A.commit("setMessage",{type:"error",text:"Failed to cancel giveaway"})}finally{Y.value=!1}}async function he(){for(const o of n.items)await j(o);C()}async function Fe(){if(C(),!fe.value)return;B.value=!0;const o={outlet_id:n.outlet_id,out_date:n.out_date,reason:n.reason,notes:n.notes||null,items:n.items.map(d=>({product_id:d.product_id,quality:d.quality,quantity:Number(d.quantity),remarks:d.remarks||null}))},e=w.value?`/productOut/${q.value}`:"/productOut",a=w.value?"PUT":"POST";try{const d=await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!d.ok)throw new Error("Failed to save giveaway");const r=await d.json();A.commit("setMessage",{type:"success",text:w.value?"Giveaway updated successfully":"Giveaway created successfully"}),le(),I()}catch{A.commit("setMessage",{type:"error",text:"Failed to save giveaway"})}finally{B.value=!1}}async function je(){try{const[o,e]=await Promise.all([fetch("/outlets?limit=1000"),fetch("/products?limit=1000")]);X.value=(await o.json()).data||[],ue.value=(await e.json()).data||[]}catch(o){console.error("Init data load failed:",o)}}return Qe(()=>{I(),je()}),(o,e)=>(_(),G(Je,{class:"bg-grey-lighten-4 pa-6",fluid:""},{default:l(()=>[t(b,{class:"mb-6",elevation:"2"},{default:l(()=>[t(V,{class:"pa-6"},{default:l(()=>[t(h,{align:"center"},{default:l(()=>[t(c,{cols:"12",md:"6"},{default:l(()=>[i("div",lt,[t(O,{class:"mr-4",color:"primary",size:"56"},{default:l(()=>[t(u,{color:"white",size:"32"},{default:l(()=>e[16]||(e[16]=[s("mdi-gift-outline")])),_:1})]),_:1}),e[17]||(e[17]=i("div",null,[i("h1",{class:"text-h4 font-weight-bold text-primary"}," Product Giveaways "),i("p",{class:"text-body-1 text-grey mt-1"}," Manage charity donations and product rejects with stock tracking ")],-1))])]),_:1}),o.$store.getters.hasTask("can_release_products_for_free")?(_(),G(c,{key:0,class:"text-right",cols:"12",md:"6"},{default:l(()=>[t(v,{color:"primary",size:"large",onClick:$e},{default:l(()=>[t(u,{start:""},{default:l(()=>e[18]||(e[18]=[s("mdi-plus")])),_:1}),e[19]||(e[19]=s(" New Giveaway "))]),_:1})]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1}),t(b,{class:"mb-6",elevation:"1"},{default:l(()=>[t(V,{class:"pa-4"},{default:l(()=>[t(h,{align:"center",dense:""},{default:l(()=>[t(c,{cols:"12",sm:"3"},{default:l(()=>[t(F,{modelValue:f.outlet_id,"onUpdate:modelValue":e[0]||(e[0]=a=>f.outlet_id=a),clearable:"",density:"comfortable","item-title":"name","item-value":"id",items:X.value,label:"Outlet","prepend-inner-icon":"mdi-store",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(c,{cols:"12",sm:"2"},{default:l(()=>[t(F,{modelValue:f.status,"onUpdate:modelValue":e[1]||(e[1]=a=>f.status=a),clearable:"",density:"comfortable",items:[{title:"All",value:""},{title:"Posted",value:"POSTED"},{title:"Cancelled",value:"CANCELLED"}],label:"Status","prepend-inner-icon":"mdi-filter",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",sm:"2"},{default:l(()=>[t(S,{modelValue:f.reason,"onUpdate:modelValue":e[2]||(e[2]=a=>f.reason=a),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"Reason","prepend-inner-icon":"mdi-tag",spellcheck:"false",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",sm:"2"},{default:l(()=>[t(S,{modelValue:f.start_date,"onUpdate:modelValue":e[3]||(e[3]=a=>f.start_date=a),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"Start Date","prepend-inner-icon":"mdi-calendar",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",sm:"2"},{default:l(()=>[t(S,{modelValue:f.end_date,"onUpdate:modelValue":e[4]||(e[4]=a=>f.end_date=a),autocomplete:"off",autocorrect:"off",clearable:"",density:"comfortable",inputmode:"none",label:"End Date","prepend-inner-icon":"mdi-calendar",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(c,{class:"d-flex justify-end",cols:"12",sm:"1"},{default:l(()=>[t(v,{class:"mr-2",color:"primary",variant:"flat",onClick:I},{default:l(()=>[t(u,{start:""},{default:l(()=>e[20]||(e[20]=[s("mdi-magnify")])),_:1}),e[21]||(e[21]=s(" Search "))]),_:1}),t(v,{color:"grey",variant:"outlined",onClick:Ue},{default:l(()=>[t(u,{start:""},{default:l(()=>e[22]||(e[22]=[s("mdi-refresh")])),_:1}),e[23]||(e[23]=s(" Reset "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(b,{class:"rounded-lg",elevation:"2"},{default:l(()=>[t(Ye,{active:x.value,color:"primary",height:"4",indeterminate:x.value},null,8,["active","indeterminate"]),t(Xe,{class:"elevation-0",headers:Ae,items:J.value,"items-per-page":10,loading:x.value,"loading-text":"Loading giveaways...","no-data-text":"No giveaways found"},{top:l(()=>[t(H,{class:"d-flex align-center pt-4"},{default:l(()=>[t(u,{class:"mr-2",color:"primary"},{default:l(()=>e[24]||(e[24]=[s("mdi-format-list-bulleted")])),_:1}),e[25]||(e[25]=s(" Recent Giveaways ")),t(k,{class:"ml-3",color:"primary",size:"small",variant:"flat"},{default:l(()=>[s(m(J.value.length)+" total ",1)]),_:1})]),_:1}),t(Ee)]),"item.out_date":l(({item:a})=>[i("div",at,[t(u,{class:"mr-2",color:"grey",size:"16"},{default:l(()=>e[26]||(e[26]=[s("mdi-calendar")])),_:1}),i("span",ot,m(ce(a.out_date)),1)])]),"item.outlet_name":l(({item:a})=>[i("div",st,[t(O,{class:"mr-2",color:ee(a.outlet_type),size:"28"},{default:l(()=>[t(u,{color:"white",size:"14"},{default:l(()=>[s(m(pe(a.outlet_type)),1)]),_:2},1024)]),_:2},1032,["color"]),i("div",it,m(a.outlet_name),1)])]),"item.reason":l(({item:a})=>[t(k,{color:ye(a.reason),size:"small",variant:"flat"},{default:l(()=>[s(m(a.reason),1)]),_:2},1032,["color"])]),"item.total_qty":l(({item:a})=>[t(k,{color:"green",size:"small",variant:"flat"},{default:l(()=>[s(m(a.total_qty),1)]),_:2},1024)]),"item.total_cost_value":l(({item:a})=>[i("div",nt,m(Z(a.total_cost_value)),1)]),"item.status":l(({item:a})=>[t(k,{color:Ie(a.status),size:"small",variant:"flat"},{default:l(()=>[s(m(a.status),1)]),_:2},1032,["color"])]),"item.actions":l(({item:a})=>[i("div",rt,[t(re,{location:"top"},{activator:l(({props:d})=>[t(v,ae(d,{color:"info",icon:"",size:"small",variant:"text",onClick:r=>Ne(a)}),{default:l(()=>[t(u,null,{default:l(()=>e[27]||(e[27]=[s("mdi-eye-outline")])),_:1})]),_:2},1040,["onClick"])]),default:l(()=>[e[28]||(e[28]=i("span",null,"View",-1))]),_:2},1024),t(re,{location:"top"},{activator:l(({props:d})=>[o.$store.getters.hasTask("can_edit_free_release")?(_(),G(v,ae({key:0},d,{color:"primary",disabled:a.status==="CANCELLED",icon:"",size:"small",variant:"text",onClick:r=>Pe(a)}),{default:l(()=>[t(u,null,{default:l(()=>e[29]||(e[29]=[s("mdi-pencil-outline")])),_:1})]),_:2},1040,["disabled","onClick"])):z("",!0)]),default:l(()=>[e[30]||(e[30]=i("span",null,"Edit",-1))]),_:2},1024),t(re,{location:"top"},{activator:l(({props:d})=>[o.$store.getters.hasTask("can_delete_free_release")?(_(),G(v,ae({key:0},d,{color:"error",disabled:a.status==="CANCELLED",icon:"",size:"small",variant:"text",onClick:r=>Le(a)}),{default:l(()=>[t(u,null,{default:l(()=>e[31]||(e[31]=[s("mdi-delete-outline")])),_:1})]),_:2},1040,["disabled","onClick"])):z("",!0)]),default:l(()=>[e[32]||(e[32]=i("span",null,"Cancel",-1))]),_:2},1024)])]),_:1},8,["items","loading"]),t(Q,{class:"px-4 py-3 bg-grey-lighten-3"},{default:l(()=>[t(R),t(Ke,{modelValue:K.value,"onUpdate:modelValue":[e[5]||(e[5]=a=>K.value=a),I],color:"primary",length:me.value,"total-visible":"7"},null,8,["modelValue","length"])]),_:1})]),_:1}),t(de,{modelValue:U.value,"onUpdate:modelValue":e[10]||(e[10]=a=>U.value=a),"max-width":"1200",persistent:"",scrollable:""},{default:l(()=>[t(b,{class:"rounded-lg"},{default:l(()=>[t(oe,{color:w.value?"warning":"primary",density:"comfortable"},{default:l(()=>[t(O,{class:"mr-3",color:w.value?"warning":"primary",size:"40"},{default:l(()=>[t(u,{color:"white"},{default:l(()=>[s(m(w.value?"mdi-pencil":"mdi-plus"),1)]),_:1})]),_:1},8,["color"]),t(se,{class:"text-h6 font-weight-bold"},{default:l(()=>[s(m(w.value?"Edit Giveaway":"Create New Giveaway"),1)]),_:1}),t(R),t(v,{icon:"",onClick:le},{default:l(()=>[t(u,null,{default:l(()=>e[33]||(e[33]=[s("mdi-close")])),_:1})]),_:1})]),_:1},8,["color"]),t(V,{class:"pa-6"},{default:l(()=>[t(b,{class:"mb-6",variant:"outlined"},{default:l(()=>[t(H,{class:"d-flex align-center bg-blue-lighten-5"},{default:l(()=>[t(u,{class:"mr-2",color:"primary"},{default:l(()=>e[34]||(e[34]=[s("mdi-information")])),_:1}),e[35]||(e[35]=s(" Giveaway Information "))]),_:1}),t(V,{class:"pa-4"},{default:l(()=>[t(h,null,{default:l(()=>[t(c,{cols:"12",md:"4"},{default:l(()=>[t(F,{modelValue:n.outlet_id,"onUpdate:modelValue":[e[6]||(e[6]=a=>n.outlet_id=a),he],"item-title":"name","item-value":"id",items:X.value,label:"Outlet *","prepend-inner-icon":"mdi-store",required:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),t(c,{cols:"12",md:"4"},{default:l(()=>[t(S,{modelValue:n.out_date,"onUpdate:modelValue":e[7]||(e[7]=a=>n.out_date=a),autocomplete:"off",autocorrect:"off",inputmode:"none",label:"Date *","prepend-inner-icon":"mdi-calendar",required:"",spellcheck:"false",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",md:"4"},{default:l(()=>[t(F,{modelValue:n.reason,"onUpdate:modelValue":e[8]||(e[8]=a=>n.reason=a),items:Oe,label:"Reason *","prepend-inner-icon":"mdi-tag",required:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12"},{default:l(()=>[t(Ze,{modelValue:n.notes,"onUpdate:modelValue":e[9]||(e[9]=a=>n.notes=a),label:"Notes",placeholder:"Add any notes about this giveaway...",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(b,{class:"mb-6",variant:"outlined"},{default:l(()=>[t(H,{class:"d-flex align-center justify-space-between bg-green-lighten-5"},{default:l(()=>[i("div",dt,[t(u,{class:"mr-2",color:"green"},{default:l(()=>e[36]||(e[36]=[s("mdi-package-variant")])),_:1}),e[37]||(e[37]=s(" Give Away Items ")),t(k,{class:"ml-3",color:"green",size:"small",variant:"flat"},{default:l(()=>[s(m(n.items.length)+" items ",1)]),_:1}),t(k,{class:"ml-2",color:"orange",size:"small",variant:"tonal"},{default:l(()=>[s(" Total Cost: "+m(Z(Te.value)),1)]),_:1})]),t(v,{color:"green",disabled:!n.outlet_id,size:"small",onClick:ge},{default:l(()=>[t(u,{start:""},{default:l(()=>e[38]||(e[38]=[s("mdi-plus")])),_:1}),e[39]||(e[39]=s(" Add Item "))]),_:1},8,["disabled"])]),_:1}),t(V,{class:"pa-4"},{default:l(()=>[N.value.length?(_(),G(et,{key:0,class:"mb-4",color:"error",icon:"mdi-alert-circle",variant:"tonal"},{default:l(()=>[(_(!0),T(ie,null,ne(N.value,a=>(_(),T("div",{key:a}," â€¢ "+m(a),1))),128))]),_:1})):z("",!0),(_(!0),T(ie,null,ne(n.items,(a,d)=>(_(),T("div",{key:d,class:"mb-4"},[t(b,{class:"elevation-1"},{default:l(()=>[t(V,{class:"pa-4"},{default:l(()=>[t(h,{align:"center",dense:""},{default:l(()=>[t(c,{cols:"12",md:"3"},{default:l(()=>[t(tt,{modelValue:a.product_id,"onUpdate:modelValue":[r=>a.product_id=r,()=>ze(a)],autocomplete:"off",autocorrect:"off",inputmode:"none","item-title":"name","item-value":"id",items:ue.value,label:"Product *","prepend-inner-icon":"mdi-cube-outline",required:"",spellcheck:"false",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),t(c,{cols:"12",md:"2"},{default:l(()=>[t(F,{modelValue:a.quality,"onUpdate:modelValue":[r=>a.quality=r,()=>Re(a)],color:ve(a.quality),"item-title":"title","item-value":"value",items:qe,label:"Quality *",required:"",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","color"])]),_:2},1024),t(c,{cols:"12",md:"2"},{default:l(()=>[t(S,{modelValue:a.quantity,"onUpdate:modelValue":r=>a.quantity=r,autocomplete:"off",autocorrect:"off",density:"comfortable",error:_e(a),hint:Se(a),inputmode:"none",label:"Quantity *","persistent-hint":"",spellcheck:"false",type:"number",variant:"outlined",onInput:C},null,8,["modelValue","onUpdate:modelValue","error","hint"])]),_:2},1024),t(c,{cols:"12",md:"2"},{default:l(()=>[t(S,{modelValue:a.remarks,"onUpdate:modelValue":r=>a.remarks=r,autocomplete:"off",autocorrect:"off",density:"comfortable",inputmode:"none",label:"Remarks",placeholder:"Optional remarks...",spellcheck:"false",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,{cols:"12",md:"2"},{default:l(()=>[t(b,{class:"pa-3 text-center",color:"blue-lighten-5",variant:"flat"},{default:l(()=>[e[40]||(e[40]=i("div",{class:"text-caption text-blue-darken-3 font-weight-bold"}," AVAILABLE ",-1)),i("div",ut,m(te(a)),1)]),_:2},1024)]),_:2},1024),t(c,{class:"text-right",cols:"12",md:"1"},{default:l(()=>[t(v,{color:"error",icon:"",size:"small",variant:"text",onClick:r=>Ge(d)},{default:l(()=>[t(u,null,{default:l(()=>e[41]||(e[41]=[s("mdi-delete-outline")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),n.items.length===0?(_(),T("div",mt,[t(u,{class:"mb-4",color:"grey",size:"64"},{default:l(()=>e[42]||(e[42]=[s("mdi-package-variant-plus")])),_:1}),e[45]||(e[45]=i("div",{class:"text-h6 text-grey mb-2"},"No Items Added",-1)),e[46]||(e[46]=i("div",{class:"text-body-1 text-grey mb-4"},' Click "Add Item" to start adding products to this giveaway ',-1)),t(v,{color:"primary",disabled:!n.outlet_id,onClick:ge},{default:l(()=>[t(u,{start:""},{default:l(()=>e[43]||(e[43]=[s("mdi-plus")])),_:1}),e[44]||(e[44]=s(" Add Your First Item "))]),_:1},8,["disabled"])])):z("",!0)]),_:1})]),_:1})]),_:1}),t(Q,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[t(R),t(v,{size:"large",variant:"outlined",onClick:le},{default:l(()=>e[47]||(e[47]=[s("Cancel")])),_:1}),t(v,{color:"primary",disabled:!fe.value,loading:B.value,size:"large",variant:"flat",onClick:Fe},{default:l(()=>[t(u,{start:""},{default:l(()=>[s(m(w.value?"mdi-content-save":"mdi-check"),1)]),_:1}),s(" "+m(w.value?"Update Giveaway":"Create Giveaway"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(de,{modelValue:$.value,"onUpdate:modelValue":e[13]||(e[13]=a=>$.value=a),"max-width":"800",scrollable:"",transition:"dialog-bottom-transition"},{default:l(()=>[t(b,{class:"rounded-lg"},{default:l(()=>[t(oe,{color:"info",density:"comfortable"},{default:l(()=>[t(O,{class:"mr-3",color:"info",size:"40"},{default:l(()=>[t(u,{color:"white"},{default:l(()=>e[48]||(e[48]=[s("mdi-eye")])),_:1})]),_:1}),t(se,{class:"text-h6 font-weight-bold"},{default:l(()=>e[49]||(e[49]=[s("Giveaway Details")])),_:1}),t(R),t(v,{icon:"",onClick:e[11]||(e[11]=a=>$.value=!1)},{default:l(()=>[t(u,null,{default:l(()=>e[50]||(e[50]=[s("mdi-close")])),_:1})]),_:1})]),_:1}),t(V,{class:"pa-6"},{default:l(()=>[t(b,{class:"mb-6 elevation-2"},{default:l(()=>[t(V,{class:"pa-4"},{default:l(()=>[t(h,null,{default:l(()=>{var a,d;return[t(c,{class:"border-e",cols:"12",md:"6"},{default:l(()=>{var r,p,L,M;return[i("div",ft,[t(O,{class:"mr-3",color:"primary",size:"48"},{default:l(()=>[t(u,{color:"white"},{default:l(()=>e[51]||(e[51]=[s("mdi-identifier")])),_:1})]),_:1}),i("div",null,[e[52]||(e[52]=i("div",{class:"text-caption text-grey"},"GIVEAWAY ID",-1)),i("div",ct," #"+m((p=(r=g.value)==null?void 0:r.out)==null?void 0:p.id),1)])]),i("div",pt,[t(u,{class:"mr-3",color:"grey"},{default:l(()=>e[53]||(e[53]=[s("mdi-calendar")])),_:1}),i("div",null,[e[54]||(e[54]=i("div",{class:"text-caption text-grey"},"DATE",-1)),i("div",vt,m(ce((M=(L=g.value)==null?void 0:L.out)==null?void 0:M.out_date)),1)])])]}),_:1}),t(c,{cols:"12",md:"6"},{default:l(()=>{var r,p,L,M,we,Ve,xe,ke;return[i("div",yt,[t(O,{class:"mr-3",color:ee((p=(r=g.value)==null?void 0:r.out)==null?void 0:p.outlet_type),size:"48"},{default:l(()=>[t(u,{color:"white"},{default:l(()=>{var D,E;return[s(m(pe((E=(D=g.value)==null?void 0:D.out)==null?void 0:E.outlet_type)),1)]}),_:1})]),_:1},8,["color"]),i("div",null,[e[55]||(e[55]=i("div",{class:"text-caption text-grey"},"OUTLET",-1)),i("div",gt,m((M=(L=g.value)==null?void 0:L.out)==null?void 0:M.outlet_name),1),t(k,{class:"mt-1",color:ee((Ve=(we=g.value)==null?void 0:we.out)==null?void 0:Ve.outlet_type),size:"small"},{default:l(()=>{var D,E;return[s(m((E=(D=g.value)==null?void 0:D.out)==null?void 0:E.outlet_type),1)]}),_:1},8,["color"])])]),i("div",_t,[t(u,{class:"mr-3",color:"grey"},{default:l(()=>e[56]||(e[56]=[s("mdi-tag")])),_:1}),i("div",null,[e[57]||(e[57]=i("div",{class:"text-caption text-grey"},"REASON",-1)),i("div",bt,[t(k,{color:ye((ke=(xe=g.value)==null?void 0:xe.out)==null?void 0:ke.reason),size:"small"},{default:l(()=>{var D,E;return[s(m((E=(D=g.value)==null?void 0:D.out)==null?void 0:E.reason),1)]}),_:1},8,["color"])])])])]}),_:1}),(d=(a=g.value)==null?void 0:a.out)!=null&&d.notes?(_(),G(c,{key:0,cols:"12"},{default:l(()=>[t(Ee,{class:"my-3"}),e[58]||(e[58]=i("div",{class:"text-caption text-grey mb-1"},"NOTES",-1)),t(b,{variant:"outlined"},{default:l(()=>[t(V,{class:"pa-3"},{default:l(()=>{var r,p;return[s(m((p=(r=g.value)==null?void 0:r.out)==null?void 0:p.notes),1)]}),_:1})]),_:1})]),_:1})):z("",!0)]}),_:1})]),_:1})]),_:1}),t(b,{class:"mb-6 elevation-2"},{default:l(()=>[t(H,{class:"d-flex align-center bg-teal-lighten-5"},{default:l(()=>[t(u,{class:"mr-2",color:"teal"},{default:l(()=>e[59]||(e[59]=[s("mdi-package-variant")])),_:1}),e[60]||(e[60]=s(" Items "))]),_:1}),t(V,{class:"pa-0"},{default:l(()=>{var a,d;return[t(We,{density:"comfortable"},{default:l(()=>{var r;return[e[61]||(e[61]=i("thead",null,[i("tr",{class:"bg-grey-lighten-4"},[i("th",{class:"text-left font-weight-bold text-grey"}," PRODUCT "),i("th",{class:"text-center font-weight-bold text-grey"}," QUALITY "),i("th",{class:"text-center font-weight-bold text-grey"},"QTY"),i("th",{class:"text-center font-weight-bold text-grey"}," REMARKS ")])],-1)),i("tbody",null,[(_(!0),T(ie,null,ne(((r=g.value)==null?void 0:r.items)||[],p=>(_(),T("tr",{key:p.id},[i("td",wt,m(p.product_name),1),i("td",Vt,[t(k,{color:ve(p.quality),size:"small",variant:"flat"},{default:l(()=>[s(m(p.quality),1)]),_:2},1032,["color"])]),i("td",xt,m(parseFloat(p.quantity)),1),i("td",kt,m(p.remarks||"-"),1)]))),128))])]}),_:1}),i("div",Ct,[i("div",Dt,[e[62]||(e[62]=s(" Total Cost Value: ")),i("strong",null,m(Z(((d=(a=g.value)==null?void 0:a.out)==null?void 0:d.total_cost_value)||0)),1)])])]}),_:1})]),_:1})]),_:1}),t(Q,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[t(R),t(v,{color:"primary",size:"large",variant:"flat",onClick:e[12]||(e[12]=a=>$.value=!1)},{default:l(()=>[t(u,{start:""},{default:l(()=>e[63]||(e[63]=[s("mdi-close")])),_:1}),e[64]||(e[64]=s(" Close "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(de,{modelValue:P.value,"onUpdate:modelValue":e[15]||(e[15]=a=>P.value=a),"max-width":"500"},{default:l(()=>[t(b,{class:"rounded-lg"},{default:l(()=>[t(oe,{color:"error",density:"comfortable"},{default:l(()=>[t(O,{class:"mr-3",color:"error",size:"40"},{default:l(()=>[t(u,{color:"white"},{default:l(()=>e[65]||(e[65]=[s("mdi-alert")])),_:1})]),_:1}),t(se,{class:"text-h6 font-weight-bold"},{default:l(()=>e[66]||(e[66]=[s("Confirm Cancellation")])),_:1})]),_:1}),t(V,{class:"pa-6 text-center"},{default:l(()=>[t(u,{class:"mb-4",color:"error",size:"64"},{default:l(()=>e[67]||(e[67]=[s("mdi-cancel")])),_:1}),e[70]||(e[70]=i("div",{class:"text-h5 font-weight-bold mb-2"},"Cancel Giveaway?",-1)),i("div",Et,[e[68]||(e[68]=s(" Are you sure you want to cancel giveaway ")),i("span",At,"#"+m(q.value),1),e[69]||(e[69]=s("? This will reverse the stock adjustments. "))])]),_:1}),t(Q,{class:"pa-4 bg-grey-lighten-4"},{default:l(()=>[t(R),t(v,{size:"large",variant:"outlined",onClick:e[14]||(e[14]=a=>P.value=!1)},{default:l(()=>e[71]||(e[71]=[s("Cancel")])),_:1}),t(v,{color:"error",loading:Y.value,size:"large",variant:"flat",onClick:Me},{default:l(()=>[t(u,{start:""},{default:l(()=>e[72]||(e[72]=[s("mdi-cancel")])),_:1}),e[73]||(e[73]=s(" Cancel Giveaway "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},jt=He(qt,[["__scopeId","data-v-74e5f058"]]);export{jt as default};
