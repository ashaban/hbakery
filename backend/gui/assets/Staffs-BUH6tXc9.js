import{_ as Be,r as g,$ as I,d as ae,k as ze,q as x,v as l,a0 as Ge,a1 as Ke,t as _,h as t,x as V,N as Se,G as p,B as o,A as v,Z as H,ae as Ze,aM as Je,H as i,a2 as N,C as Qe,a4 as le,ay as $,D as B,i as se,a3 as W,K as Ce,L as P,M as F,af as A}from"./index-DdAOk_5E.js";import{u as We,r as oe,m as Xe}from"./index-D5upgCCV.js";import{V as Ye}from"./VContainer-DkBHBzCb.js";import{V as D,b as h,c as X,a as xe}from"./VCard-BH967Szg.js";import{V as q}from"./VCol-C4_Euq8t.js";import{V as T}from"./VTextField-Cw0NWM-L.js";import{V as re,a as ne,b as et}from"./VDataTable-C890HziL.js";import{V as Y}from"./VChip-BuwYhJ1F.js";import{V as O}from"./VDialog-D-m7SVIZ.js";import{V as ie}from"./VForm-EmxZ3l6K.js";import{V as he}from"./VTextarea-BF98lm6B.js";import"./dialog-transition-C6x2K1QZ.js";import"./VSlideGroup-77nJjKYl.js";const tt={class:"d-flex justify-space-between mb-4"},at={class:"d-flex justify-end align-center mt-4"},lt={class:"d-flex align-center flex-wrap"},st={class:"text-white font-weight-bold text-h6"},ot={class:"mb-4"},rt={key:0,class:"text-caption text-error mt-1"},nt={class:"mb-4"},it={key:0,class:"text-caption text-error mt-1"},dt={class:"text-caption text-grey"},ut={class:"mb-4"},ft={key:0,class:"text-caption text-error mt-1"},mt={key:1,class:"text-grey"},pt={key:1,class:"text-grey"},yt=10,ct={__name:"Staffs",setup(vt){const b=Ge(),f=g(!1),E=g(!1),R=g(!1),k=g(!1),ee=g(null),M=g(!1),U=g(!1),z=g(!1),G=g(!1),j=g(1),de=g(1),ue=g([]),Ee=I({total_staff:""}),fe=g([]),me=g([]),u=g(null),c=I({search:"",status:"",hiredDate:null}),$e=[{title:"Name",key:"name"},{title:"Phone",key:"phone"},{title:"Position",key:"position"},{title:"Salary",key:"salary"},{title:"Last Hired Date",key:"hired_at"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],Te=[{title:"Staff Name",key:"staff_name"},{title:"Position",key:"position"},{title:"Salary",key:"salary"},{title:"Start Date",key:"start_date"},{title:"End Date",key:"end_date"},{title:"End Reason",key:"end_reason"},{title:"Notes",key:"notes"}],Re=[{title:"Position",key:"position"},{title:"Salary",key:"salary"},{title:"Start Date",key:"start_date"},{title:"End Date",key:"end_date"},{title:"End Reason",key:"end_reason"},{title:"Notes",key:"notes"}],d=I({name:"",phone:"",position:"",salary:"",status:"Active",hired_at:new Date().toISOString().split("T")[0]}),y=I({end_date:new Date().toISOString().split("T")[0],end_reason:"Resignation",notes:""}),m=I({position:"",salary:"",rehire_date:new Date().toISOString().split("T")[0],notes:""}),Me={name:{required:oe},salary:{required:oe,minValue:Xe(0)},hired_at:{required:oe}},w=We(Me,d),pe=ae(()=>{if(!d.hired_at)return"Hire date is required";const s=L(d.hired_at);if(!s)return"Invalid date format";const e=new Date;return e.setHours(0,0,0,0),s>e?"Hire date cannot be in the future":""}),ye=ae(()=>{if(!y.end_date)return"End date is required";const s=L(y.end_date),e=Ve();if(!s)return"Invalid date format";const r=new Date;return r.setHours(0,0,0,0),s>r?"End date cannot be in the future":e&&s<e?`End date must be on or after ${S(e)}`:""}),ce=ae(()=>{if(!m.rehire_date)return"Rehire date is required";const s=L(m.rehire_date),e=be();if(!s)return"Invalid date format";const r=new Date;return r.setHours(0,0,0,0),s>r?"Rehire date cannot be in the future":e&&s<e?`Rehire date must be on or after ${S(e)}`:""}),K=s=>s?Number(s).toLocaleString("en-US",{minimumFractionDigits:0})+" TSh":"0 TSh",S=s=>{if(!s)return"";let e;if(s instanceof Date)e=s;else if(typeof s=="string"){const r=s.split("-");if(r.length===3){const[a,n,te]=r;e=new Date(te,n-1,a)}else e=new Date(s)}return e&&!isNaN(e.getTime())?e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):String(s)},L=s=>{if(!s)return null;if(s instanceof Date)return s;if(typeof s=="string"){const e=s.split("-");if(e.length===3){const[a,n,te]=e,ke=new Date(te,n-1,a);if(!isNaN(ke.getTime()))return ke}const r=new Date(s);if(!isNaN(r.getTime()))return r}return null},ve=s=>{switch(s){case"Active":return"green";case"Resigned":return"orange";case"Terminated":return"red";default:return"grey"}},ge=s=>{switch(s){case"Termination":return"red";case"Resignation":return"orange";case"Contract Expired":return"blue";case"Retirement":return"purple";default:return"grey"}},Z=()=>!pe.value&&d.hired_at,J=()=>!ye.value&&y.end_date,Q=()=>!ce.value&&m.rehire_date,Ve=()=>{if(!u.value)return null;const s=u.value.hired_at;return L(s)},be=()=>u.value&&u.value.last_end_date?L(u.value.last_end_date):null;async function C(){f.value=!0;const s=new URLSearchParams({page:j.value,limit:yt});if(c.search&&s.append("search",c.search),c.status&&s.append("status",c.status),c.hiredDate){const r=new Date(c.hiredDate).toISOString().split("T")[0];s.append("hired_at",r)}try{const r=await(await fetch(`/staffs?${s.toString()}`)).json();ue.value=r.data||[],de.value=r.totalPages||1,Ee.total_staff=r.totalRecords||0}catch(e){console.error(e),b.commit("setMessage",{type:"error",text:"Failed to load staff"})}finally{f.value=!1}}async function Ue(){f.value=!0;try{const e=await(await fetch("/staffs/contracts/history")).json();fe.value=e.data||[]}catch(s){console.error(s),b.commit("setMessage",{type:"error",text:"Failed to load contract history"})}finally{f.value=!1}}async function _e(s){f.value=!0;try{const r=await(await fetch(`/staffs/${s}/contracts`)).json();if(me.value=r.data||[],r.data&&r.data.length>0){const a=r.data.find(n=>n.end_date)||r.data[0];a&&a.end_date&&(u.value.last_end_date=a.end_date)}}catch(e){console.error(e),b.commit("setMessage",{type:"error",text:"Failed to load staff contract history"})}finally{f.value=!1}}function He(){j.value=1,C()}function Ne(){c.search="",c.status="",c.hiredDate=null,j.value=1,C()}function Pe(){k.value=!1,Object.assign(d,{name:"",phone:"",position:"",salary:"",status:"Active",hired_at:""}),E.value=!0,w.value.$reset()}function Fe(s){k.value=!0,ee.value=s.id,Object.assign(d,{...s,hired_at:s.hired_at||new Date().toISOString().split("T")[0]}),E.value=!0,w.value.$reset()}async function Ae(s){u.value=s,Object.assign(y,{end_date:new Date().toISOString().split("T")[0],end_reason:"Resignation",notes:""}),M.value=!0}async function qe(s){u.value=s,Object.assign(m,{position:s.position||"",salary:s.salary||"",rehire_date:new Date().toISOString().split("T")[0],notes:""}),await _e(s.id),U.value=!0}async function Oe(s){u.value=s,await _e(s.id),G.value=!0}async function we(){if(!y.end_date||!y.end_reason||!J()){b.commit("setMessage",{type:"error",text:"Please fix the validation errors"});return}f.value=!0;try{const s=new FormData;if(s.append("staff_id",u.value.id),s.append("end_date",y.end_date),s.append("end_reason",y.end_reason),s.append("notes",y.notes),s.append("status",y.end_reason==="Resignation"?"Resigned":"Terminated"),!(await fetch("/staffs/contracts/end",{method:"POST",body:s})).ok)throw new Error("Failed to end contract");M.value=!1,C(),b.commit("setMessage",{type:"success",text:`Contract ended for ${u.value.name}`})}catch(s){console.error(s),b.commit("setMessage",{type:"error",text:"Failed to end contract"})}finally{f.value=!1}}async function De(){if(!m.position||!m.salary||!m.rehire_date||!Q()){b.commit("setMessage",{type:"error",text:"Please fix the validation errors"});return}f.value=!0;try{const s=new FormData;if(s.append("staff_id",u.value.id),s.append("position",m.position),s.append("salary",m.salary),s.append("rehire_date",m.rehire_date),s.append("notes",m.notes),!(await fetch("/staffs/contracts/rehire",{method:"POST",body:s})).ok)throw new Error("Failed to rehire staff");U.value=!1,C(),b.commit("setMessage",{type:"success",text:`${u.value.name} rehired successfully`})}catch(s){console.error(s),b.commit("setMessage",{type:"error",text:"Failed to rehire staff"})}finally{f.value=!1}}async function je(){if(w.value.$touch(),w.value.$invalid||!Z())return;f.value=!0;const s=new FormData;s.append("name",d.name),s.append("phone",d.phone),s.append("position",d.position),s.append("salary",d.salary),s.append("status",d.status),s.append("hired_at",d.hired_at);const e=k.value?`/staffs/${ee.value}`:"/staffs",r=k.value?"PUT":"POST";try{if(!(await fetch(e,{method:r,body:s})).ok)throw new Error("Failed to save");E.value=!1,C(),b.commit("setMessage",{type:"success",text:k.value?"Staff updated!":"Staff added!"})}catch{b.commit("setMessage",{type:"error",text:"Failed to save staff"})}finally{f.value=!1}}async function Le(){f.value=!0;try{await fetch(`/staffs/${ee.value}`,{method:"DELETE"}),R.value=!1,E.value=!1,C(),b.commit("setMessage",{type:"success",text:"Staff deleted!"})}catch{b.commit("setMessage",{type:"error",text:"Failed to delete staff"})}finally{f.value=!1}}async function Ie(){await Ue(),z.value=!0}return ze(()=>C()),(s,e)=>{const r=Ke("VueDatePicker");return _(),x(Ye,{fluid:""},{default:l(()=>[t(D,{class:"pa-4 mb-4"},{default:l(()=>[t(Se,{dense:""},{default:l(()=>[t(q,{cols:"12",sm:"4"},{default:l(()=>[t(T,{modelValue:c.search,"onUpdate:modelValue":e[0]||(e[0]=a=>c.search=a),"append-inner-icon":"mdi-close-circle",clearable:"",label:"Search Staff Name","onClick:appendInner":e[1]||(e[1]=a=>c.search="")},null,8,["modelValue"])]),_:1}),t(q,{cols:"12",sm:"3"},{default:l(()=>[t(re,{modelValue:c.status,"onUpdate:modelValue":e[2]||(e[2]=a=>c.status=a),clearable:"",items:["Active","Resigned","Terminated"],label:"Filter by Status"},null,8,["modelValue"])]),_:1}),t(q,{cols:"12",sm:"3"},{default:l(()=>[t(r,{modelValue:c.hiredDate,"onUpdate:modelValue":e[3]||(e[3]=a=>c.hiredDate=a),"auto-apply":"",class:"flex-1 border rounded-lg px-2 py-1",format:"dd-MM-yyyy","model-type":"format",placeholder:"From",teleport:!0},null,8,["modelValue"])]),_:1}),t(q,{class:"d-flex justify-end",cols:"12"},{default:l(()=>[t(p,{color:"primary",onClick:He},{default:l(()=>[t(v,{start:""},{default:l(()=>e[35]||(e[35]=[o("mdi-filter")])),_:1}),e[36]||(e[36]=o(" Apply "))]),_:1}),t(p,{class:"ml-2",color:"grey",onClick:Ne},{default:l(()=>[t(v,{start:""},{default:l(()=>e[37]||(e[37]=[o("mdi-refresh")])),_:1}),e[38]||(e[38]=o(" Reset "))]),_:1})]),_:1})]),_:1})]),_:1}),V("div",tt,[e[43]||(e[43]=V("h3",null,"Staff Management",-1)),V("div",null,[s.$store.getters.hasTask("can_add_staffs")?(_(),x(p,{key:0,class:"text-white mr-2",color:"primary",size:"small",onClick:Pe},{default:l(()=>[t(v,{start:""},{default:l(()=>e[39]||(e[39]=[o("mdi-plus")])),_:1}),e[40]||(e[40]=o(" Add Staff "))]),_:1})):H("",!0),s.$store.getters.hasTask("can_see_staffs")?(_(),x(p,{key:1,class:"text-white mr-2",color:"secondary",size:"small",onClick:Ie},{default:l(()=>[t(v,{start:""},{default:l(()=>e[41]||(e[41]=[o("mdi-history")])),_:1}),e[42]||(e[42]=o(" Contract History "))]),_:1})):H("",!0)])]),t(Ze,{active:f.value,indeterminate:f.value},null,8,["active","indeterminate"]),t(ne,{class:"elevation-1",dense:"",headers:$e,items:ue.value,"items-per-page":10,loading:f.value},Je({"item.salary":l(({item:a})=>[o(i(K(a.salary)),1)]),"item.hired_at":l(({item:a})=>[o(i(S(a.hired_at)),1)]),"item.status":l(({item:a})=>[t(Y,{color:ve(a.status),label:"",size:"small"},{default:l(()=>[o(i(a.status),1)]),_:2},1032,["color"])]),_:2},[s.$store.getters.hasTask("can_edit_staffs")?{name:"item.actions",fn:l(({item:a})=>[t(v,{class:"mr-2",color:"info",title:"View Details",onClick:n=>Oe(a)},{default:l(()=>e[44]||(e[44]=[o(" mdi-eye ")])),_:2},1032,["onClick"]),a.status==="Active"?(_(),x(v,{key:0,class:"mr-2",color:"warning",title:"End Contract",onClick:n=>Ae(a)},{default:l(()=>e[45]||(e[45]=[o(" mdi-account-arrow-right ")])),_:2},1032,["onClick"])):(_(),x(v,{key:1,class:"mr-2",color:"success",title:"Rehire Staff",onClick:n=>qe(a)},{default:l(()=>e[46]||(e[46]=[o(" mdi-account-arrow-left ")])),_:2},1032,["onClick"])),t(v,{color:"primary",onClick:n=>Fe(a)},{default:l(()=>e[47]||(e[47]=[o(" mdi-square-edit-outline ")])),_:2},1032,["onClick"])]),key:"0"}:void 0]),1032,["items","loading"]),V("div",at,[t(et,{modelValue:j.value,"onUpdate:modelValue":[e[4]||(e[4]=a=>j.value=a),C],length:de.value,"total-visible":"7"},null,8,["modelValue","length"])]),t(O,{modelValue:E.value,"onUpdate:modelValue":e[14]||(e[14]=a=>E.value=a),"max-width":"600",transition:"dialog-top-transition"},{default:l(()=>[t(D,{class:"rounded-xl pa-4",elevation:"10"},{default:l(()=>[t(N,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:l(()=>[V("div",lt,[t(v,{class:"mr-2 text-white"},{default:l(()=>e[48]||(e[48]=[o("mdi-account")])),_:1}),V("span",st,i(k.value?"Edit Staff":"Add Staff"),1)]),t(Qe),t(p,{color:"white",icon:"mdi-close",onClick:e[5]||(e[5]=a=>E.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(ie,{onSubmit:e[12]||(e[12]=le(()=>{},["prevent"]))},{default:l(()=>{var a;return[t(T,{modelValue:d.name,"onUpdate:modelValue":e[6]||(e[6]=n=>d.name=n),"bg-color":"#E0E0E0","error-messages":$(w).name.$errors.map(n=>n.$message),label:"Full Name",required:"",onBlur:$(w).name.$touch},null,8,["modelValue","error-messages","onBlur"]),t(T,{modelValue:d.phone,"onUpdate:modelValue":e[7]||(e[7]=n=>d.phone=n),"bg-color":"#E0E0E0",label:"Phone Number"},null,8,["modelValue"]),t(T,{modelValue:d.position,"onUpdate:modelValue":e[8]||(e[8]=n=>d.position=n),"bg-color":"#E0E0E0",label:"Position"},null,8,["modelValue"]),t(T,{modelValue:d.salary,"onUpdate:modelValue":e[9]||(e[9]=n=>d.salary=n),"bg-color":"#E0E0E0","error-messages":$(w).salary.$errors.map(n=>n.$message),label:"Salary (TSh)",required:"",type:"number",onBlur:$(w).salary.$touch},null,8,["modelValue","error-messages","onBlur"]),V("div",ot,[e[49]||(e[49]=V("label",{class:"v-label text-body-2 mb-2"},"Hired Date *",-1)),t(r,{modelValue:d.hired_at,"onUpdate:modelValue":e[10]||(e[10]=n=>d.hired_at=n),"auto-apply":"",class:se({"datepicker-error":!Z()}),clearable:!1,"enable-time-picker":!1,format:"dd-MM-yyyy","max-date":new Date,"model-type":"format",placeholder:"Select Hire Date",required:"",teleport:!0},null,8,["modelValue","class","max-date"]),$(w).hired_at.$error||!Z()?(_(),B("div",rt,i(((a=$(w).hired_at.$errors[0])==null?void 0:a.$message)||pe.value),1)):H("",!0)]),t(re,{modelValue:d.status,"onUpdate:modelValue":e[11]||(e[11]=n=>d.status=n),"bg-color":"#E0E0E0",items:["Active","Resigned","Terminated"],label:"Status",required:""},null,8,["modelValue"])]}),_:1})]),_:1}),t(X,{class:"d-flex justify-end"},{default:l(()=>[t(p,{color:"success",disabled:$(w).$invalid||!Z(),loading:f.value,onClick:je},{default:l(()=>[t(v,{start:""},{default:l(()=>e[50]||(e[50]=[o("mdi-content-save")])),_:1}),o(" "+i(k.value?"Save Changes":"Add Staff"),1)]),_:1},8,["disabled","loading"]),k.value?(_(),x(p,{key:0,color:"error",onClick:e[13]||(e[13]=a=>R.value=!0)},{default:l(()=>[t(v,{start:""},{default:l(()=>e[51]||(e[51]=[o("mdi-delete")])),_:1}),e[52]||(e[52]=o(" Delete "))]),_:1})):H("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(O,{modelValue:M.value,"onUpdate:modelValue":e[20]||(e[20]=a=>M.value=a),"max-width":"500"},{default:l(()=>[t(D,null,{default:l(()=>[t(N,{color:"warning"},{default:l(()=>[t(W,null,{default:l(()=>{var a;return[o("End Contract - "+i((a=u.value)==null?void 0:a.name),1)]}),_:1}),t(p,{color:"white",icon:"mdi-close",onClick:e[15]||(e[15]=a=>M.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(ie,{onSubmit:le(we,["prevent"])},{default:l(()=>[V("div",nt,[e[53]||(e[53]=V("label",{class:"v-label text-body-2 mb-2"},"End Date *",-1)),t(r,{modelValue:y.end_date,"onUpdate:modelValue":e[16]||(e[16]=a=>y.end_date=a),"auto-apply":"",class:se({"datepicker-error":!J()}),clearable:!1,"enable-time-picker":!1,format:"dd-MM-yyyy","max-date":new Date,"min-date":Ve(),"model-type":"format",placeholder:"Select End Date",required:"",teleport:!0},null,8,["modelValue","class","max-date","min-date"]),J()?H("",!0):(_(),B("div",it,i(ye.value),1))]),t(re,{modelValue:y.end_reason,"onUpdate:modelValue":e[17]||(e[17]=a=>y.end_reason=a),items:["Resignation","Termination","Contract Expired","Mutual Agreement","Retirement","Other"],label:"Reason for Ending Contract *",required:""},null,8,["modelValue"]),t(he,{modelValue:y.notes,"onUpdate:modelValue":e[18]||(e[18]=a=>y.notes=a),label:"Additional Notes",placeholder:"Enter any additional details about the contract end...",rows:"3"},null,8,["modelValue"]),V("div",dt,[t(v,{class:"mr-1",small:""},{default:l(()=>e[54]||(e[54]=[o("mdi-information")])),_:1}),e[55]||(e[55]=o(" This will change the staff status to the selected reason and record the contract end. The staff can be rehired later if needed. "))])]),_:1})]),_:1}),t(X,{class:"d-flex justify-end"},{default:l(()=>[t(p,{color:"grey",onClick:e[19]||(e[19]=a=>M.value=!1)},{default:l(()=>e[56]||(e[56]=[o("Cancel")])),_:1}),t(p,{color:"warning",disabled:!J()||!y.end_reason,loading:f.value,onClick:we},{default:l(()=>[t(v,{start:""},{default:l(()=>e[57]||(e[57]=[o("mdi-account-arrow-right")])),_:1}),e[58]||(e[58]=o(" End Contract "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(O,{modelValue:U.value,"onUpdate:modelValue":e[27]||(e[27]=a=>U.value=a),"max-width":"500"},{default:l(()=>[t(D,null,{default:l(()=>[t(N,{color:"success"},{default:l(()=>[t(W,null,{default:l(()=>{var a;return[o("Rehire Staff - "+i((a=u.value)==null?void 0:a.name),1)]}),_:1}),t(p,{color:"white",icon:"mdi-close",onClick:e[21]||(e[21]=a=>U.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(ie,{onSubmit:le(De,["prevent"])},{default:l(()=>[t(T,{modelValue:m.position,"onUpdate:modelValue":e[22]||(e[22]=a=>m.position=a),label:"Position *",required:""},null,8,["modelValue"]),t(T,{modelValue:m.salary,"onUpdate:modelValue":e[23]||(e[23]=a=>m.salary=a),label:"Salary (TSh) *",required:"",type:"number"},null,8,["modelValue"]),V("div",ut,[e[59]||(e[59]=V("label",{class:"v-label text-body-2 mb-2"},"Rehire Date *",-1)),t(r,{modelValue:m.rehire_date,"onUpdate:modelValue":e[24]||(e[24]=a=>m.rehire_date=a),"auto-apply":"",class:se({"datepicker-error":!Q()}),clearable:!1,"enable-time-picker":!1,format:"dd-MM-yyyy","max-date":new Date,"min-date":be(),"model-type":"format",placeholder:"Select Rehire Date",required:"",teleport:!0},null,8,["modelValue","class","max-date","min-date"]),Q()?H("",!0):(_(),B("div",ft,i(ce.value),1))]),t(he,{modelValue:m.notes,"onUpdate:modelValue":e[25]||(e[25]=a=>m.notes=a),label:"Rehire Notes",placeholder:"Enter any notes about the rehire...",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),t(X,{class:"d-flex justify-end"},{default:l(()=>[t(p,{color:"grey",onClick:e[26]||(e[26]=a=>U.value=!1)},{default:l(()=>e[60]||(e[60]=[o("Cancel")])),_:1}),t(p,{color:"success",disabled:!m.position||!m.salary||!Q(),loading:f.value,onClick:De},{default:l(()=>[t(v,{start:""},{default:l(()=>e[61]||(e[61]=[o("mdi-account-arrow-left")])),_:1}),e[62]||(e[62]=o(" Rehire Staff "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(O,{modelValue:G.value,"onUpdate:modelValue":e[29]||(e[29]=a=>G.value=a),"max-width":"1000"},{default:l(()=>[t(D,null,{default:l(()=>[t(N,{color:"info"},{default:l(()=>[t(W,null,{default:l(()=>{var a;return[o("Staff Details - "+i((a=u.value)==null?void 0:a.name),1)]}),_:1}),t(p,{color:"white",icon:"mdi-close",onClick:e[28]||(e[28]=a=>G.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(D,{class:"mb-6",variant:"outlined"},{default:l(()=>[t(xe,{class:"text-h6"},{default:l(()=>[t(v,{class:"mr-2"},{default:l(()=>e[63]||(e[63]=[o("mdi-account")])),_:1}),e[64]||(e[64]=o(" Personal Information "))]),_:1}),t(h,null,{default:l(()=>[t(Se,null,{default:l(()=>[t(q,{cols:"6"},{default:l(()=>[t(Ce,null,{default:l(()=>[t(P,null,{default:l(()=>[t(F,{class:"font-weight-bold"},{default:l(()=>e[65]||(e[65]=[o("Name:")])),_:1}),t(A,null,{default:l(()=>{var a;return[o(i((a=u.value)==null?void 0:a.name),1)]}),_:1})]),_:1}),t(P,null,{default:l(()=>[t(F,{class:"font-weight-bold"},{default:l(()=>e[66]||(e[66]=[o("Phone:")])),_:1}),t(A,null,{default:l(()=>{var a;return[o(i(((a=u.value)==null?void 0:a.phone)||"Not provided"),1)]}),_:1})]),_:1}),t(P,null,{default:l(()=>[t(F,{class:"font-weight-bold"},{default:l(()=>e[67]||(e[67]=[o("Current Status:")])),_:1}),t(A,null,{default:l(()=>{var a;return[t(Y,{color:ve((a=u.value)==null?void 0:a.status),size:"small"},{default:l(()=>{var n;return[o(i((n=u.value)==null?void 0:n.status),1)]}),_:1},8,["color"])]}),_:1})]),_:1})]),_:1})]),_:1}),t(q,{cols:"6"},{default:l(()=>[t(Ce,null,{default:l(()=>[t(P,null,{default:l(()=>[t(F,{class:"font-weight-bold"},{default:l(()=>e[68]||(e[68]=[o("Position:")])),_:1}),t(A,null,{default:l(()=>{var a;return[o(i(((a=u.value)==null?void 0:a.position)||"Not specified"),1)]}),_:1})]),_:1}),t(P,null,{default:l(()=>[t(F,{class:"font-weight-bold"},{default:l(()=>e[69]||(e[69]=[o("Salary:")])),_:1}),t(A,null,{default:l(()=>{var a;return[o(i(K((a=u.value)==null?void 0:a.salary)),1)]}),_:1})]),_:1}),t(P,null,{default:l(()=>[t(F,{class:"font-weight-bold"},{default:l(()=>e[70]||(e[70]=[o("Last Hired Date:")])),_:1}),t(A,null,{default:l(()=>{var a;return[o(i(S((a=u.value)==null?void 0:a.hired_at)),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{variant:"outlined"},{default:l(()=>[t(xe,{class:"text-h6"},{default:l(()=>[t(v,{class:"mr-2"},{default:l(()=>e[71]||(e[71]=[o("mdi-history")])),_:1}),e[72]||(e[72]=o(" Contract History "))]),_:1}),t(h,null,{default:l(()=>[t(ne,{class:"elevation-1",headers:Re,items:me.value,loading:f.value},{"item.start_date":l(({item:a})=>[o(i(S(a.start_date)),1)]),"item.end_date":l(({item:a})=>[o(i(a.end_date?S(a.end_date):a.display_end_date),1)]),"item.salary":l(({item:a})=>[o(i(K(a.salary)),1)]),"item.end_reason":l(({item:a})=>[a.end_reason?(_(),x(Y,{key:0,color:ge(a.end_reason),size:"small"},{default:l(()=>[o(i(a.end_reason),1)]),_:2},1032,["color"])):(_(),B("span",mt,i(a.display_status),1))]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(O,{modelValue:z.value,"onUpdate:modelValue":e[31]||(e[31]=a=>z.value=a),width:"1000"},{default:l(()=>[t(D,null,{default:l(()=>[t(N,{color:"secondary"},{default:l(()=>[t(W,null,{default:l(()=>e[73]||(e[73]=[o("Staff Contract History")])),_:1}),t(p,{color:"white",icon:"mdi-close",onClick:e[30]||(e[30]=a=>z.value=!1)})]),_:1}),t(h,{class:"pt-6"},{default:l(()=>[t(ne,{class:"elevation-1",headers:Te,items:fe.value,loading:f.value},{"item.staff_name":l(({item:a})=>[V("strong",null,i(a.staff_name),1)]),"item.start_date":l(({item:a})=>[o(i(S(a.start_date)),1)]),"item.end_date":l(({item:a})=>[o(i(a.end_date?S(a.end_date):"Current"),1)]),"item.salary":l(({item:a})=>[o(i(K(a.salary)),1)]),"item.end_reason":l(({item:a})=>[a.end_reason?(_(),x(Y,{key:0,color:ge(a.end_reason),size:"small"},{default:l(()=>[o(i(a.end_reason),1)]),_:2},1032,["color"])):(_(),B("span",pt,"Active"))]),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(O,{modelValue:R.value,"onUpdate:modelValue":e[34]||(e[34]=a=>R.value=a),persistent:"",width:"400"},{default:l(()=>[t(D,null,{default:l(()=>[t(N,{color:"warning",title:"Confirm Deleting "+d.name},{default:l(()=>[t(p,{color:"white",icon:"mdi-close",onClick:e[32]||(e[32]=a=>R.value=!1)})]),_:1},8,["title"]),t(h,null,{default:l(()=>[o("Are you sure you want to delete "+i(d.name)+"?",1)]),_:1}),t(X,{class:"d-flex justify-end"},{default:l(()=>[t(p,{color:"grey",onClick:e[33]||(e[33]=a=>R.value=!1)},{default:l(()=>e[74]||(e[74]=[o("Cancel")])),_:1}),t(p,{color:"error",onClick:Le},{default:l(()=>e[75]||(e[75]=[o("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Tt=Be(ct,[["__scopeId","data-v-61287a23"]]);export{Tt as default};
