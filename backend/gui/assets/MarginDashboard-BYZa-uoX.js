import{E as z}from"./index-CRQ3hbes.js";import{_ as at,r as k,e as w,l as lt,d as ot,s as C,x as e,a1 as st,v as _,i as a,y as l,H as M,C as n,B as c,O as V,Q as it,A as E,I as d,E as S,aZ as F,R as $,aH as rt}from"./index-DM-_A7PE.js";import{V as nt}from"./VContainer-iWuqtKcr.js";import{V as m,b as p}from"./VCard-kZtgd9b4.js";import{V as x}from"./VCol-y2yuKi6R.js";import{V as B}from"./VAutocomplete-B0jwJp4m.js";import{V as P}from"./VChip-Cf2qyGJc.js";import{a as R}from"./VDataTable-BIUAbLMQ.js";import{V as L}from"./VSkeletonLoader-CHKKWuzU.js";import{u as dt,i as ut,c as ct,b as mt,a as pt,d as ft,e as gt,f as vt,g as xt}from"./install-DoKjw2Sc.js";import"./VTextField-DUiB6l3E.js";import"./VSlideGroup-RbVq-RBL.js";import"./dialog-transition-KjMsMB9n.js";const _t={class:"d-flex align-center justify-space-between"},yt={class:"d-flex align-center mb-4"},bt={class:"d-flex align-center mb-2"},ht={class:"d-flex align-center mb-2"},wt={class:"d-flex align-center mb-2"},St={class:"d-flex align-center mb-2"},kt={class:"d-flex justify-space-between align-center"},Pt={class:"text-caption text-grey"},Ct={class:"d-flex gap-2"},Vt={class:"d-flex align-center"},Dt={class:"text-h5 font-weight-bold text-green"},zt={class:"text-caption text-green"},Et={class:"d-flex align-center"},Ft={class:"text-h5 font-weight-bold text-red"},$t={class:"text-caption text-red"},At={class:"d-flex align-center"},Tt={class:"text-h5 font-weight-bold text-blue"},It={class:"text-caption text-blue"},Mt={class:"d-flex align-center"},Rt={class:"text-h5 font-weight-bold text-orange"},Lt={class:"text-caption text-orange"},Ot={class:"d-flex align-center mb-4"},Nt={key:1,class:"text-center py-8"},jt={key:2,class:"text-center py-8 text-grey"},Bt={class:"d-flex align-center mb-4"},Ut={key:1,class:"text-center py-8"},Wt={key:2,class:"text-center py-8 text-grey"},Ht={class:"d-flex align-center mb-4"},qt={key:1,class:"text-center py-8"},Qt={key:2,class:"text-center py-8 text-grey"},Zt={class:"d-flex align-center mb-4"},Kt={key:1,class:"text-center py-8"},Gt={key:2,class:"text-center py-8 text-grey"},Jt={class:"d-flex align-center justify-space-between mb-4"},Xt={class:"d-flex align-center"},Yt={class:"font-weight-medium"},te={class:"font-weight-medium text-green"},ee={class:"font-weight-medium text-green"},ae={class:"d-flex align-center justify-space-between mb-4"},le={class:"d-flex align-center"},oe={class:"font-weight-medium"},se={class:"text-caption"},ie={class:"font-weight-medium text-blue"},re={class:"d-flex align-center justify-space-between mb-4"},ne={class:"d-flex align-center"},de={class:"font-weight-medium"},ue={class:"font-weight-medium text-red"},ce={class:"text-caption text-white"},me={__name:"MarginDashboard",setup(pe){dt([ut,ct,mt,pt,ft,gt,vt,xt]);const v=k(!1),O=k([]),N=k([]),g=k({}),f=k({}),h=k({}),y=k({start_date:new Date().toISOString().split("T")[0].replace(/(\d{4})-(\d{2})-(\d{2})/,"$1-$2-01"),end_date:new Date().toISOString().split("T")[0],product_id:null,outlet_id:null}),U=[{title:"Product",key:"product_name",sortable:!0},{title:"Quantity",key:"total_qty",sortable:!0,align:"center"},{title:"Total Sales",key:"total_sales",sortable:!0,align:"end"},{title:"Paid Amount",key:"total_paid",sortable:!0,align:"end"},{title:"Payment Rate",key:"payment_rate",sortable:!0,align:"center"}],W=[{title:"Ingredient",key:"ingredient_name",sortable:!0},{title:"Quantity Used",key:"total_consumed",sortable:!0,align:"center"},{title:"Avg Price",key:"avg_price",sortable:!0,align:"end"},{title:"Total Cost",key:"total_cost",sortable:!0,align:"end"}],H=[{title:"Expenditure Type",key:"type_name",sortable:!0},{title:"Total Amount",key:"total_amount",sortable:!0,align:"end"},{title:"Percentage",key:"percentage",sortable:!0,align:"center",width:"200px"}],D=w(()=>{const i=g.value.total_sales_amount||0,t=f.value.totalExpenditure||0,s=h.value.totalIngredientCost||0;return i-t-s}),A=w(()=>{const i=g.value.total_sales_amount||0;return i===0?0:(D.value/i*100).toFixed(1)}),j=w(()=>g.value.total_sales_amount>0||f.value.totalExpenditure>0||h.value.totalIngredientCost>0),q=w(()=>g.value.data&&g.value.data.length>0),Q=w(()=>f.value.data&&f.value.data.length>0),Z=w(()=>{const i=g.value.total_sales_amount||0,t=f.value.totalExpenditure||0,s=h.value.totalIngredientCost||0,o=D.value;return{title:{text:"Financial Performance Overview",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:r=>{let b="<b>Financial Overview</b><br/>";return r.forEach(I=>{b+=`${I.marker} ${I.seriesName}: ${u(I.value)}<br/>`}),b}},legend:{data:["Sales Revenue","Total Expenditure","Production Cost","Profit Margin"],top:"10%"},grid:{left:"3%",right:"4%",bottom:"3%",top:"20%",containLabel:!0},xAxis:{type:"category",data:["Performance"],axisLabel:{fontSize:12}},yAxis:{type:"value",axisLabel:{formatter:r=>r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(0)+"K":r}},series:[{name:"Sales Revenue",type:"bar",data:[i],itemStyle:{color:"#4CAF50"},label:{show:!0,position:"top",formatter:r=>u(r.value)}},{name:"Total Expenditure",type:"bar",data:[t],itemStyle:{color:"#F44336"},label:{show:!0,position:"top",formatter:r=>u(r.value)}},{name:"Production Cost",type:"bar",data:[s],itemStyle:{color:"#2196F3"},label:{show:!0,position:"top",formatter:r=>u(r.value)}},{name:"Profit Margin",type:"bar",data:[o],itemStyle:{color:o>=0?"#FF9800":"#FF5722"},label:{show:!0,position:"top",formatter:r=>u(r.value)}}]}}),K=w(()=>{const i=parseFloat(A.value);return{title:{text:"Profit Margin %",left:"center",top:"10%",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{formatter:"Profit Margin: {c}%"},series:[{type:"gauge",center:["50%","60%"],startAngle:180,endAngle:0,min:-50,max:50,splitNumber:10,itemStyle:{color:i>=0?"#FF9800":"#FF5722"},progress:{show:!0,width:30},pointer:{show:!1},axisLine:{lineStyle:{width:30,color:[[.3,"#FF6B6B"],[.7,"#FFE66D"],[1,"#4ECDC4"]]}},axisTick:{distance:-45,splitNumber:5,lineStyle:{width:2,color:"#999"}},splitLine:{distance:-52,length:14,lineStyle:{width:3,color:"#999"}},axisLabel:{distance:-20,color:"#999",fontSize:12},anchor:{show:!1},title:{show:!1},detail:{valueAnimation:!0,width:"60%",lineHeight:40,borderRadius:8,offsetCenter:[0,"-15%"],fontSize:30,fontWeight:"bolder",formatter:"{value}%",color:"inherit"},data:[{value:i}]}]}}),G=w(()=>{var t;const i=((t=f.value.data)==null?void 0:t.map(s=>({name:s.type_name,value:s.total_amount})))||[];return{title:{text:"Expenditure Distribution",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:s=>`
          <b>${s.name}</b><br/>
          ${s.marker} ${u(s.value)}<br/>
          ${s.percent}%
        `},legend:{orient:"vertical",right:10,top:"center",formatter:s=>{var r;const o=(r=f.value.data)==null?void 0:r.find(b=>b.type_name===s);return o?`${s}
${u(o.total_amount)}`:s},textStyle:{fontSize:10}},series:[{name:"Expenditure",type:"pie",radius:["40%","70%"],center:["40%","50%"],avoidLabelOverlap:!1,itemStyle:{borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"14",fontWeight:"bold",formatter:s=>`${s.name}
${u(s.value)}
${s.percent}%`}},labelLine:{show:!1},data:i}]}}),J=w(()=>{var t;const i=((t=g.value.data)==null?void 0:t.slice().sort((s,o)=>o.total_sales-s.total_sales).slice(0,8))||[];return{title:{text:"Top Selling Products",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:s=>{const o=s[0],r=i[o.dataIndex];return`
          <b>${r.product_name}</b><br/>
          Sales: ${u(r.total_sales)}<br/>
          Quantity: ${r.total_qty}<br/>
          Paid: ${u(r.total_paid)}<br/>
          Payment Rate: ${r.payment_rate}%
        `}},grid:{left:"3%",right:"4%",bottom:"3%",top:"15%",containLabel:!0},xAxis:{type:"value",axisLabel:{formatter:s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(0)+"K":s}},yAxis:{type:"category",data:i.map(s=>s.product_name),axisLabel:{fontSize:10}},series:[{name:"Sales Amount",type:"bar",data:i.map(s=>s.total_sales),itemStyle:{color:"#4CAF50"},label:{show:!0,position:"right",formatter:s=>u(s.value)}}]}});function u(i){return i?new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(i):"TZS 0"}function X(i){return i>=90?"green":i>=75?"orange":"red"}function Y(){y.value={start_date:new Date().toISOString().split("T")[0].replace(/(\d{4})-(\d{2})-(\d{2})/,"$1-$2-01"),end_date:new Date().toISOString().split("T")[0],product_id:null,outlet_id:null},T()}async function T(){v.value=!0;try{const i=new URLSearchParams;Object.entries(y.value).forEach(([r,b])=>{b&&i.append(r,b)});const[t,s,o]=await Promise.all([fetch(`/reports/salesByProduct?${i}`),fetch(`/reports/expenditureByType?${i}`),fetch(`/reports/productionIngredientsCost?${i}`)]);if(!t.ok)throw new Error("Sales API failed");if(!s.ok)throw new Error("Expenditure API failed");if(!o.ok)throw new Error("Production API failed");if(g.value=await t.json(),f.value=await s.json(),h.value=await o.json(),f.value.data){const r=f.value.totalExpenditure;f.value.data.forEach(b=>{b.percentage=r>0?b.total_amount/r*100:0})}g.value.data&&g.value.data.forEach(r=>{r.payment_rate=r.total_sales>0?Math.round(r.total_paid/r.total_sales*100):0})}catch(i){console.error("Failed to load dashboard data:",i)}finally{v.value=!1}}function tt(){const i={filters:y.value,sales:g.value,expenditure:f.value,production:h.value,profitMargin:D.value,profitMarginPercentage:A.value},t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,2)),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download",`dashboard-export-${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(s),s.click(),s.remove()}async function et(){try{const[i,t]=await Promise.all([fetch("/products?limit=1000"),fetch("/outlets?limit=1000")]);if(i.ok){const s=await i.json();O.value=s.data||[]}if(t.ok){const s=await t.json();N.value=s.data||[]}}catch(i){console.error("Failed to load reference data:",i)}}return lt(async()=>{await et(),await T()}),ot(()=>[...Object.values(y.value)],()=>{},{deep:!0}),(i,t)=>{const s=st("VueDatePicker");return _(),C(nt,{class:"dashboard-container",fluid:""},{default:e(()=>[a(m,{class:"mb-6",elevation:"2",rounded:"lg"},{default:e(()=>[a(p,{class:"pa-6"},{default:e(()=>[l("div",_t,[t[6]||(t[6]=l("div",null,[l("h1",{class:"text-h4 font-weight-bold text-primary mb-2"}," Bakery Dashboard "),l("p",{class:"text-body-1 text-grey"}," Comprehensive overview of sales, expenditures, and production performance ")],-1)),a(M,{class:"px-6",color:"primary",elevation:"2",size:"large",onClick:tt},{default:e(()=>[a(c,{size:"20",start:""},{default:e(()=>t[4]||(t[4]=[n("mdi-file-export")])),_:1}),t[5]||(t[5]=n(" Export Report "))]),_:1})])]),_:1})]),_:1}),a(m,{class:"mb-6",elevation:"2",rounded:"lg"},{default:e(()=>[a(p,{class:"pa-6"},{default:e(()=>[l("div",yt,[a(c,{class:"mr-2",color:"primary"},{default:e(()=>t[7]||(t[7]=[n("mdi-filter")])),_:1}),t[8]||(t[8]=l("h3",{class:"text-h6 font-weight-medium"},"Dashboard Filters",-1))]),a(V,{dense:""},{default:e(()=>[a(x,{cols:"12",md:"3"},{default:e(()=>[a(m,{border:"",class:"rounded-lg",variant:"outlined"},{default:e(()=>[a(p,{class:"pa-3"},{default:e(()=>[l("div",bt,[a(c,{class:"mr-2",color:"green",size:"18"},{default:e(()=>t[9]||(t[9]=[n("mdi-calendar")])),_:1}),t[10]||(t[10]=l("label",{class:"text-caption font-weight-medium text-primary"},"Start Date",-1))]),a(s,{modelValue:y.value.start_date,"onUpdate:modelValue":t[0]||(t[0]=o=>y.value.start_date=o),"auto-apply":"",format:"yyyy-MM-dd","model-type":"format",placeholder:"Start Date",teleport:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",md:"3"},{default:e(()=>[a(m,{border:"",class:"rounded-lg",variant:"outlined"},{default:e(()=>[a(p,{class:"pa-3"},{default:e(()=>[l("div",ht,[a(c,{class:"mr-2",color:"red",size:"18"},{default:e(()=>t[11]||(t[11]=[n("mdi-calendar")])),_:1}),t[12]||(t[12]=l("label",{class:"text-caption font-weight-medium text-primary"},"End Date",-1))]),a(s,{modelValue:y.value.end_date,"onUpdate:modelValue":t[1]||(t[1]=o=>y.value.end_date=o),"auto-apply":"",format:"yyyy-MM-dd","model-type":"format",placeholder:"End Date",teleport:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",md:"3"},{default:e(()=>[a(m,{border:"",class:"rounded-lg",variant:"outlined"},{default:e(()=>[a(p,{class:"pa-3"},{default:e(()=>[l("div",wt,[a(c,{class:"mr-2",color:"blue",size:"18"},{default:e(()=>t[13]||(t[13]=[n("mdi-package-variant")])),_:1}),t[14]||(t[14]=l("label",{class:"text-caption font-weight-medium text-primary"},"Product",-1))]),a(B,{modelValue:y.value.product_id,"onUpdate:modelValue":t[2]||(t[2]=o=>y.value.product_id=o),clearable:"",color:"primary",density:"compact","hide-details":"","item-title":"name","item-value":"id",items:O.value,placeholder:"All Products",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",md:"3"},{default:e(()=>[a(m,{border:"",class:"rounded-lg",variant:"outlined"},{default:e(()=>[a(p,{class:"pa-3"},{default:e(()=>[l("div",St,[a(c,{class:"mr-2",color:"purple",size:"18"},{default:e(()=>t[15]||(t[15]=[n("mdi-store")])),_:1}),t[16]||(t[16]=l("label",{class:"text-caption font-weight-medium text-primary"},"Outlet",-1))]),a(B,{modelValue:y.value.outlet_id,"onUpdate:modelValue":t[3]||(t[3]=o=>y.value.outlet_id=o),clearable:"",color:"primary",density:"compact","hide-details":"","item-title":"name","item-value":"id",items:N.value,placeholder:"All Outlets",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),a(it,{class:"my-4"}),l("div",kt,[l("div",Pt,[a(c,{class:"mr-1",size:"14"},{default:e(()=>t[17]||(t[17]=[n("mdi-information")])),_:1}),t[18]||(t[18]=n(" Apply filters to update dashboard data "))]),l("div",Ct,[a(M,{class:"px-4",color:"grey",size:"small",variant:"outlined",onClick:Y},{default:e(()=>[a(c,{size:"18",start:""},{default:e(()=>t[19]||(t[19]=[n("mdi-refresh")])),_:1}),t[20]||(t[20]=n(" Reset "))]),_:1}),a(M,{class:"px-4",color:"primary",elevation:"2",loading:v.value,size:"small",onClick:T},{default:e(()=>[a(c,{size:"18",start:""},{default:e(()=>t[21]||(t[21]=[n("mdi-chart-bar")])),_:1}),t[22]||(t[22]=n(" Apply Filters "))]),_:1},8,["loading"])])])]),_:1})]),_:1}),a(V,{class:"mb-6"},{default:e(()=>[a(x,{cols:"12",md:"3",sm:"6"},{default:e(()=>[a(m,{border:"",class:"kpi-card",elevation:"2",rounded:"lg"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",Vt,[a(E,{class:"mr-3",color:"green-lighten-5",size:"48"},{default:e(()=>[a(c,{color:"green",size:"24"},{default:e(()=>t[23]||(t[23]=[n("mdi-cash")])),_:1})]),_:1}),l("div",null,[l("div",Dt,d(u(g.value.total_sales_amount||0)),1),t[24]||(t[24]=l("div",{class:"text-caption text-grey"},"Total Sales",-1)),l("div",zt,d(u(g.value.total_paid_amount||0))+" Paid ",1)])])]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",md:"3",sm:"6"},{default:e(()=>[a(m,{border:"",class:"kpi-card",elevation:"2",rounded:"lg"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>{var o;return[l("div",Et,[a(E,{class:"mr-3",color:"red-lighten-5",size:"48"},{default:e(()=>[a(c,{color:"red",size:"24"},{default:e(()=>t[25]||(t[25]=[n("mdi-cash-remove")])),_:1})]),_:1}),l("div",null,[l("div",Ft,d(u(f.value.totalExpenditure||0)),1),t[26]||(t[26]=l("div",{class:"text-caption text-grey"},"Total Expenditure",-1)),l("div",$t,d(((o=f.value.data)==null?void 0:o.length)||0)+" Categories ",1)])])]}),_:1})]),_:1})]),_:1}),a(x,{cols:"12",md:"3",sm:"6"},{default:e(()=>[a(m,{border:"",class:"kpi-card",elevation:"2",rounded:"lg"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>{var o;return[l("div",At,[a(E,{class:"mr-3",color:"blue-lighten-5",size:"48"},{default:e(()=>[a(c,{color:"blue",size:"24"},{default:e(()=>t[27]||(t[27]=[n("mdi-factory")])),_:1})]),_:1}),l("div",null,[l("div",Tt,d(u(h.value.totalIngredientCost||0)),1),t[28]||(t[28]=l("div",{class:"text-caption text-grey"},"Production Cost",-1)),l("div",It,d(((o=h.value.data)==null?void 0:o.length)||0)+" Ingredients ",1)])])]}),_:1})]),_:1})]),_:1}),a(x,{cols:"12",md:"3",sm:"6"},{default:e(()=>[a(m,{border:"",class:"kpi-card",elevation:"2",rounded:"lg"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",Mt,[a(E,{class:"mr-3",color:"orange-lighten-5",size:"48"},{default:e(()=>[a(c,{color:"orange",size:"24"},{default:e(()=>t[29]||(t[29]=[n("mdi-chart-line")])),_:1})]),_:1}),l("div",null,[l("div",Rt,d(u(D.value)),1),t[30]||(t[30]=l("div",{class:"text-caption text-grey"},"Profit Margin",-1)),l("div",Lt,d(A.value)+"% ",1)])])]),_:1})]),_:1})]),_:1})]),_:1}),a(V,{class:"mb-6"},{default:e(()=>[a(x,{cols:"12",lg:"8"},{default:e(()=>[a(m,{class:"rounded-lg",elevation:"2"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",Ot,[a(c,{class:"mr-2",color:"primary"},{default:e(()=>t[31]||(t[31]=[n("mdi-chart-bar")])),_:1}),t[32]||(t[32]=l("h4",{class:"text-h6 font-weight-medium"}," Cost vs Revenue Analysis ",-1))]),!v.value&&j.value?(_(),C(F(z),{key:0,option:Z.value,style:{height:"400px",width:"100%"}},null,8,["option"])):v.value?(_(),S("div",Nt,[a($,{color:"primary",indeterminate:""}),t[33]||(t[33]=l("div",{class:"mt-2 text-caption text-grey"}," Loading chart data... ",-1))])):(_(),S("div",jt," No data available for the selected period "))]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",lg:"4"},{default:e(()=>[a(m,{class:"rounded-lg",elevation:"2"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",Bt,[a(c,{class:"mr-2",color:"orange"},{default:e(()=>t[34]||(t[34]=[n("mdi-gauge")])),_:1}),t[35]||(t[35]=l("h4",{class:"text-h6 font-weight-medium"},"Profit Margin",-1))]),!v.value&&j.value?(_(),C(F(z),{key:0,option:K.value,style:{height:"400px",width:"100%"}},null,8,["option"])):v.value?(_(),S("div",Ut,[a($,{color:"orange",indeterminate:""}),t[36]||(t[36]=l("div",{class:"mt-2 text-caption text-grey"}," Loading chart data... ",-1))])):(_(),S("div",Wt," No data available for the selected period "))]),_:1})]),_:1})]),_:1})]),_:1}),a(V,{class:"mb-6"},{default:e(()=>[a(x,{cols:"12",lg:"6"},{default:e(()=>[a(m,{class:"rounded-lg",elevation:"2"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",Ht,[a(c,{class:"mr-2",color:"red"},{default:e(()=>t[37]||(t[37]=[n("mdi-chart-pie")])),_:1}),t[38]||(t[38]=l("h4",{class:"text-h6 font-weight-medium"},"Expenditure Breakdown",-1))]),!v.value&&Q.value?(_(),C(F(z),{key:0,option:G.value,style:{height:"400px",width:"100%"}},null,8,["option"])):v.value?(_(),S("div",qt,[a($,{color:"red",indeterminate:""}),t[39]||(t[39]=l("div",{class:"mt-2 text-caption text-grey"}," Loading chart data... ",-1))])):(_(),S("div",Qt," No expenditure data available "))]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",lg:"6"},{default:e(()=>[a(m,{class:"rounded-lg",elevation:"2"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",Zt,[a(c,{class:"mr-2",color:"green"},{default:e(()=>t[40]||(t[40]=[n("mdi-chart-bar")])),_:1}),t[41]||(t[41]=l("h4",{class:"text-h6 font-weight-medium"},"Top Selling Products",-1))]),!v.value&&q.value?(_(),C(F(z),{key:0,option:J.value,style:{height:"400px",width:"100%"}},null,8,["option"])):v.value?(_(),S("div",Kt,[a($,{color:"green",indeterminate:""}),t[42]||(t[42]=l("div",{class:"mt-2 text-caption text-grey"}," Loading chart data... ",-1))])):(_(),S("div",Gt," No sales data available "))]),_:1})]),_:1})]),_:1})]),_:1}),a(V,{class:"mb-6"},{default:e(()=>[a(x,{cols:"12",lg:"6"},{default:e(()=>[a(m,{class:"rounded-lg",elevation:"2"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",Jt,[l("div",Xt,[a(c,{class:"mr-2",color:"green"},{default:e(()=>t[43]||(t[43]=[n("mdi-cash-multiple")])),_:1}),t[44]||(t[44]=l("h4",{class:"text-h6 font-weight-medium"},"Sales by Product",-1))]),a(P,{color:"green",size:"small",variant:"flat"},{default:e(()=>{var o;return[n(d(((o=g.value.data)==null?void 0:o.length)||0)+" Products ",1)]}),_:1})]),a(R,{density:"comfortable",headers:U,"hide-default-footer":"",items:g.value.data||[],loading:v.value},{loading:e(()=>[a(L,{type:"table-row@5"})]),"item.product_name":e(({item:o})=>[l("div",Yt,d(o.product_name),1)]),"item.total_qty":e(({item:o})=>[a(P,{color:"blue",size:"small",variant:"outlined"},{default:e(()=>[n(d(o.total_qty),1)]),_:2},1024)]),"item.total_sales":e(({item:o})=>[l("div",te,d(u(o.total_sales)),1)]),"item.total_paid":e(({item:o})=>[l("div",ee,d(u(o.total_paid)),1)]),"item.payment_rate":e(({item:o})=>[a(P,{color:X(o.payment_rate),size:"small",variant:"flat"},{default:e(()=>[n(d(o.payment_rate)+"% ",1)]),_:2},1032,["color"])]),"no-data":e(()=>t[45]||(t[45]=[l("div",{class:"text-center py-4 text-grey"}," No sales data available for the selected period ",-1)])),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1}),a(x,{cols:"12",lg:"6"},{default:e(()=>[a(m,{class:"rounded-lg",elevation:"2"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",ae,[l("div",le,[a(c,{class:"mr-2",color:"blue"},{default:e(()=>t[46]||(t[46]=[n("mdi-ingredient")])),_:1}),t[47]||(t[47]=l("h4",{class:"text-h6 font-weight-medium"}," Production Ingredients Cost ",-1))]),a(P,{color:"blue",size:"small",variant:"flat"},{default:e(()=>{var o;return[n(d(((o=h.value.data)==null?void 0:o.length)||0)+" Ingredients ",1)]}),_:1})]),a(R,{density:"comfortable",headers:W,"hide-default-footer":"",items:h.value.data||[],loading:v.value},{loading:e(()=>[a(L,{type:"table-row@5"})]),"item.ingredient_name":e(({item:o})=>[l("div",oe,d(o.ingredient_name),1)]),"item.total_consumed":e(({item:o})=>[a(P,{color:"blue-grey",size:"small",variant:"outlined"},{default:e(()=>[n(d(o.total_consumed),1)]),_:2},1024)]),"item.avg_price":e(({item:o})=>[l("div",se,d(u(o.avg_price)),1)]),"item.total_cost":e(({item:o})=>[l("div",ie,d(u(o.total_cost)),1)]),"no-data":e(()=>t[48]||(t[48]=[l("div",{class:"text-center py-4 text-grey"}," No production data available for the selected period ",-1)])),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),a(m,{class:"mb-6",elevation:"2",rounded:"lg"},{default:e(()=>[a(p,{class:"pa-4"},{default:e(()=>[l("div",re,[l("div",ne,[a(c,{class:"mr-2",color:"red"},{default:e(()=>t[49]||(t[49]=[n("mdi-cash-remove")])),_:1}),t[50]||(t[50]=l("h4",{class:"text-h6 font-weight-medium"},"Expenditure by Type",-1))]),a(P,{color:"red",size:"small",variant:"flat"},{default:e(()=>[n(" Total: "+d(u(f.value.totalExpenditure||0)),1)]),_:1})]),a(R,{density:"comfortable",headers:H,"hide-default-footer":"",items:f.value.data||[],loading:v.value},{loading:e(()=>[a(L,{type:"table-row@5"})]),"item.type_name":e(({item:o})=>[l("div",de,d(o.type_name),1)]),"item.total_amount":e(({item:o})=>[l("div",ue,d(u(o.total_amount)),1)]),"item.percentage":e(({item:o})=>[a(rt,{color:"red",height:"8","model-value":o.percentage,rounded:""},{default:e(()=>[l("span",ce,d(o.percentage.toFixed(1))+"%",1)]),_:2},1032,["model-value"])]),"no-data":e(()=>t[51]||(t[51]=[l("div",{class:"text-center py-4 text-grey"}," No expenditure data available for the selected period ",-1)])),_:1},8,["items","loading"])]),_:1})]),_:1})]),_:1})}}},Ve=at(me,[["__scopeId","data-v-0b6ff427"]]);export{Ve as default};
