import{_ as H,s as Y,x as d,r as m,$ as G,e as K,l as Q,a0 as W,v as X,i as o,y as p,a4 as y,B as g,C as i,I as u,D as E,H as f,a5 as Z,a3 as _}from"./index-Bnk5GYx6.js";import{u as ee,r as B,e as ae}from"./index-BgPRxr-N.js";import{V as le}from"./VContainer-koWnkz3S.js";import{V as q}from"./VDialog-GawDINYk.js";import{V as U,b as k}from"./VCard-CKmrYMwT.js";import{V as v}from"./VTextField--7_D2srZ.js";import{V as D}from"./VAutocomplete-GgNWZZY1.js";import{a as oe}from"./VDataTable-DEKetQXu.js";import"./dialog-transition-BvwwzNa3.js";import"./VChip-CYyzfqzx.js";import"./VSlideGroup-DPO1REek.js";const te={setup(){const t=W(),a=m(!1),b=m(!1),e=m(!1),C=m([]),I=m([]),l=m([]),M=m([]),w=m({}),P=m([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Email",key:"email"},{title:"MDA",key:"mda"},{title:"Dev Partner",key:"dev_partner"},{title:"Role",key:"role"},{title:"Edit",key:"edit"}]),j=m(!1),h=m(!1),x=m(!1),s=G({name:"",title:"",email:"",phone:"",mda:"",dev_partner:"",role:"",password:""}),N={name:{required:B},email:{required:B,email:ae},phone:{required:B},role:{required:B},password:{required:B}},T=K(()=>!s.mda&&!s.dev_partner?"Either MDA or Development Partner must be selected":s.mda&&s.dev_partner?"You cant select both MDA and Dev Partners":""),F=ee(N,s);function V(){b.value=!0,fetch("/users/getUsers").then(r=>{r.json().then(n=>{b.value=!1,C.value=n}).catch(()=>{b.value=!1})}).catch(()=>{a.value=!1})}function A(){a.value=!0,fetch("/devPartners/getDevPartner").then(r=>{r.json().then(n=>{a.value=!1,I.value=n}).catch(()=>{a.value=!1})}).catch(()=>{a.value=!1})}function $(){a.value=!0,fetch("/mda/getMDA").then(r=>{r.json().then(n=>{a.value=!1,l.value=n}).catch(()=>{a.value=!1})}).catch(()=>{a.value=!1})}function S(){a.value=!0,fetch("/users/getRoles").then(r=>{r.json().then(n=>{a.value=!1,M.value=n}).catch(()=>{a.value=!1})}).catch(()=>{a.value=!1})}function z(){F.value.name.$touch(),j.value=!0,s.name="",s.title="",s.email="",s.phone="",s.mda="",s.dev_partner="",s.role=""}function O(r){w.value=JSON.parse(JSON.stringify(r)),h.value=!0,s.name=r.name,s.title=r.title,s.email=r.email,s.phone=r.phone,s.mda=r.mdaid,s.dev_partner=r.dev_partnerid,s.role=r.roleid,s.password="unchangedpassword"}function R(){a.value=!0;const r=new FormData;r.append("name",s.name),r.append("title",s.title),r.append("email",s.email),r.append("phone",s.phone),r.append("mda",s.mda),r.append("dev_partner",s.dev_partner),r.append("role",s.role),r.append("password",s.password),fetch("/users/addUser",{body:r,method:"POST"}).then(n=>{a.value=!1,j.value=!1,n.status!==200&&n.status!==201?n.json().then(c=>{t.commit("setMessage",{type:"error",text:"Failed to save User! "+c.error,timeout:2e3})}):n.json().then(()=>{V(),t.commit("setMessage",{type:"primary",text:"User saved successfully!",timeout:2e3})})}).catch(n=>{a.value=!1,t.commit("setMessage",{type:"error",text:"Failed to save User!",timeout:2e3}),console.error("Error:",n)})}function J(){a.value=!0;const r=new FormData;r.append("name",s.name),r.append("title",s.title),r.append("email",s.email),r.append("phone",s.phone),r.append("mda",s.mda),r.append("dev_partner",s.dev_partner),r.append("role",s.role),r.append("password",s.password),fetch("/users/editUser/"+w.value.id,{body:r,method:"POST"}).then(n=>{a.value=!1,h.value=!1,n.status!==200&&n.status!==201?n.json().then(c=>{t.commit("setMessage",{type:"error",text:"Failed to edit User! "+c.error,timeout:2e3})}):n.json().then(()=>{V(),t.commit("setMessage",{type:"primary",text:"User edited successfully!",timeout:2e3})})}).catch(n=>{a.value=!1,t.commit("setMessage",{type:"error",text:"Failed to edit User!",timeout:2e3}),console.error("Error:",n)})}function L(){a.value=!0;const r=new FormData;x.value=!1,fetch("/users/deleteUser/"+w.value.id,{body:r,method:"DELETE"}).then(n=>{a.value=!1,h.value=!1,n.status!==200&&n.status!==201?n.json().then(c=>{t.commit("setMessage",{type:"error",text:"Failed to delete User! "+c.error,timeout:2e3})}):n.json().then(()=>{V(),t.commit("setMessage",{type:"primary",text:"User delete successfully!",timeout:2e3})})}).catch(n=>{a.value=!1,t.commit("setMessage",{type:"error",text:"Failed to delete User!",timeout:2e3}),console.error("Error:",n)})}return Q(()=>{V(),A(),$(),S()}),{loading:a,loadingValues:b,values:C,headers:P,addDialog:j,editDialog:h,state:s,v$:F,editingItem:w,confirmDeleteDialog:x,dev_partners:I,mdas:l,roles:M,password_show:e,mdaordev_partner:T,loadValues:V,activateAddDialog:z,activateEditDialog:O,create:R,saveEdit:J,remove:L}}},re={class:"d-flex align-center flex-wrap"},se={class:"text-white font-weight-bold text-h6"},de={class:"d-flex justify-end"},ne={class:"d-flex align-center flex-wrap"},ie={class:"text-white font-weight-bold text-h6"},me={class:"d-flex justify-end justify-space-between"},ue={class:"d-flex justify-end justify-space-between"};function ve(t,a,b,e,C,I){return X(),Y(le,{fluid:""},{default:d(()=>[o(q,{modelValue:e.addDialog,"onUpdate:modelValue":a[10]||(a[10]=l=>e.addDialog=l),transition:"dialog-top-transition",width:"auto"},{default:d(()=>[o(U,{class:"rounded-xl pa-4",elevation:"10"},{default:d(()=>[o(y,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:d(()=>[p("div",re,[o(g,{class:"mr-2 text-white"},{default:d(()=>a[27]||(a[27]=[i("mdi-account")])),_:1}),p("span",se,u(t.$t("addUser")),1)]),o(E),o(f,{color:"white",icon:"mdi-close",onClick:a[0]||(a[0]=l=>e.addDialog=!1)})]),_:1}),o(k,{class:"pt-6"},{default:d(()=>[o(v,{modelValue:e.state.name,"onUpdate:modelValue":a[1]||(a[1]=l=>e.state.name=l),"bg-color":"#BDBDBD","error-messages":e.v$.name.$errors.map(l=>l.$message),label:t.$t("fullName"),required:"",onBlur:e.v$.name.$touch,onInput:e.v$.name.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),o(v,{modelValue:e.state.title,"onUpdate:modelValue":a[2]||(a[2]=l=>e.state.title=l),"bg-color":"#BDBDBD",label:t.$t("title")},null,8,["modelValue","label"]),o(v,{modelValue:e.state.email,"onUpdate:modelValue":a[3]||(a[3]=l=>e.state.email=l),"bg-color":"#BDBDBD","error-messages":e.v$.email.$errors.map(l=>l.$message),label:t.$t("email"),required:"",onBlur:e.v$.email.$touch,onInput:e.v$.email.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),o(v,{modelValue:e.state.phone,"onUpdate:modelValue":a[4]||(a[4]=l=>e.state.phone=l),"bg-color":"#BDBDBD","error-messages":e.v$.phone.$errors.map(l=>l.$message),label:t.$t("phoneNumber"),required:"",onBlur:e.v$.phone.$touch,onInput:e.v$.phone.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),o(D,{modelValue:e.state.mda,"onUpdate:modelValue":a[5]||(a[5]=l=>e.state.mda=l),"bg-color":"#BDBDBD",clearable:"","error-messages":e.mdaordev_partner,"item-title":"name","item-value":"id",items:e.mdas,label:t.$t("mda")},null,8,["modelValue","error-messages","items","label"]),o(D,{modelValue:e.state.dev_partner,"onUpdate:modelValue":a[6]||(a[6]=l=>e.state.dev_partner=l),"bg-color":"#BDBDBD",clearable:"","error-messages":e.mdaordev_partner,"item-title":"name","item-value":"id",items:e.dev_partners,label:t.$t("developmentPartner")},null,8,["modelValue","error-messages","items","label"]),o(D,{modelValue:e.state.role,"onUpdate:modelValue":a[7]||(a[7]=l=>e.state.role=l),"bg-color":"#BDBDBD","error-messages":e.v$.role.$errors.map(l=>l.$message),"item-title":"name","item-value":"id",items:e.roles,label:t.$t("role"),required:"",onBlur:e.v$.role.$touch,onChange:e.v$.role.$touch},null,8,["modelValue","error-messages","items","label","onBlur","onChange"]),o(v,{modelValue:e.state.password,"onUpdate:modelValue":a[8]||(a[8]=l=>e.state.password=l),"append-icon":e.password_show?"mdi-eye":"mdi-eye-off","bg-color":"#BDBDBD","error-messages":e.v$.password.$errors.map(l=>l.$message),label:t.$t("password"),required:"",type:e.password_show?"text":"password",onBlur:e.v$.password.$touch,"onClick:append":a[9]||(a[9]=l=>e.password_show=!e.password_show),onInput:e.v$.password.$touch},null,8,["modelValue","append-icon","error-messages","label","type","onBlur","onInput"])]),_:1}),p("div",de,[o(f,{color:"success",disabled:e.v$.$error,loading:e.loading,size:"small",type:"submit",variant:"elevated",onClick:e.create},{default:d(()=>[o(g,{start:""},{default:d(()=>a[28]||(a[28]=[i("mdi-plus")])),_:1}),i(" "+u(t.$t("add")),1)]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1},8,["modelValue"]),o(q,{modelValue:e.editDialog,"onUpdate:modelValue":a[23]||(a[23]=l=>e.editDialog=l),transition:"dialog-top-transition",width:"auto"},{default:d(()=>[o(U,{class:"rounded-xl pa-4",elevation:"10"},{default:d(()=>[o(y,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:d(()=>[p("div",ne,[o(g,{class:"mr-2 text-white"},{default:d(()=>a[29]||(a[29]=[i("mdi-account")])),_:1}),p("span",ie,u(t.$t("editUser")),1)]),o(E),o(f,{color:"white",icon:"mdi-close",onClick:a[11]||(a[11]=l=>e.editDialog=!1)})]),_:1}),o(k,{class:"pt-6"},{default:d(()=>[o(v,{modelValue:e.editingItem.id,"onUpdate:modelValue":a[12]||(a[12]=l=>e.editingItem.id=l),"bg-color":"#BDBDBD",disabled:"",label:t.$t("id")},null,8,["modelValue","label"]),o(v,{modelValue:e.state.email,"onUpdate:modelValue":a[13]||(a[13]=l=>e.state.email=l),"bg-color":"#BDBDBD",density:"compact",disabled:"","error-messages":e.v$.email.$errors.map(l=>l.$message),label:t.$t("email"),required:"",onBlur:e.v$.email.$touch,onInput:e.v$.email.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),o(v,{modelValue:e.state.name,"onUpdate:modelValue":a[14]||(a[14]=l=>e.state.name=l),"bg-color":"#BDBDBD","error-messages":e.v$.name.$errors.map(l=>l.$message),label:t.$t("fullName"),required:"",onBlur:e.v$.name.$touch,onInput:e.v$.name.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),o(v,{modelValue:e.state.title,"onUpdate:modelValue":a[15]||(a[15]=l=>e.state.title=l),"bg-color":"#BDBDBD",label:t.$t("title")},null,8,["modelValue","label"]),o(v,{modelValue:e.state.phone,"onUpdate:modelValue":a[16]||(a[16]=l=>e.state.phone=l),"bg-color":"#BDBDBD","error-messages":e.v$.phone.$errors.map(l=>l.$message),label:t.$t("phoneNumber"),required:"",onBlur:e.v$.phone.$touch,onInput:e.v$.phone.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),o(D,{modelValue:e.state.mda,"onUpdate:modelValue":a[17]||(a[17]=l=>e.state.mda=l),"bg-color":"#BDBDBD",clearable:"","error-messages":e.mdaordev_partner,"item-title":"name","item-value":"id",items:e.mdas,label:t.$t("mda"),required:""},null,8,["modelValue","error-messages","items","label"]),o(D,{modelValue:e.state.dev_partner,"onUpdate:modelValue":a[18]||(a[18]=l=>e.state.dev_partner=l),"bg-color":"#BDBDBD",clearable:"","error-messages":e.mdaordev_partner,"item-title":"name","item-value":"id",items:e.dev_partners,label:t.$t("developmentPartner"),required:""},null,8,["modelValue","error-messages","items","label"]),o(D,{modelValue:e.state.role,"onUpdate:modelValue":a[19]||(a[19]=l=>e.state.role=l),"bg-color":"#BDBDBD","error-messages":e.v$.role.$errors.map(l=>l.$message),"item-title":"name","item-value":"id",items:e.roles,label:t.$t("role"),required:"",onBlur:e.v$.role.$touch,onChange:e.v$.role.$touch},null,8,["modelValue","error-messages","items","label","onBlur","onChange"]),o(v,{modelValue:e.state.password,"onUpdate:modelValue":a[20]||(a[20]=l=>e.state.password=l),"bg-color":"#BDBDBD",label:t.$t("password"),type:e.password_show?"text":"password"},null,8,["modelValue","label","type"])]),_:1}),p("div",me,[o(f,{color:"success",disabled:e.v$.$error,loading:e.loading,size:"large",type:"submit",variant:"elevated",onClick:e.saveEdit},{default:d(()=>[o(g,{start:""},{default:d(()=>a[30]||(a[30]=[i("mdi-pencil")])),_:1}),i(" "+u(t.$t("save")),1)]),_:1},8,["disabled","loading","onClick"]),o(f,{color:"black",disabled:e.v$.$error,loading:e.loading,size:"large",type:"submit",variant:"elevated",onClick:a[21]||(a[21]=l=>e.editDialog=!1)},{default:d(()=>[o(g,{start:""},{default:d(()=>a[31]||(a[31]=[i("mdi-cancel")])),_:1}),i(" "+u(t.$t("cancel")),1)]),_:1},8,["disabled","loading"]),o(f,{color:"error",disabled:e.v$.$error,loading:e.loading,size:"large",type:"submit",variant:"elevated",onClick:a[22]||(a[22]=l=>e.confirmDeleteDialog=!0)},{default:d(()=>[o(g,{start:""},{default:d(()=>a[32]||(a[32]=[i("mdi-delete")])),_:1}),i(" "+u(t.$t("delete")),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1},8,["modelValue"]),o(q,{modelValue:e.confirmDeleteDialog,"onUpdate:modelValue":a[26]||(a[26]=l=>e.confirmDeleteDialog=l),persistent:"",width:"auto"},{default:d(()=>[o(U,null,{default:d(()=>[o(y,{color:"warning",title:t.$t("confirmDeletingUser")+" "+e.state.name},{default:d(()=>[o(f,{color:"white",icon:"mdi-close",onClick:a[24]||(a[24]=l=>e.confirmDeleteDialog=!1)})]),_:1},8,["title"]),o(k,null,{default:d(()=>[i(u(t.$t("confirmDeleteUserMessage",{name:e.state.name})),1)]),_:1}),p("div",ue,[o(f,{color:"success",onClick:a[25]||(a[25]=l=>e.confirmDeleteDialog=!1)},{default:d(()=>[i(u(t.$t("cancel")),1)]),_:1}),o(f,{color:"error",onClick:e.remove},{default:d(()=>[i(u(t.$t("proceed")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),o(y,{class:"rounded-lg mb-2 px-4",color:"primary",flat:"",height:"60"},{default:d(()=>[o(Z,{class:"text-white font-weight-bold text-h6"},{default:d(()=>[o(g,{class:"mr-2",color:"white"},{default:d(()=>a[33]||(a[33]=[i("mdi-account")])),_:1}),i(" "+u(t.$t("users")),1)]),_:1}),o(E),o(f,{class:"text-white font-weight-medium",color:"#1A237E",size:"small",onClick:e.activateAddDialog},{default:d(()=>[o(g,{start:""},{default:d(()=>a[34]||(a[34]=[i("mdi-plus")])),_:1}),i(" "+u(t.$t("addUser")),1)]),_:1},8,["onClick"])]),_:1}),o(U,{class:"rounded-lg"},{default:d(()=>[o(k,null,{default:d(()=>[o(_,{active:e.loadingValues,indeterminate:e.loadingValues},null,8,["active","indeterminate"]),o(oe,{class:"elevation-1",dense:"",headers:e.headers,height:"300",items:e.values},{"item.edit":d(({item:l})=>[o(g,{color:"#3F51B5",onClick:M=>e.activateEditDialog(l)},{default:d(()=>a[35]||(a[35]=[i("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})}const Ue=H(te,[["render",ve]]);export{Ue as default};
