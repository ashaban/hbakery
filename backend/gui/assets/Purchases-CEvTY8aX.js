import{_ as Fe,r as c,$ as j,d as h,k as Te,q as k,v as t,a0 as $e,a1 as Me,t as p,h as a,x as i,Z as y,G as v,B as s,N as ne,H as d,z as J,A as b,D as E,F as se,a2 as de,a3 as ue,C as B,a4 as me,i as pe,S as Ie}from"./index-C1Tj7Gr4.js";import{h as fe}from"./moment-C5S46NFB.js";import{V as Se}from"./VContainer-DjHLodrw.js";import{V as g,b as Y,d as ce,c as ye}from"./VCard-BTVuuPde.js";import{V as $}from"./VCol-DviWLfXs.js";import{V as Z}from"./VAutocomplete-DxxHVteM.js";import{V as je}from"./VDataTable-B2-JjakP.js";import{V as Ee}from"./VDataTableServer-DX--LLFj.js";import{V as ve}from"./VChip-BoOgafMF.js";import{V as Ye}from"./VSkeletonLoader-jHZeiKRN.js";import{V as ge}from"./VDialog-DXmIvNfP.js";import{V as be}from"./VForm-CB7-a3w8.js";import{V as Q}from"./VTextField-ByAT7d5t.js";import"./dialog-transition-C6ql0rGP.js";import"./VSlideGroup-CXfqPmJw.js";const Ne={class:"d-flex align-center justify-space-between"},Ae={class:"text-h6 font-weight-bold"},Be={class:"d-flex align-center justify-space-between"},Qe={class:"text-h6 font-weight-bold text-blue"},Re={class:"d-flex align-center justify-space-between"},Oe={class:"text-h6 font-weight-bold text-green"},ze={class:"d-flex gap-2"},Le={class:"d-flex justify-end mt-4"},He={class:"d-flex flex-column align-end"},Ge={key:0,class:"text-caption text-grey mt-1"},Je={class:"font-weight-medium"},Ze={class:"text-center py-6 text-grey"},Ke={class:"mb-4"},We={class:"required-field"},Xe={class:"d-flex justify-space-between align-center"},et={class:"text-h6 font-weight-bold text-blue"},tt={class:"text-caption text-grey mt-1"},at={class:"d-flex justify-space-between align-center"},lt={class:"text-h6 font-weight-bold text-green"},ot={class:"d-flex flex-column"},rt={key:0,class:"text-caption text-error mt-1"},it={class:"mb-4"},nt={class:"required-field"},st={class:"d-flex justify-space-between align-center"},dt={class:"text-h6 font-weight-bold text-blue"},ut={class:"text-caption text-grey mt-1"},mt={class:"d-flex justify-space-between align-center"},pt={class:"text-h6 font-weight-bold text-green"},ft={class:"d-flex flex-column"},ct={key:0,class:"text-caption text-error mt-1"},yt={__name:"Purchases",setup(vt){$e();const R=c(10),K=c([]),D=c([]),O=c(!1),V=c(!1),M=c(!1),w=c(!1),I=c(1),W=c(0),z=c(null),_e=c(null),xe=c(null),q=j({total_quantity:0,total_amount:0}),r=j({item_id:"",quantity:"",price:"",date:""}),n=j({item_id:"",quantity:"",price:"",date:""}),C=j({show:!1,message:"",color:"success"}),u=j({item_id:"",date_operator:"",date:"",date_from:"",date_to:""}),Ve=h(()=>!q.total_amount||!q.total_quantity?0:q.total_amount/q.total_quantity),S=h(()=>D.value.find(o=>o.id===r.item_id)||{}),F=h(()=>S.value.unit||""),N=h(()=>S.value.human_readable_unit||""),L=h(()=>S.value.conversion_factor||1),H=h(()=>S.value.human_readable_unit&&S.value.conversion_factor),X=h(()=>!r.quantity||!H.value?0:(r.quantity*L.value).toFixed(6)),qe=[{title:"Item",key:"item_name"},{title:"Quantity",key:"quantity",align:"end",sortable:!1},{title:"Unit Price",key:"price",align:"end"},{title:"Total Amount",key:"total",align:"end"},{title:"Purchase Date",key:"date"},{title:"Actions",key:"actions",align:"center",sortable:!1}],ke=[{label:"Equals (=)",value:"="},{label:"Greater Than (>)",value:">"},{label:"Less Than (<)",value:"<"},{label:"Greater or Equal (>=)",value:">="},{label:"Less or Equal (<=)",value:"<="},{label:"In Range",value:"in"}];function T(o){return Number(o||0).toLocaleString(void 0,{minimumFractionDigits:2})}function _(o,e="success"){C.message=o,C.color=e,C.show=!0}function A(){return r.quantity&&r.price?r.quantity*r.price:0}function gt(){}function ee(){P("item_id")}function f(o){switch(o){case"item_id":n.item_id=r.item_id?"":"Item selection is required";break;case"quantity":!r.quantity&&r.quantity!==0?n.quantity="Quantity is required":isNaN(r.quantity)?n.quantity="Quantity must be a valid number":r.quantity<=0?n.quantity="Quantity must be positive":n.quantity="";break;case"price":!r.price&&r.price!==0?n.price="Unit price is required":isNaN(r.price)?n.price="Unit price must be a valid number":r.price<=0?n.price="Unit price must be positive":n.price="";break;case"date":n.date=r.date?"":"Purchase date is required";break}}function P(o){n[o]=""}function te(){return f("item_id"),f("quantity"),f("price"),f("date"),!n.item_id&&!n.quantity&&!n.price&&!n.date}async function we(){try{const e=await(await fetch("/items")).json();D.value=e.map(m=>({...m,human_readable_unit:m.human_readable_unit||"",conversion_factor:m.conversion_factor||1}))}catch(o){console.error("Failed to load items:",o),_("Failed to load items","error")}}async function U(){O.value=!0;try{const o=new URLSearchParams({page:I.value,limit:R.value});if(u.item_id&&o.append("item_id",u.item_id),u.date_operator&&u.date_operator!=="in"&&u.date){const l={"=":"date",">":"date_gt","<":"date_lt",">=":"date_from","<=":"date_to"};o.append(l[u.date_operator],u.date)}u.date_operator==="in"&&u.date_from&&u.date_to&&(o.append("date_from",u.date_from),o.append("date_to",u.date_to));const m=await(await fetch(`/purchases?${o}`)).json();K.value=(m.data||[]).map(l=>{const x=D.value.find(De=>De.id===l.item_id)||{},G=x.human_readable_unit&&x.conversion_factor;return{...l,human_readable_quantity:G?(l.quantity*x.conversion_factor).toFixed(6):null,human_readable_unit:x.human_readable_unit,unit:x.unit||""}}),W.value=m.totalRecords||0,q.total_quantity=m.total_quantity||0,q.total_amount=m.total_amount||0}catch(o){console.error("Failed to load purchases:",o),_("Failed to load purchases","error")}finally{O.value=!1}}function Ce(){I.value=1,U()}function Pe(){Object.assign(u,{item_id:"",date_operator:"",date:"",date_from:"",date_to:""}),I.value=1,U()}function Ue(){Object.assign(r,{item_id:"",quantity:"",price:"",date:""}),Object.keys(n).forEach(o=>n[o]=""),M.value=!0}function ae(){M.value=!1,Object.keys(n).forEach(o=>n[o]="")}function he(o){var e,m,l,x;z.value=o,Object.assign(r,{item_id:o.item_id,quantity:((m=(e=o.quantity)==null?void 0:e.replace)==null?void 0:m.call(e,/,/g,""))||o.quantity,price:((x=(l=o.price)==null?void 0:l.replace)==null?void 0:x.call(l,/,/g,""))||o.price,date:o.date?o.date:""}),Object.keys(n).forEach(G=>n[G]=""),w.value=!0}function le(){w.value=!1,Object.keys(n).forEach(o=>n[o]="")}async function oe(){if(!te()){_("Please fix the validation errors","error");return}V.value=!0;try{const o={...r,date:fe(r.date,"DD-MM-YYYY").format("YYYY-MM-DD")};if(!(await fetch("/purchases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Save failed");M.value=!1,_("Purchase added successfully"),await U()}catch(o){console.error("Failed to create purchase:",o),_("Failed to add purchase","error")}finally{V.value=!1}}async function re(){if(!te()){_("Please fix the validation errors","error");return}V.value=!0;try{const o={...r,date:fe(r.date,"DD-MM-YYYY").format("YYYY-MM-DD")};if(!(await fetch(`/purchases/${z.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Update failed");w.value=!1,_("Purchase updated successfully"),await U()}catch(o){console.error("Failed to update purchase:",o),_("Failed to update purchase","error")}finally{V.value=!1}}async function ie(o){if(confirm(`Are you sure you want to delete purchase of "${o.item_name}"?`)){V.value=!0;try{if(!(await fetch(`/purchases/${o.id}`,{method:"DELETE"})).ok)throw new Error("Delete failed");_("Purchase deleted successfully"),w.value&&(w.value=!1),await U()}catch(e){console.error("Failed to delete purchase:",e),_("Failed to delete purchase","error")}finally{V.value=!1}}}return Te(async()=>{await we(),await U()}),(o,e)=>{const m=Me("VueDatePicker");return p(),k(Se,{class:"py-6",fluid:""},{default:t(()=>[a(g,{class:"mb-6",elevation:"2",rounded:"lg"},{default:t(()=>[a(Y,{class:"d-flex align-center justify-space-between"},{default:t(()=>[e[34]||(e[34]=i("div",null,[i("h2",{class:"text-h5 font-weight-bold text-primary mb-1"}," Purchase Management "),i("p",{class:"text-body-2 text-grey"}," Track and manage inventory purchases and costs ")],-1)),o.$store.getters.hasTask("can_purchase_ingredients")?(p(),k(v,{key:0,color:"primary","prepend-icon":"mdi-cart-plus",onClick:Ue},{default:t(()=>e[33]||(e[33]=[s(" New Purchase ")])),_:1})):y("",!0)]),_:1})]),_:1}),a(ne,{class:"mb-4"},{default:t(()=>[a($,{cols:"12",md:"4"},{default:t(()=>[a(g,{class:"pa-4",elevation:"3",rounded:"xl"},{default:t(()=>[i("div",Ne,[i("div",null,[e[35]||(e[35]=i("div",{class:"text-body-2 text-grey"},"Total Purchases",-1)),i("div",Ae,d(T(q.total_amount)),1)]),a(J,{color:"primary",size:"40",variant:"tonal"},{default:t(()=>[a(b,{color:"primary"},{default:t(()=>e[36]||(e[36]=[s("mdi-cash")])),_:1})]),_:1})])]),_:1})]),_:1}),a($,{cols:"12",md:"4"},{default:t(()=>[a(g,{class:"pa-4",elevation:"3",rounded:"xl"},{default:t(()=>[i("div",Be,[i("div",null,[e[37]||(e[37]=i("div",{class:"text-body-2 text-grey"},"Total Quantity",-1)),i("div",Qe,d(parseFloat(q.total_quantity)||0),1)]),a(J,{color:"blue",size:"40",variant:"tonal"},{default:t(()=>[a(b,{color:"blue"},{default:t(()=>e[38]||(e[38]=[s("mdi-package-variant")])),_:1})]),_:1})])]),_:1})]),_:1}),a($,{cols:"12",md:"4"},{default:t(()=>[a(g,{class:"pa-4",elevation:"3",rounded:"xl"},{default:t(()=>[i("div",Re,[i("div",null,[e[39]||(e[39]=i("div",{class:"text-body-2 text-grey"},"Avg. Unit Price",-1)),i("div",Oe,d(T(Ve.value)),1)]),a(J,{color:"green",size:"40",variant:"tonal"},{default:t(()=>[a(b,{color:"green"},{default:t(()=>e[40]||(e[40]=[s("mdi-tag")])),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),a(g,{class:"mb-4",elevation:"2",rounded:"lg"},{default:t(()=>[a(Y,null,{default:t(()=>[a(ne,{dense:""},{default:t(()=>[a($,{cols:"12",md:"4"},{default:t(()=>[a(Z,{modelValue:u.item_id,"onUpdate:modelValue":e[0]||(e[0]=l=>u.item_id=l),autocomplete:"off",autocorrect:"off",clearable:"",color:"primary",inputmode:"none","item-title":"name","item-value":"id",items:D.value,label:"Filter by Item",spellcheck:"false",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),a($,{cols:"12",md:"3"},{default:t(()=>[a(je,{modelValue:u.date_operator,"onUpdate:modelValue":e[1]||(e[1]=l=>u.date_operator=l),clearable:"","item-title":"label","item-value":"value",items:ke,label:"Date Filter",variant:"outlined"},null,8,["modelValue"])]),_:1}),a($,{cols:"12",md:"5"},{default:t(()=>[u.date_operator&&u.date_operator!=="in"?(p(),E(se,{key:0},[a(ce,{class:"pl-0 pb-1 text-caption text-grey"},{default:t(()=>e[41]||(e[41]=[s(" Select Date ")])),_:1}),a(m,{modelValue:u.date,"onUpdate:modelValue":e[2]||(e[2]=l=>u.date=l),"auto-apply":"",class:"border rounded-lg px-4 py-2",format:"dd-MM-yyyy","model-type":"format",placeholder:"Select Date",teleport:!0},null,8,["modelValue"])],64)):y("",!0),u.date_operator==="in"?(p(),E(se,{key:1},[a(ce,{class:"pl-0 pb-1 text-caption text-grey"},{default:t(()=>e[42]||(e[42]=[s(" Date Range ")])),_:1}),i("div",ze,[a(m,{modelValue:u.date_from,"onUpdate:modelValue":e[3]||(e[3]=l=>u.date_from=l),"auto-apply":"",class:"flex-1 border rounded-lg px-2 py-1",format:"dd-MM-yyyy","model-type":"format",placeholder:"From",teleport:!0},null,8,["modelValue"]),a(m,{modelValue:u.date_to,"onUpdate:modelValue":e[4]||(e[4]=l=>u.date_to=l),"auto-apply":"",class:"flex-1 border rounded-lg px-2 py-1",format:"dd-MM-yyyy","model-type":"format",placeholder:"To",teleport:!0},null,8,["modelValue"])])],64)):y("",!0)]),_:1})]),_:1}),i("div",Le,[a(v,{color:"primary","prepend-icon":"mdi-filter",onClick:Ce},{default:t(()=>e[43]||(e[43]=[s(" Apply Filters ")])),_:1}),a(v,{class:"ml-2","prepend-icon":"mdi-close-circle",variant:"outlined",onClick:Pe},{default:t(()=>e[44]||(e[44]=[s(" Clear ")])),_:1})])]),_:1})]),_:1}),a(g,{elevation:"2",rounded:"lg"},{default:t(()=>[a(Y,{class:"pa-0"},{default:t(()=>[a(Ee,{"items-per-page":R.value,"onUpdate:itemsPerPage":e[5]||(e[5]=l=>R.value=l),page:I.value,"onUpdate:page":e[6]||(e[6]=l=>I.value=l),class:"rounded-lg",density:"comfortable",headers:qe,hover:"",items:K.value,"items-length":W.value,"items-per-page-options":[5,10,20,50,100],loading:O.value,"onUpdate:options":U},{loading:t(()=>[a(Ye,{type:"table-row@10"})]),"item.quantity":t(({item:l})=>[i("div",He,[a(ve,{color:"blue",variant:"flat"},{default:t(()=>[s(d(parseFloat(l.quantity))+" "+d(l.unit),1)]),_:2},1024),l.human_readable_quantity?(p(),E("div",Ge,d(l.human_readable_quantity)+" "+d(l.human_readable_unit),1)):y("",!0)])]),"item.price":t(({item:l})=>[i("span",Je,d(T(l.price)),1)]),"item.total":t(({item:l})=>[a(ve,{color:"green",variant:"flat"},{default:t(()=>[s(d(T(l.total)),1)]),_:2},1024)]),"item.date":t(({item:l})=>[s(d(l.date),1)]),"item.actions":t(({item:l})=>[o.$store.getters.hasTask("can_edit_ingredients_purchase")?(p(),k(v,{key:0,color:"blue",icon:"",size:"small",variant:"text",onClick:x=>he(l)},{default:t(()=>[a(b,null,{default:t(()=>e[45]||(e[45]=[s("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])):y("",!0),o.$store.getters.hasTask("can_delete_ingredients_purchases")?(p(),k(v,{key:1,color:"red",icon:"",size:"small",variant:"text",onClick:x=>ie(l)},{default:t(()=>[a(b,null,{default:t(()=>e[46]||(e[46]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"])):y("",!0)]),"no-data":t(()=>[i("div",Ze,[a(b,{color:"grey-lighten-2",size:"48"},{default:t(()=>e[47]||(e[47]=[s("mdi-cart-remove")])),_:1}),e[48]||(e[48]=i("div",null,"No purchases found",-1))])]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1})]),_:1}),a(ge,{modelValue:M.value,"onUpdate:modelValue":e[18]||(e[18]=l=>M.value=l),"max-width":"700px",persistent:""},{default:t(()=>[a(g,null,{default:t(()=>[a(de,{class:"text-white",color:"primary",density:"comfortable"},{default:t(()=>[a(ue,null,{default:t(()=>[a(b,{start:""},{default:t(()=>e[49]||(e[49]=[s("mdi-cart-plus")])),_:1}),e[50]||(e[50]=s(" Add New Purchase "))]),_:1}),a(B),a(v,{color:"white",icon:"mdi-close",variant:"text",onClick:ae})]),_:1}),a(Y,{class:"pa-4"},{default:t(()=>[a(be,{ref_key:"addFormRef",ref:_e,onSubmit:me(oe,["prevent"])},{default:t(()=>[a(Z,{modelValue:r.item_id,"onUpdate:modelValue":e[7]||(e[7]=l=>r.item_id=l),autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.item_id,inputmode:"none","item-title":"name","item-value":"id",items:D.value,label:"Item *",required:"",spellcheck:"false",variant:"outlined",onBlur:e[8]||(e[8]=l=>f("item_id")),onInput:ee},{label:t(()=>e[51]||(e[51]=[i("span",{class:"required-field"},"Item",-1)])),_:1},8,["modelValue","error-messages","items"]),i("div",Ke,[a(Q,{modelValue:r.quantity,"onUpdate:modelValue":e[9]||(e[9]=l=>r.quantity=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.quantity,inputmode:"none",label:`Quantity in ${F.value||"units"} *`,required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[10]||(e[10]=l=>f("quantity")),onInput:e[11]||(e[11]=l=>{P("quantity"),A()})},{label:t(()=>[i("span",We,"Quantity ("+d(F.value||"units")+")",1)]),_:1},8,["modelValue","error-messages","label"]),r.quantity&&H.value?(p(),k(g,{key:0,class:"pa-3",color:"blue-lighten-5",variant:"outlined"},{default:t(()=>[i("div",Xe,[e[52]||(e[52]=i("span",{class:"font-weight-medium"},"Converted Quantity:",-1)),i("span",et,d(X.value)+" "+d(N.value),1)]),i("div",tt," Conversion: 1 "+d(F.value)+" = "+d(L.value)+" "+d(N.value),1)]),_:1})):y("",!0)]),a(Q,{modelValue:r.price,"onUpdate:modelValue":e[12]||(e[12]=l=>r.price=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.price,inputmode:"none",label:"Unit Price *",prefix:"TSh ",required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[13]||(e[13]=l=>f("price")),onInput:e[14]||(e[14]=l=>{P("price"),A()})},{label:t(()=>e[53]||(e[53]=[i("span",{class:"required-field"},"Unit Price",-1)])),_:1},8,["modelValue","error-messages"]),r.quantity&&r.price?(p(),k(g,{key:0,class:"mb-4 pa-3",color:"green-lighten-5",variant:"outlined"},{default:t(()=>[i("div",at,[e[54]||(e[54]=i("span",{class:"font-weight-medium"},"Total Amount:",-1)),i("span",lt,d(T(r.quantity*r.price)),1)])]),_:1})):y("",!0),i("div",ot,[e[55]||(e[55]=i("label",{class:"text-caption text-grey mb-1 required-field"},"Purchase Date *",-1)),a(m,{modelValue:r.date,"onUpdate:modelValue":[e[15]||(e[15]=l=>r.date=l),e[17]||(e[17]=l=>P("date"))],"auto-apply":"",class:pe(["rounded-lg","border","px-4","py-2","w-100",n.date?"error-field":""]),format:"dd-MM-yyyy","model-type":"format",placeholder:"Purchase Date",teleport:!0,onBlur:e[16]||(e[16]=l=>f("date"))},null,8,["modelValue","class"]),n.date?(p(),E("div",rt,d(n.date),1)):y("",!0)])]),_:1},512)]),_:1}),a(ye,{class:"pa-4"},{default:t(()=>[a(B),a(v,{color:"grey",variant:"outlined",onClick:ae},{default:t(()=>e[56]||(e[56]=[s("Cancel")])),_:1}),a(v,{color:"primary",loading:V.value,onClick:oe},{default:t(()=>[a(b,{start:""},{default:t(()=>e[57]||(e[57]=[s("mdi-content-save")])),_:1}),e[58]||(e[58]=s(" Save "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(ge,{modelValue:w.value,"onUpdate:modelValue":e[31]||(e[31]=l=>w.value=l),"max-width":"700px",persistent:""},{default:t(()=>[a(g,null,{default:t(()=>[a(de,{class:"text-white",color:"primary",density:"comfortable"},{default:t(()=>[a(ue,null,{default:t(()=>[a(b,{start:""},{default:t(()=>e[59]||(e[59]=[s("mdi-cart-edit")])),_:1}),e[60]||(e[60]=s(" Edit Purchase "))]),_:1}),a(B),a(v,{color:"white",icon:"mdi-close",variant:"text",onClick:le})]),_:1}),a(Y,{class:"pa-4"},{default:t(()=>[a(be,{ref_key:"editFormRef",ref:xe,onSubmit:me(re,["prevent"])},{default:t(()=>[a(Z,{modelValue:r.item_id,"onUpdate:modelValue":e[19]||(e[19]=l=>r.item_id=l),autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.item_id,inputmode:"none","item-title":"name","item-value":"id",items:D.value,label:"Item *",required:"",spellcheck:"false",variant:"outlined",onBlur:e[20]||(e[20]=l=>f("item_id")),onInput:ee},{label:t(()=>e[61]||(e[61]=[i("span",{class:"required-field"},"Item",-1)])),_:1},8,["modelValue","error-messages","items"]),i("div",it,[a(Q,{modelValue:r.quantity,"onUpdate:modelValue":e[21]||(e[21]=l=>r.quantity=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.quantity,inputmode:"none",label:`Quantity in ${F.value||"units"} *`,required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[22]||(e[22]=l=>f("quantity")),onInput:e[23]||(e[23]=l=>{P("quantity"),A()})},{label:t(()=>[i("span",nt,"Quantity ("+d(F.value||"units")+")",1)]),_:1},8,["modelValue","error-messages","label"]),r.quantity&&H.value?(p(),k(g,{key:0,class:"pa-3",color:"blue-lighten-5",variant:"outlined"},{default:t(()=>[i("div",st,[e[62]||(e[62]=i("span",{class:"font-weight-medium"},"Converted Quantity:",-1)),i("span",dt,d(X.value)+" "+d(N.value),1)]),i("div",ut," Conversion: 1 "+d(F.value)+" = "+d(L.value)+" "+d(N.value),1)]),_:1})):y("",!0)]),a(Q,{modelValue:r.price,"onUpdate:modelValue":e[24]||(e[24]=l=>r.price=l),modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",color:"primary","error-messages":n.price,inputmode:"none",label:"Unit Price *",prefix:"TSh ",required:"",spellcheck:"false",type:"number",variant:"outlined",onBlur:e[25]||(e[25]=l=>f("price")),onInput:e[26]||(e[26]=l=>{P("price"),A()})},{label:t(()=>e[63]||(e[63]=[i("span",{class:"required-field"},"Unit Price",-1)])),_:1},8,["modelValue","error-messages"]),r.quantity&&r.price?(p(),k(g,{key:0,class:"mb-4 pa-3",color:"green-lighten-5",variant:"outlined"},{default:t(()=>[i("div",mt,[e[64]||(e[64]=i("span",{class:"font-weight-medium"},"Total Amount:",-1)),i("span",pt,d(T(r.quantity*r.price)),1)])]),_:1})):y("",!0),i("div",ft,[e[65]||(e[65]=i("label",{class:"text-caption text-grey mb-1 required-field"},"Purchase Date *",-1)),a(m,{modelValue:r.date,"onUpdate:modelValue":[e[27]||(e[27]=l=>r.date=l),e[29]||(e[29]=l=>P("date"))],"auto-apply":"",class:pe(["rounded-lg","border","px-4","py-2","w-100",n.date?"error-field":""]),format:"dd-MM-yyyy","model-type":"format",placeholder:"Purchase Date",teleport:!0,onBlur:e[28]||(e[28]=l=>f("date"))},null,8,["modelValue","class"]),n.date?(p(),E("div",ct,d(n.date),1)):y("",!0)])]),_:1},512)]),_:1}),a(ye,{class:"pa-4"},{default:t(()=>[a(v,{color:"red",variant:"outlined",onClick:e[30]||(e[30]=l=>ie(z.value))},{default:t(()=>[a(b,{start:""},{default:t(()=>e[66]||(e[66]=[s("mdi-delete")])),_:1}),e[67]||(e[67]=s(" Delete "))]),_:1}),a(B),a(v,{color:"grey",variant:"outlined",onClick:le},{default:t(()=>e[68]||(e[68]=[s("Cancel")])),_:1}),a(v,{color:"primary",loading:V.value,onClick:re},{default:t(()=>[a(b,{start:""},{default:t(()=>e[69]||(e[69]=[s("mdi-content-save")])),_:1}),e[70]||(e[70]=s(" Update "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Ie,{modelValue:C.show,"onUpdate:modelValue":e[32]||(e[32]=l=>C.show=l),color:C.color,timeout:"3000"},{default:t(()=>[s(d(C.message),1)]),_:1},8,["modelValue","color"])]),_:1})}}},Mt=Fe(yt,[["__scopeId","data-v-6f570046"]]);export{Mt as default};
