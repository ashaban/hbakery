import{a as ke,p as he,a6 as Qt,a7 as Rl,h as qe,i as l,X as Yt,Y as $l,y as o,n as Te,j as Z,a8 as Ml,a9 as Fl,m as mt,aa as Bt,ab as Jt,ac as Gl,e as Q,ad as W,B as c,ae as ft,af as Ll,ag as Xe,ah as Ol,ai as Hl,aj as Ql,ak as Wt,al as Yl,am as Jl,an as Wl,ao as Kl,ap as Xl,aq as Zl,ar as ea,as as ta,at as la,au as aa,av as _e,aw as Kt,ax as rt,r as N,ay as Xt,F as G,az as Zt,aA as oa,aB as sa,aC as da,aD as na,aE as ia,R as ra,_ as ua,$ as He,l as ca,s as b,x as t,a1 as ma,v as p,a2 as z,C as s,H as U,I as i,O as M,A as S,D as me,Q as xe,M as se,aF as Nt,aG as Et,aH as Rt,L as Ve,N as ie,aI as ae,E as I,a3 as Qe,a4 as Ye,G as oe,a5 as $t}from"./index-CJ5F7TvH.js";import{h as el}from"./moment-C5S46NFB.js";import{V as fa}from"./VContainer-Bvcdvvoc.js";import{V as fe}from"./VAlert-Cnso5ekh.js";import{V as g,b as x,a as Ue,c as Mt}from"./VCard-DJMghoQq.js";import{V as _}from"./VCol-EM33wxAT.js";import{V as k}from"./VChip-NGaK05iW.js";import{V as we}from"./VAutocomplete-Bvob4dLB.js";import{c as Re,m as tl,d as pa,e as _a,V as pe,a as De,f as Ft,b as ya}from"./VDataTable-DqBUmyPs.js";import{V as Gt}from"./VSkeletonLoader-Bv7EpiWC.js";import{V as va}from"./VBadge-D9CqW3DS.js";import{V as Je}from"./VDialog-ukhlUxO_.js";import{V as Lt}from"./VForm-CsDM0Eb7.js";import{a as Ze,b as ga,m as ll,u as ba,V as X}from"./VTextField-MfnYVvFm.js";import{V as Ot,a as We,b as Ht,c as Ke}from"./VTabs-C8c3ct6D.js";import{V as xa}from"./VTooltip-HnimOeEX.js";import"./VSlideGroup-DL4Y2Zgr.js";import"./dialog-transition-BBu5jNiq.js";const nt=r=>r?el(r).format("DD-MM-YYYY HH:mm"):"",it=r=>r?el(r,"DD-MM-YYYY HH:mm").format("YYYY-MM-DD HH:mm"):null,$e=Symbol.for("vuetify:v-expansion-panel"),al=he({...mt(),...Fl()},"VExpansionPanelText"),ut=ke()({name:"VExpansionPanelText",props:al(),setup(r,E){let{slots:q}=E;const v=Qt($e);if(!v)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:R,onAfterLeave:D}=Rl(r,v.isSelected);return qe(()=>l(Ml,{onAfterLeave:D},{default:()=>{var $;return[Yt(o("div",{class:Z(["v-expansion-panel-text",r.class]),style:Te(r.style)},[q.default&&R.value&&o("div",{class:"v-expansion-panel-text__wrapper"},[($=q.default)==null?void 0:$.call(q)])]),[[$l,v.isSelected.value]])]}})),{}}}),ol=he({color:String,expandIcon:{type:Xe,default:"$expand"},collapseIcon:{type:Xe,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...mt(),...Ll()},"VExpansionPanelTitle"),ct=ke()({name:"VExpansionPanelTitle",directives:{vRipple:Bt},props:ol(),setup(r,E){let{slots:q}=E;const v=Qt($e);if(!v)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:R,backgroundColorStyles:D}=Jt(()=>r.color),{dimensionStyles:$}=Gl(r),K=Q(()=>({collapseIcon:r.collapseIcon,disabled:v.disabled.value,expanded:v.isSelected.value,expandIcon:r.expandIcon,readonly:r.readonly})),ee=W(()=>v.isSelected.value?r.collapseIcon:r.expandIcon);return qe(()=>{var te;return Yt(o("button",{class:Z(["v-expansion-panel-title",{"v-expansion-panel-title--active":v.isSelected.value,"v-expansion-panel-title--focusable":r.focusable,"v-expansion-panel-title--static":r.static},R.value,r.class]),style:Te([D.value,$.value,r.style]),type:"button",tabindex:v.disabled.value?-1:void 0,disabled:v.disabled.value,"aria-expanded":v.isSelected.value,onClick:r.readonly?void 0:v.toggle},[o("span",{class:"v-expansion-panel-title__overlay"},null),(te=q.default)==null?void 0:te.call(q,K.value),!r.hideActions&&l(ft,{defaults:{VIcon:{icon:ee.value}}},{default:()=>{var le;return[o("span",{class:"v-expansion-panel-title__icon"},[((le=q.actions)==null?void 0:le.call(q,K.value))??l(c,null,null)])]}})]),[[Bt,r.ripple]])}),{}}}),sl=he({title:String,text:String,bgColor:String,...Wl(),...Jl(),...Yl(),...Wt(),...ol(),...al()},"VExpansionPanel"),Va=ke()({name:"VExpansionPanel",props:sl(),emits:{"group:selected":r=>!0},setup(r,E){let{slots:q}=E;const v=Ol(r,$e),{backgroundColorClasses:R,backgroundColorStyles:D}=Jt(()=>r.bgColor),{elevationClasses:$}=Hl(r),{roundedClasses:K}=Ql(r),ee=W(()=>(v==null?void 0:v.disabled.value)||r.disabled),te=Q(()=>v.group.items.value.reduce((C,T,L)=>(v.group.selected.value.includes(T.id)&&C.push(L),C),[])),le=Q(()=>{const C=v.group.items.value.findIndex(T=>T.id===v.id);return!v.isSelected.value&&te.value.some(T=>T-C===1)}),de=Q(()=>{const C=v.group.items.value.findIndex(T=>T.id===v.id);return!v.isSelected.value&&te.value.some(T=>T-C===-1)});return Kl($e,v),qe(()=>{const C=!!(q.text||r.text),T=!!(q.title||r.title),L=ct.filterProps(r),ne=ut.filterProps(r);return l(r.tag,{class:Z(["v-expansion-panel",{"v-expansion-panel--active":v.isSelected.value,"v-expansion-panel--before-active":le.value,"v-expansion-panel--after-active":de.value,"v-expansion-panel--disabled":ee.value},K.value,R.value,r.class]),style:Te([D.value,r.style])},{default:()=>[o("div",{class:Z(["v-expansion-panel__shadow",...$.value])},null),l(ft,{defaults:{VExpansionPanelTitle:{...L},VExpansionPanelText:{...ne}}},{default:()=>{var P;return[T&&l(ct,{key:"title"},{default:()=>[q.title?q.title():r.title]}),C&&l(ut,{key:"text"},{default:()=>[q.text?q.text():r.text]}),(P=q.default)==null?void 0:P.call(q)]}})]})}),{groupItem:v}}}),wa=["default","accordion","inset","popout"],ka=he({flat:Boolean,...aa(),...la(sl(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...ta(),...mt(),...Wt(),variant:{type:String,default:"default",validator:r=>wa.includes(r)}},"VExpansionPanels"),ha=ke()({name:"VExpansionPanels",props:ka(),emits:{"update:modelValue":r=>!0},setup(r,E){let{slots:q}=E;const{next:v,prev:R}=Xl(r,$e),{themeClasses:D}=Zl(r),$=W(()=>r.variant&&`v-expansion-panels--variant-${r.variant}`);return ea({VExpansionPanel:{bgColor:W(()=>r.bgColor),collapseIcon:W(()=>r.collapseIcon),color:W(()=>r.color),eager:W(()=>r.eager),elevation:W(()=>r.elevation),expandIcon:W(()=>r.expandIcon),focusable:W(()=>r.focusable),hideActions:W(()=>r.hideActions),readonly:W(()=>r.readonly),ripple:W(()=>r.ripple),rounded:W(()=>r.rounded),static:W(()=>r.static)}}),qe(()=>l(r.tag,{class:Z(["v-expansion-panels",{"v-expansion-panels--flat":r.flat,"v-expansion-panels--tile":r.tile},D.value,$.value,r.class]),style:Te(r.style)},{default:()=>{var K;return[(K=q.default)==null?void 0:K.call(q,{prev:R,next:v})]}})),{next:v,prev:R}}}),qa=he({...tl({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Pa=ke()({name:"VRadio",props:qa(),setup(r,E){let{slots:q}=E;return qe(()=>{const v=Re.filterProps(r);return l(Re,_e(v,{class:["v-radio",r.class],style:r.style,type:"radio"}),q)}),{}}}),za=he({height:{type:[Number,String],default:"auto"},...ll(),...oa(_a(),["multiple"]),trueIcon:{type:Xe,default:"$radioOn"},falseIcon:{type:Xe,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ca=ke()({name:"VRadioGroup",inheritAttrs:!1,props:za(),emits:{"update:modelValue":r=>!0},setup(r,E){let{attrs:q,slots:v}=E;const R=Kt(),D=Q(()=>r.id||`radio-group-${R}`),$=rt(r,"modelValue"),K=N();return qe(()=>{const[ee,te]=Xt(q),le=Ze.filterProps(r),de=Re.filterProps(r),C=v.label?v.label({label:r.label,props:{for:D.value}}):r.label;return l(Ze,_e({ref:K,class:["v-radio-group",r.class],style:r.style},ee,le,{modelValue:$.value,"onUpdate:modelValue":T=>$.value=T,id:D.value}),{...v,default:T=>{let{id:L,messagesId:ne,isDisabled:P,isReadonly:Pe}=T;return o(G,null,[C&&l(ga,{id:L.value},{default:()=>[C]}),l(pa,_e(de,{id:L.value,"aria-describedby":ne.value,defaultsTarget:"VRadio",trueIcon:r.trueIcon,falseIcon:r.falseIcon,type:r.type,disabled:P.value,readonly:Pe.value,"aria-labelledby":C?L.value:void 0,multiple:!1},te,{modelValue:$.value,"onUpdate:modelValue":Y=>$.value=Y}),v)])}})}),Zt({},K)}}),Sa=he({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ll(),...tl()},"VSwitch"),Aa=ke()({name:"VSwitch",inheritAttrs:!1,props:Sa(),emits:{"update:focused":r=>!0,"update:modelValue":r=>!0,"update:indeterminate":r=>!0},setup(r,E){let{attrs:q,slots:v}=E;const R=rt(r,"indeterminate"),D=rt(r,"modelValue"),{loaderClasses:$}=sa(r),{isFocused:K,focus:ee,blur:te}=ba(r),le=N(),de=N(),C=da&&window.matchMedia("(forced-colors: active)").matches,T=W(()=>typeof r.loading=="string"&&r.loading!==""?r.loading:r.color),L=Kt(),ne=W(()=>r.id||`switch-${L}`);function P(){R.value&&(R.value=!1)}function Pe(Y){var re,ue;Y.stopPropagation(),Y.preventDefault(),(ue=(re=le.value)==null?void 0:re.input)==null||ue.click()}return qe(()=>{const[Y,re]=Xt(q),ue=Ze.filterProps(r),ze=Re.filterProps(r);return l(Ze,_e({ref:de,class:["v-switch",{"v-switch--flat":r.flat},{"v-switch--inset":r.inset},{"v-switch--indeterminate":R.value},$.value,r.class]},Y,ue,{modelValue:D.value,"onUpdate:modelValue":ye=>D.value=ye,id:ne.value,focused:K.value,style:r.style}),{...v,default:ye=>{let{id:O,messagesId:H,isDisabled:y,isReadonly:B,isValid:Me}=ye;const je={model:D,isValid:Me};return l(Re,_e({ref:le},ze,{modelValue:D.value,"onUpdate:modelValue":[ve=>D.value=ve,P],id:O.value,"aria-describedby":H.value,type:"checkbox","aria-checked":R.value?"mixed":void 0,disabled:y.value,readonly:B.value,onFocus:ee,onBlur:te},re),{...v,default:ve=>{let{backgroundColorClasses:Ce,backgroundColorStyles:ce}=ve;return o("div",{class:Z(["v-switch__track",C?void 0:Ce.value]),style:Te(ce.value),onClick:Pe},[v["track-true"]&&o("div",{key:"prepend",class:"v-switch__track-true"},[v["track-true"](je)]),v["track-false"]&&o("div",{key:"append",class:"v-switch__track-false"},[v["track-false"](je)])])},input:ve=>{let{inputNode:Ce,icon:ce,backgroundColorClasses:et,backgroundColorStyles:tt}=ve;return o(G,null,[Ce,o("div",{class:Z(["v-switch__thumb",{"v-switch__thumb--filled":ce||r.loading},r.inset||C?void 0:et.value]),style:Te(r.inset?void 0:tt.value)},[v.thumb?l(ft,{defaults:{VIcon:{icon:ce,size:"x-small"}}},{default:()=>[v.thumb({...je,icon:ce})]}):l(na,null,{default:()=>[r.loading?l(ia,{name:"v-switch",active:!0,color:Me.value===!1?void 0:T.value},{default:Se=>v.loader?v.loader(Se):l(ra,{active:Se.isActive,color:Se.color,indeterminate:!0,size:"16",width:"2"},null)}):ce&&l(c,{key:String(ce),icon:ce,size:"x-small"},null)]})])])}})}})}),Zt({},de)}}),Ia={class:"d-flex align-center justify-space-between"},Ua={class:"d-flex gap-2"},Da={class:"d-flex align-center"},Ta={class:"text-h5 font-weight-bold text-blue"},ja={class:"text-caption text-grey"},Ba={class:"d-flex align-center"},Na={class:"text-h5 font-weight-bold text-green"},Ea={class:"d-flex align-center"},Ra={class:"text-h5 font-weight-bold text-orange"},$a={class:"d-flex align-center"},Ma={class:"text-h5 font-weight-bold text-purple"},Fa={class:"d-flex align-center pa-4 bg-grey-lighten-4 rounded-t-lg"},Ga={class:"d-flex align-center mb-4"},La={class:"d-flex align-center mb-2"},Oa={class:"d-flex align-center mb-2"},Ha={class:"d-flex align-center"},Qa={class:"d-flex align-center mb-2"},Ya={class:"d-flex align-center mb-2"},Ja={class:"d-flex justify-space-between align-center"},Wa={class:"text-caption text-grey"},Ka={class:"d-flex gap-2"},Xa={class:"d-flex align-center"},Za={class:"font-weight-medium"},eo={class:"text-caption text-grey"},to={class:"text-caption"},lo={class:"text-no-wrap"},ao={class:"text-no-wrap"},oo={class:"d-flex align-center"},so={class:"font-weight-medium"},no={class:"d-flex justify-end"},io={class:"d-flex align-center justify-space-between"},ro={class:"d-flex align-center"},uo={class:"text-white text-caption opacity-75"},co={class:"text-center py-8"},mo={class:"d-flex align-center pa-4 bg-grey-lighten-4 rounded-t-lg"},fo={class:"d-flex align-center mb-4"},po={class:"d-flex align-center mb-2"},_o={class:"d-flex align-center mb-2"},yo={class:"d-flex align-center"},vo={class:"d-flex align-center mb-2"},go={class:"d-flex align-center mb-2"},bo={class:"d-flex justify-space-between align-center"},xo={class:"text-caption text-grey"},Vo={class:"d-flex gap-2"},wo={class:"d-flex align-center"},ko={class:"font-weight-medium"},ho={class:"text-caption text-grey"},qo={class:"d-flex align-center"},Po={class:"font-weight-medium"},zo={class:"text-no-wrap"},Co={class:"text-no-wrap"},So={class:"d-flex align-center"},Ao={class:"font-weight-medium"},Io={class:"d-flex justify-end"},Uo={class:"d-flex align-center justify-space-between"},Do={class:"d-flex align-center"},To={class:"text-white text-caption opacity-75"},jo={class:"text-center py-8"},Bo={class:"d-flex justify-space-between align-center"},No={class:"text-body-2 text-grey"},Eo={class:"text-h6 font-weight-bold"},Ro={class:"text-body-1 font-weight-medium"},$o={class:"text-body-1 font-weight-medium"},Mo={class:"text-body-1 font-weight-medium"},Fo={class:"text-body-1 font-weight-medium"},Go={class:"text-h6 font-weight-bold text-green"},Lo={class:"text-h6 font-weight-bold text-orange"},Oo={class:"text-h6 font-weight-bold text-red"},Ho={class:"text-h6 font-weight-bold text-primary"},Qo={class:"d-flex align-center"},Yo={class:"font-weight-medium"},Jo={class:"text-caption text-grey"},Wo={key:0,class:"d-flex flex-column"},Ko={class:"font-weight-medium text-green"},Xo={class:"text-caption text-orange"},Zo={class:"text-caption text-red"},es={key:1,class:"text-grey"},ts={class:"text-white text-caption font-weight-bold"},ls={key:0,class:"text-caption"},as={key:1,class:"text-caption text-grey"},os={class:"d-flex align-center mb-4"},ss={class:"position-relative w-100"},ds={key:0,class:"datepicker-label"},ns={class:"d-flex align-center mb-4"},is={class:"d-flex align-center mb-3"},rs={class:"font-weight-medium text-h6"},us={class:"text-caption text-grey"},cs={class:"mb-2"},ms={class:"d-flex align-center mb-3"},fs={class:"text-h6 font-weight-bold text-green"},ps={class:"text-h6 font-weight-bold text-orange"},_s={class:"text-h6 font-weight-bold text-red"},ys={class:"text-h6 font-weight-bold text-primary"},vs={class:"d-flex align-center mb-4"},gs={class:"position-relative w-100"},bs={key:0,class:"datepicker-label"},xs={class:"position-relative w-100"},Vs={key:0,class:"datepicker-label"},ws={class:"d-flex align-center justify-space-between mb-4"},ks={class:"d-flex align-center"},hs={class:"d-flex align-center mb-3"},qs={class:"text-body-2 text-grey"},Ps={class:"d-flex align-center mb-3"},zs={class:"d-flex align-center justify-space-between mb-4"},Cs={class:"d-flex align-center"},Ss={class:"d-flex align-center"},As={class:"d-flex align-center"},Is={class:"d-flex align-center mb-4"},Us={class:"text-h6 font-weight-medium"},Ds={class:"d-flex align-center justify-space-between w-100 pr-4"},Ts={class:"d-flex align-center"},js={class:"d-flex align-center"},Bs={class:"text-caption text-grey mb-2"},Ns={class:"d-flex align-center"},Es={class:"ml-2 flex-grow-1"},Rs={class:"font-weight-medium"},$s={key:0,class:"text-caption text-grey"},Ms={class:"mt-2"},Fs={class:"d-flex align-center"},Gs={class:"d-flex align-center justify-space-between mb-4"},Ls={class:"d-flex align-center"},Os={class:"d-flex gap-2"},Hs={class:"d-flex justify-space-between align-center"},Qs={class:"text-caption text-grey"},Ys={class:"d-flex align-center mb-4"},Js={class:"text-h6 font-weight-bold"},Ws={class:"text-body-1 font-weight-medium"},Ks={class:"text-body-1 font-weight-medium"},Xs={class:"text-body-1 font-weight-medium"},Zs={class:"text-body-1 font-weight-medium"},ed={class:"text-body-1 font-weight-medium"},td={class:"text-body-1 font-weight-medium"},ld={class:"text-body-1 font-weight-medium"},ad={class:"text-body-1 font-weight-medium"},od={class:"text-h6 font-weight-bold text-green"},sd={class:"text-h6 font-weight-bold text-blue"},dd={class:"text-h6 font-weight-bold text-green"},nd={class:"text-h6 font-weight-bold text-orange"},id={class:"text-h6 font-weight-bold text-red"},rd={class:"text-body-1 font-weight-medium"},ud={class:"text-white text-caption font-weight-bold"},cd={class:"text-caption text-grey"},md={key:0,class:"text-caption text-grey ml-2"},fd={class:"text-caption text-grey ml-2"},pd={class:"text-white text-caption font-weight-bold"},_d={key:0,class:"text-caption"},yd={key:1,class:"text-caption text-grey"},vd={class:"text-caption text-grey"},gd={__name:"Productions",setup(r){const E=N(!1),q=N(!1),v=N([]),R=N([]),D=N(!1),$=N(1),K=N(1),ee=N(!1),te=N(!1),le=N(!1),de=N(!1),C=N(null),T=N(!0),L=N(!1),ne=N(!1),P=N(null),Pe=N(""),Y=N(0),re=N([]),ue=N([]),ze=N([]),ye=N([]),O=He({product_id:"",status:"all",planned_at:"",planned_end:"",planned_at_op:"=",produced_at:"",produced_end:"",produced_at_op:"=",team_leader:"",discrepancy_reason:[]}),H=He({product_id:"",status:"all",planned_at:"",planned_end:"",planned_at_op:"=",team_leader:""}),y=He({id:null,planned_at:null,produced_at:null,notes:"",good_qty:null,damaged_qty:null,reject_qty:null,actual_qty:null,discrepancies:[],staff:[],products:[]}),B=He({batch_id:null,produced_at:null,notes:"",products:[]}),Me=[{label:"By Product",value:"by_product"},{label:"By Ingredient",value:"by_ingredient"}],je=[{title:"All Status",value:"all",icon:"mdi-view-grid"},{title:"Pending",value:"pending",icon:"mdi-clock-outline",color:"orange"},{title:"Completed",value:"completed",icon:"mdi-check-circle",color:"green"}],ve=[{title:"All Status",value:"all",icon:"mdi-view-grid"},{title:"Pending",value:"pending",icon:"mdi-clock-outline",color:"orange"},{title:"Completed",value:"completed",icon:"mdi-check-circle",color:"green"}],Ce=[{title:"On Date",value:"="},{title:"After",value:">"},{title:"Before",value:"<"},{title:"On or After",value:">="},{title:"On or Before",value:"<="},{title:"Between",value:"in"}],ce=[{title:"Batch Code",key:"batch_code",sortable:!0},{title:"Status",key:"status",sortable:!0,align:"center"},{title:"Production Stats",key:"production_stats",sortable:!1},{title:"Planned Start",key:"planned_at",sortable:!0},{title:"Produced At",key:"produced_at",sortable:!0},{title:"Team Leader",key:"team_leader_name",sortable:!0},{title:"Created By",key:"created_by_name",sortable:!0},{title:"Actions",key:"actions",sortable:!1,align:"end",width:"100px"}],et=[{title:"Product",key:"product_name",sortable:!0},{title:"Planned Qty",key:"qty_product",sortable:!0,align:"center"},{title:"Status",key:"produced",sortable:!0,align:"center"},{title:"Actual Output",key:"good_qty",sortable:!1},{title:"Actions",key:"actions",sortable:!1,align:"center"}],tt=[{title:"Product / Batch",key:"product_name",sortable:!0},{title:"Quantity",key:"qty_product",sortable:!0,align:"center"},{title:"Staffs",key:"staff_count",sortable:!0,align:"center"},{title:"Mode",key:"mode",sortable:!0},{title:"Status",key:"status",sortable:!0},{title:"Planned At",key:"planned_at",sortable:!0},{title:"Produced At",key:"produced_at",sortable:!0},{title:"Team Leader",key:"team_leader_name",sortable:!0},{title:"Actions",key:"actions",sortable:!1,align:"end",width:"180px"}],Se=[{title:"Ingredient",key:"item_name"},{title:"Quantity Required",key:"qty_required"},{title:"Available",key:"available",align:"center"},{title:"Unit",key:"unit",align:"center"}],dl=[{title:"Staff Member",key:"staff_id",width:"250px"},{title:"Role",key:"role",width:"240px"},{title:"Notes",key:"notes",width:"240px"},{title:"Actions",key:"actions",align:"center",sortable:!1}],pt=d=>({completed:"green",partial:"orange",pending:"red",cancelled:"grey"})[d]||"grey",_t=d=>({completed:"Completed",partial:"Partial",pending:"Pending",cancelled:"Cancelled"})[d]||d,nl=d=>({completed:"bg-green",partial:"bg-orange",pending:"bg-red",cancelled:"bg-grey"})[d]||"bg-primary",il=d=>({pending:"bg-orange",completed:"bg-green",active:"bg-primary",cancelled:"bg-red"})[d]||"bg-primary",rl=Q(()=>{let d=0;return Object.keys(O).forEach(e=>{const m=O[e];(Array.isArray(m)&&m.length||m&&m!=="all")&&d++}),d}),ul=Q(()=>{let d=0;return Object.keys(H).forEach(e=>{const m=H[e];(Array.isArray(m)&&m.length||m&&m!=="all")&&d++}),d}),cl=()=>{D.value=!D.value,$.value=1,Ae()},Ae=()=>{D.value?Be():Tl()},Be=async()=>{E.value=!0;try{const d=new URLSearchParams({page:$.value,limit:10});Object.entries(H).forEach(([a,f])=>{f&&f!=="all"&&!(Array.isArray(f)&&!f.length)&&d.append(a,f)});const m=await(await fetch(`/productions/batches?${d.toString()}`)).json();R.value=m.data||[],K.value=m.totalPages||1}catch(d){console.error("Failed to load batches:",d),R.value=[]}finally{E.value=!1}},ml=()=>{Object.assign(H,{product_id:"",status:"all",planned_at:"",planned_end:"",planned_at_op:"=",team_leader:""}),Be()},fl=()=>{$.value=1,Be()},yt=async d=>{var e;try{const a=await(await fetch(`/productions/batches/${d.id}`)).json();C.value=a.batch,C.value.products=a.products||[],C.value.staff=((e=a.products.find(f=>f.staff.length))==null?void 0:e.staff)||[],le.value=!0}catch(m){console.error("Failed to load batch details:",m)}},pl=async d=>{try{const m=await(await fetch(`/productions/batches/${d.id}`)).json();C.value=m.batch,B.batch_id=d.id,B.produced_at=nt(new Date),B.notes="",B.products=m.products.map(a=>({production_id:a.production_id,product_id:a.product_id,product_name:a.product_name,planned_qty:a.qty_product,good_qty:a.good_qty||0,damaged_qty:a.damaged_qty||0,reject_qty:a.reject_qty||0,actual_qty:(a.good_qty||0)+(a.damaged_qty||0)+(a.reject_qty||0),hasDiscrepancy:parseFloat(a.good_qty)!==parseFloat(a.planned_qty),discrepancies:a.discrepancies||[]})),de.value=!0}catch(e){console.error("Failed to load batch for actual production:",e)}},lt=()=>{de.value=!1,B.batch_id=null,B.produced_at=null,B.notes="",B.products=[]},Ie=d=>{d.actual_qty=(Number(d.good_qty)||0)+(Number(d.damaged_qty)||0)+(Number(d.reject_qty)||0),d.hasDiscrepancy=d.good_qty!==d.planned_qty,d.hasDiscrepancy&&(!d.discrepancies||d.discrepancies.length===0)&&at(d)},at=d=>{d.discrepancies||(d.discrepancies=[]),d.discrepancies.push({reason_id:null,notes:""})},vt=(d,e)=>{d.discrepancies&&d.discrepancies.splice(e,1)},Fe=Q(()=>{const d={good_qty:0,damaged_qty:0,reject_qty:0,actual_qty:0};return B.products.forEach(e=>{d.good_qty+=Number(e.good_qty)||0,d.damaged_qty+=Number(e.damaged_qty)||0,d.reject_qty+=Number(e.reject_qty)||0,d.actual_qty+=Number(e.actual_qty)||0}),d}),_l=Q(()=>{if(!B.produced_at||B.products.length===0)return!1;const d=B.products.every(m=>(Number(m.good_qty)||0)>=0&&(Number(m.damaged_qty)||0)>=0&&(Number(m.reject_qty)||0)>=0),e=B.products.every(m=>!m.hasDiscrepancy||m.discrepancies&&m.discrepancies.length>0&&m.discrepancies.every(a=>a.reason_id));return d&&e&&!q.value}),gt=async()=>{q.value=!0;try{const d={produced_at:it(B.produced_at),notes:B.notes,products:B.products.map(a=>({production_id:a.production_id,good_qty:Number(a.good_qty)||0,damaged_qty:Number(a.damaged_qty)||0,reject_qty:Number(a.reject_qty)||0,actual_qty:Number(a.actual_qty)||0,discrepancies:(a.discrepancies||[]).filter(f=>f.reason_id)}))},e=await fetch(`/productions/batches/${B.batch_id}/actual`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),m=await e.json();if(!e.ok){alert(m.message||"Failed to save actual production.");return}de.value=!1,await Be(),lt()}catch(d){console.error("Failed to save batch actual production:",d),alert("Failed to save actual production. Please try again.")}finally{q.value=!1}},yl=d=>{yt(d)},vl=async d=>{if(confirm(`Are you sure you want to delete batch ${d.batch_code}? This will also delete all productions in this batch.`))try{await fetch(`/productions/batches/${d.id}`,{method:"DELETE"}),await Be()}catch(e){console.error("Failed to delete batch:",e),alert("Failed to delete batch. Please try again.")}},gl=d=>{St({id:d})},bl=Q(()=>D.value?R.value.length:v.value.length),xl=Q(()=>D.value?R.value.reduce((d,e)=>d+Number(e.total_good_qty||0),0):v.value.reduce((d,e)=>d+Number(e.qty_product||e.total_qty||0),0)),Vl=Q(()=>D.value?R.value.reduce((d,e)=>d+(e.staff?e.staff.length:0),0):v.value.reduce((d,e)=>d+Number(e.staff_count||0),0)),wl=Q(()=>v.value.reduce((d,e)=>d+Number(e.total_pay||0),0).toFixed(2)),bt=Q(()=>y.products.some(d=>(d.ingredients||[]).some(e=>e.exceeds))),xt=Q(()=>{const d=y.staff.map(e=>{var m;return typeof e.staff_id=="object"?(m=e.staff_id)==null?void 0:m.id:e.staff_id}).filter(Boolean);return ue.value.filter(e=>!d.includes(e.id))}),Vt=Q(()=>y.staff.filter(d=>d.staff_id).length),wt=Q(()=>y.products.reduce((d,e)=>d+Number(e.computed_qty_product||0),0)),kt=Q(()=>{const d=new Map;for(const e of y.products)for(const m of e.ingredients||[]){if(!m.item_id)continue;d.has(m.item_id)||d.set(m.item_id,{item_id:m.item_id,item_name:m.item_name,unit:m.unit,qty_required:0,available:m.available||0,exceeds:!1});const a=d.get(m.item_id);a.qty_required+=Number(m.qty_required||0),a.available=m.available||a.available||0}for(const e of d.values())e.qty_required=+e.qty_required.toFixed(3),e.exceeds=e.qty_required>(e.available||0);return Array.from(d.values()).sort((e,m)=>e.item_name.localeCompare(m.item_name))}),kl=Q(()=>{if(!y.planned_at||!y.products.length)return!1;for(const m of y.products)if(!m.product_id||!m.mode||!m.computed_qty_product||m.computed_qty_product<=0||!m.ingredients||!m.ingredients.length)return!1;const d=y.staff.some(m=>m.staff_id),e=y.products.every(m=>(m.productGroups||[]).every(a=>!a.is_mandatory||m.group_choices[a.id]));return!(bt.value||!e||!d||q.value)});function Ne(d){return d?new Date(d).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}function Ge(d){var e;return((e=re.value.find(m=>m.id===d))==null?void 0:e.name)||"Product"}function hl(d){const e=Ge(d.product_id);return d.product_id?d.computed_qty_product?`${e} • ${d.computed_qty_product} units`:e:"Select product & mode"}function ql(d,e){const m=Ge(d.product_id);return`${e+1}. ${m}`}const ot=N(!1);function Pl(){const d=wt.value,e=Number(y.good_qty||0);ot.value=!!(d&&e!==d),ot.value&&!y.discrepancies.length&&zl()}function zl(){y.discrepancies.push({reason_id:null,notes:""})}function ht(){y.staff.push({staff_id:null,role:"",notes:""})}function Cl(d){y.staff.splice(d,1)}function Sl(){y.staff=[]}let Al=1;function qt(){return{uid:Al++,product_id:null,mode:"by_product",qty_product_input:null,base_ingredient_id:null,base_ingredient_qty:null,baseUnit:"",computed_qty_product:0,recipeItems:[],productGroups:[],group_choices:{},expandedGroups:[],ingredients:[],innerTab:"ingredients"}}function st(){y.products.push(qt()),Y.value==="summary"&&(Y.value=0)}function Il(d){y.products.splice(d,1),typeof Y.value=="number"&&Y.value>=y.products.length&&(Y.value=y.products.length?y.products.length-1:"summary")}async function Pt(d){if(d.recipeItems=[],d.productGroups=[],d.group_choices={},d.expandedGroups=[],d.ingredients=[],d.base_ingredient_id=null,d.base_ingredient_qty=null,d.baseUnit="",d.computed_qty_product=0,!!d.product_id)try{const m=await(await fetch(`/products/${d.product_id}/groups`)).json();d.recipeItems=m.fixed_items||[],d.productGroups=m.groups||[],d.productGroups.forEach((a,f)=>{var u;const n=(u=a.combinations)==null?void 0:u.find(w=>w.is_default);n&&(d.group_choices[a.id]=n.id),d.expandedGroups.push(f)}),ge(d)}catch(e){console.error("Failed to load product details:",e)}}function ge(d){var a,f,n;if(!d.product_id||!d.mode){d.ingredients=[],d.computed_qty_product=0;return}let e=0;if(d.mode==="by_product")e=Number(d.qty_product_input||0);else if(d.mode==="by_ingredient"){const u=d.recipeItems.find(w=>w.item_id===Number(d.base_ingredient_id));d.baseUnit=(u==null?void 0:u.unit)||"",u&&u.quantity_per_unit>0&&d.base_ingredient_qty>0&&(e=Number(d.base_ingredient_qty)/u.quantity_per_unit)}if(!e||e<=0){d.ingredients=[],d.computed_qty_product=0;return}d.computed_qty_product=+e.toFixed(3);const m=[];for(const u of d.recipeItems){const w=((a=ze.value.find(J=>J.item_id===u.item_id))==null?void 0:a.available_qty)||0,j=+(u.quantity_per_unit*e).toFixed(3);m.push({item_id:u.item_id,item_name:u.item_name,unit_id:u.unit_id,unit:u.unit,qty_required:j,available:+w,exceeds:j>w,from_group:!1,group_id:null,group_name:null,combination_id:null})}for(const u of d.productGroups){const w=d.group_choices[u.id];if(!w)continue;const j=(f=u.combinations)==null?void 0:f.find(J=>J.id===w);if(!(!j||!j.options))for(const J of j.options){const be=((n=ze.value.find(Oe=>Oe.item_id===J.item_id))==null?void 0:n.available_qty)||0,Ee=+(J.quantity_per_unit*e).toFixed(3);m.push({item_id:J.item_id,item_name:J.item_name,unit:J.unit,qty_required:Ee,available:+be,exceeds:Ee>be,from_group:!0,group_id:u.id,group_name:u.name,combination_id:w})}}d.ingredients=m}function dt(){ee.value=!0,L.value=!1,ne.value=!1,T.value=!0,Le(),st(),ht()}function zt(){ee.value=!1,ot.value=!1,L.value=!1,ne.value=!1,Le()}function Le(){Object.assign(y,{id:null,planned_at:null,produced_at:null,notes:"",good_qty:null,damaged_qty:null,reject_qty:null,actual_qty:null,discrepancies:[],staff:[],products:[]}),Y.value=0}function Ul(){Object.assign(O,{product_id:"",status:"all",planned_at:"",planned_end:"",planned_at_op:"=",produced_at:"",produced_end:"",produced_at_op:"=",team_leader:"",discrepancy_reason:[]}),Ae()}function Dl(){$.value=1,Ae()}async function Tl(){E.value=!0;try{const d=new URLSearchParams({page:$.value,limit:10});Object.entries(O).forEach(([a,f])=>{f&&f!=="all"&&!(Array.isArray(f)&&!f.length)&&d.append(a,f)});const m=await(await fetch(`/productions?${d.toString()}`)).json();v.value=m.data||[],K.value=m.totalPages||1}catch(d){console.error("Failed to load productions:",d),v.value=[]}finally{E.value=!1}}async function jl(){try{const e=await(await fetch("/products?limit=1000&page=1")).json();re.value=e.data||[]}catch(d){console.error("Failed to load products:",d)}}async function Bl(){try{const e=await(await fetch("/staffs?status=Active&limit=1000&page=1")).json();ue.value=e.data||[]}catch(d){console.error("Failed to load staff:",d)}}async function Ct(){try{const d=await fetch("/items/availableStock");ze.value=await d.json()}catch(d){console.error("Failed to load stock:",d)}}async function Nl(){try{const e=await(await fetch("/productions/discrepancyReasons")).json();ye.value=e.data||[]}catch(d){console.error("Failed to load discrepancy reasons:",d)}}async function St(d){try{const e=await fetch(`/productions/${d.id}`);P.value=await e.json(),te.value=!0}catch(e){console.error("Failed to load production details:",e)}}const At=d=>({"Team Leader":"blue",Assistant:"green",Support:"orange"})[d]||"grey",El=async d=>{L.value=!0,ne.value=!1,ee.value=!0,T.value=!0,Le();try{const e=await fetch(`/productions/batches/${d.id}`),m=await e.json();if(!e.ok)throw new Error(m.message||"Failed to load batch for editing.");y.id=m.batch.id,y.notes=m.batch.notes||"",y.planned_at=nt(m.batch.planned_at),y.produced_at=nt(m.batch.produced_at),y.products=[],(m.products||[]).forEach(a=>{const f=qt();f.production_id=a.production_id,f.product_id=a.product_id,f.product_name=a.product_name,f.planned_qty=a.qty_product||0,f.good_qty=a.good_qty||0,f.damaged_qty=a.damaged_qty||0,f.reject_qty=a.reject_qty||0,f.actual_qty=a.actual_qty||0,f.hasDiscrepancy=a.discrepancies.length>0,f.discrepancies=a.discrepancies||[],f.mode=a.mode||"by_product",y.staff=a.staff||[],f.mode==="by_product"?f.qty_product_input=Number(a.qty_product||0):(f.base_ingredient_id=a.base_ingredient_id||null,f.base_ingredient_qty=a.base_ingredient_qty||null),f.computed_qty_product=Number(a.qty_product||0)||0,y.products.push(f)}),y.products.length||st();for(const a of m.products||[]){const f=y.products.find(u=>u.production_id===a.production_id)||y.products.find(u=>u.product_id===a.product_id);if(!f||!f.product_id)continue;await Pt(f);const n=a.group_choices||[];n.length?n.forEach(u=>{u.group_id&&u.combination_id&&(f.group_choices[u.group_id]=u.combination_id)}):Array.isArray(a.ingredients)&&a.ingredients.forEach(u=>{u.group_id&&u.combination_id&&(f.group_choices[u.group_id]=u.combination_id)}),Array.isArray(a.ingredients)&&a.ingredients.length&&(f.ingredients=a.ingredients.map(u=>{var J;const w=((J=ze.value.find(be=>be.item_id===u.item_id))==null?void 0:J.available_qty)||0,j=Number(u.qty_required||u.quantity||0);return{item_id:u.item_id,item_name:u.item_name,unit:u.unit,qty_required:j,available:+w,exceeds:j>w,from_group:!!u.group_id,group_id:u.group_id||null,group_name:u.group_name||null,combination_id:u.combination_id||null}}))}Y.value=y.products.length?0:"summary",Pl()}catch(e){console.error("Failed to load batch for editing:",e),alert("Failed to load batch for editing."),ee.value=!1}};async function It(){q.value=!0;try{const d=y.products.map(u=>{const w=Object.entries(u.group_choices||{}).filter(([,j])=>j).map(([j,J])=>({group_id:Number(j),combination_id:J}));return{production_id:u.production_id||null,product_id:u.product_id,mode:u.mode,qty_product:u.computed_qty_product,good_qty:u.good_qty||0,damaged_qty:u.damaged_qty||0,reject_qty:u.reject_qty||0,actual_qty:u.actual_qty||0,discrepancies:u.discrepancies,base_ingredient_id:u.base_ingredient_id,base_ingredient_qty:u.base_ingredient_qty,ingredients:(u.ingredients||[]).map(j=>({item_id:j.item_id,qty_required:Number(j.qty_required||0),unit:j.unit,group_id:j.group_id||null,combination_id:j.combination_id||null})),group_choices:w}}),e={planned_at:it(y.planned_at),produced_at:y.produced_at?it(y.produced_at):null,notes:y.notes,products:d,staffs:y.staff.filter(u=>u.staff_id).map(u=>({staff_id:typeof u.staff_id=="object"?u.staff_id.id:u.staff_id,role:u.role||null,notes:u.notes||null}))},m=L.value?`/productions/${y.id}`:"/productions",a=L.value?"PUT":"POST",f=await fetch(m,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await f.json();if(!f.ok){n.error==="INSUFFICIENT_STOCK"?alert(`${n.message}
Available: ${n.details.available}
Required: ${n.details.required}`):alert(n.message||"Failed to save production.");return}ee.value=!1,Le(),await Ct(),await Ae()}catch(d){console.error("Failed to save production:",d),alert("Failed to save production. Please try again.")}finally{q.value=!1}}return ca(async()=>{await Promise.all([Bl(),jl(),Ae(),Nl(),Ct()])}),(d,e)=>{const m=ma("VueDatePicker");return p(),b(fa,{class:"production-container",fluid:""},{default:t(()=>[y.damaged_qty>0||y.reject_qty>0?(p(),b(fe,{key:0,border:"start",class:"mt-2",type:"warning",variant:"tonal"},{default:t(()=>e[27]||(e[27]=[s(" Some quantities were marked as damaged or reject — please ensure they're tracked in the ledger. ")])),_:1})):z("",!0),l(g,{class:"mb-6",elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-6"},{default:t(()=>[o("div",Ia,[e[31]||(e[31]=o("div",null,[o("h1",{class:"text-h4 font-weight-bold text-primary mb-2"}," Production Management "),o("p",{class:"text-body-1 text-grey"}," Manage production batches and individual productions ")],-1)),o("div",Ua,[l(U,{class:"px-6",color:"primary",elevation:"2",size:"large",onClick:dt},{default:t(()=>[l(c,{size:"20",start:""},{default:t(()=>e[28]||(e[28]=[s("mdi-plus-circle")])),_:1}),e[29]||(e[29]=s(" New Production "))]),_:1}),l(U,{class:"px-6",color:"secondary",elevation:"2",size:"large",onClick:cl},{default:t(()=>[l(c,{size:"20",start:""},{default:t(()=>e[30]||(e[30]=[s("mdi-view-grid")])),_:1}),s(" "+i(D.value?"Show Individual":"Show Batches"),1)]),_:1})])])]),_:1})]),_:1}),l(M,{class:"mb-6"},{default:t(()=>[l(_,{cols:"12",md:"3",sm:"6"},{default:t(()=>[l(g,{border:"",class:"stat-card",elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-4"},{default:t(()=>[o("div",Da,[l(S,{class:"mr-3",color:"blue-lighten-5",size:"48"},{default:t(()=>[l(c,{color:"blue",size:"24"},{default:t(()=>e[32]||(e[32]=[s("mdi-factory")])),_:1})]),_:1}),o("div",null,[o("div",Ta,i(D.value?R.value.length:v.value.length),1),o("div",ja,i(D.value?"Total Batches":"Total Productions"),1)])])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3",sm:"6"},{default:t(()=>[l(g,{border:"",class:"stat-card",elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-4"},{default:t(()=>[o("div",Ba,[l(S,{class:"mr-3",color:"green-lighten-5",size:"48"},{default:t(()=>[l(c,{color:"green",size:"24"},{default:t(()=>e[33]||(e[33]=[s("mdi-account-group")])),_:1})]),_:1}),o("div",null,[o("div",Na,i(Vl.value),1),e[34]||(e[34]=o("div",{class:"text-caption text-grey"},"Staff Assignments",-1))])])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3",sm:"6"},{default:t(()=>[l(g,{border:"",class:"stat-card",elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-4"},{default:t(()=>[o("div",Ea,[l(S,{class:"mr-3",color:"orange-lighten-5",size:"48"},{default:t(()=>[l(c,{color:"orange",size:"24"},{default:t(()=>e[35]||(e[35]=[s("mdi-chart-line")])),_:1})]),_:1}),o("div",null,[o("div",Ra,i(xl.value),1),e[36]||(e[36]=o("div",{class:"text-caption text-grey"},"Total Units (Planned)",-1))])])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3",sm:"6"},{default:t(()=>[l(g,{border:"",class:"stat-card",elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-4"},{default:t(()=>[o("div",$a,[l(S,{class:"mr-3",color:"purple-lighten-5",size:"48"},{default:t(()=>[l(c,{color:"purple",size:"24"},{default:t(()=>e[37]||(e[37]=[s("mdi-cash-multiple")])),_:1})]),_:1}),o("div",null,[o("div",Ma,i(wl.value),1),e[38]||(e[38]=o("div",{class:"text-caption text-grey"},"Labor Cost",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),D.value?(p(),b(g,{key:1,class:"mb-4",elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-0"},{default:t(()=>[o("div",Fa,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[39]||(e[39]=[s("mdi-view-grid")])),_:1}),e[40]||(e[40]=o("h3",{class:"text-h6 font-weight-medium"},"Production Batches",-1))]),l(g,{border:"",class:"pa-6 mb-6",elevation:"3",rounded:"lg"},{default:t(()=>[o("div",Ga,[l(S,{class:"mr-3",color:"primary",size:"40",variant:"tonal"},{default:t(()=>[l(c,{color:"primary"},{default:t(()=>e[41]||(e[41]=[s("mdi-filter")])),_:1})]),_:1}),e[42]||(e[42]=o("div",null,[o("h3",{class:"text-h6 font-weight-bold text-primary"}," Batch Filters "),o("p",{class:"text-caption text-grey mt-1"}," Refine your batch records ")],-1)),l(me),l(k,{class:"mr-2",color:"primary",size:"small",variant:"flat"},{default:t(()=>[s(i(ul.value)+" Active ",1)]),_:1})]),l(xe,{class:"mb-6"}),l(M,{class:"align-start",dense:""},{default:t(()=>[l(_,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[l(g,{border:"",class:"rounded-lg h-100",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",La,[l(c,{class:"mr-2",color:"primary",size:"18"},{default:t(()=>e[43]||(e[43]=[s("mdi-package-variant")])),_:1}),e[44]||(e[44]=o("label",{class:"text-caption font-weight-medium text-primary"},"Product",-1))]),l(we,{modelValue:H.product_id,"onUpdate:modelValue":e[0]||(e[0]=a=>H.product_id=a),clearable:"",color:"primary",density:"compact","hide-details":"","item-title":"name","item-value":"id",items:re.value,placeholder:"All Products",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[l(g,{border:"",class:"rounded-lg h-100",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",Oa,[l(c,{class:"mr-2",color:"blue",size:"18"},{default:t(()=>e[45]||(e[45]=[s("mdi-progress-clock")])),_:1}),e[46]||(e[46]=o("label",{class:"text-caption font-weight-medium text-primary"},"Status",-1))]),l(pe,{modelValue:H.status,"onUpdate:modelValue":e[1]||(e[1]=a=>H.status=a),color:"primary",density:"compact","hide-details":"",items:ve,placeholder:"Select Status",variant:"underlined"},{item:t(({item:a,props:f})=>[l(se,Nt(Et(f)),{prepend:t(()=>[l(c,{color:a.raw.color||"grey"},{default:t(()=>[s(i(a.raw.icon),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:t(({item:a})=>[o("div",Ha,[l(c,{class:"mr-2",color:a.raw.color||"grey",size:"16"},{default:t(()=>[s(i(a.raw.icon),1)]),_:2},1032,["color"]),o("span",null,i(a.title),1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[l(g,{border:"",class:"rounded-lg h-100",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",Qa,[l(c,{class:"mr-2",color:"purple",size:"18"},{default:t(()=>e[47]||(e[47]=[s("mdi-account-tie")])),_:1}),e[48]||(e[48]=o("label",{class:"text-caption font-weight-medium text-primary"},"Team Leader",-1))]),l(we,{modelValue:H.team_leader,"onUpdate:modelValue":e[2]||(e[2]=a=>H.team_leader=a),clearable:"",color:"primary",density:"compact","hide-details":"","item-title":"name","item-value":"id",items:ue.value,placeholder:"All Leaders",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"6",md:"8"},{default:t(()=>[l(g,{border:"",class:"rounded-lg",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",Ya,[l(c,{class:"mr-2",color:"green",size:"18"},{default:t(()=>e[49]||(e[49]=[s("mdi-calendar-clock")])),_:1}),e[50]||(e[50]=o("label",{class:"text-caption font-weight-medium text-primary"},"Planned Date Range",-1))]),l(M,{class:"align-center",dense:""},{default:t(()=>[l(_,{cols:"12",sm:"4"},{default:t(()=>[l(pe,{modelValue:H.planned_at_op,"onUpdate:modelValue":e[3]||(e[3]=a=>H.planned_at_op=a),color:"primary",density:"compact","hide-details":"",items:Ce,variant:"underlined"},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",sm:"4"},{default:t(()=>[l(m,{modelValue:H.planned_at,"onUpdate:modelValue":e[4]||(e[4]=a=>H.planned_at=a),"auto-apply":"",format:"dd-MM-yyyy","model-type":"format",placeholder:"Start Date",teleport:!0},null,8,["modelValue"])]),_:1}),H.planned_at_op==="in"?(p(),b(_,{key:0,cols:"12",sm:"4"},{default:t(()=>[l(m,{modelValue:H.planned_end,"onUpdate:modelValue":e[5]||(e[5]=a=>H.planned_end=a),"auto-apply":"",format:"dd-MM-yyyy","model-type":"format",placeholder:"End Date",teleport:!0},null,8,["modelValue"])]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(xe,{class:"mt-4 mb-4"}),o("div",Ja,[o("div",Wa,[l(c,{class:"mr-1",size:"14"},{default:t(()=>e[51]||(e[51]=[s("mdi-information")])),_:1}),e[52]||(e[52]=s(" Use filters to find specific batch records "))]),o("div",Ka,[l(U,{class:"px-4",color:"grey",size:"small",variant:"outlined",onClick:ml},{default:t(()=>[l(c,{size:"18",start:""},{default:t(()=>e[53]||(e[53]=[s("mdi-refresh")])),_:1}),e[54]||(e[54]=s(" Reset All "))]),_:1}),l(U,{class:"px-4",color:"primary",elevation:"2",size:"small",onClick:fl},{default:t(()=>[l(c,{size:"18",start:""},{default:t(()=>e[55]||(e[55]=[s("mdi-filter-check")])),_:1}),e[56]||(e[56]=s(" Apply Filters "))]),_:1})])])]),_:1}),l(Rt,{active:E.value,color:"primary",height:"4",indeterminate:E.value},null,8,["active","indeterminate"]),l(De,{class:"elevation-0",density:"comfortable",headers:ce,hover:"",items:R.value,loading:E.value,search:Pe.value},{loading:t(()=>[l(Gt,{type:"table-row@10"})]),"item.status":t(({item:a})=>[l(k,{class:"font-weight-bold text-uppercase",color:pt(a.status),size:"small",variant:"flat"},{default:t(()=>[s(i(_t(a.status)),1)]),_:2},1032,["color"])]),"item.batch_code":t(({item:a})=>[o("div",Xa,[l(S,{class:"mr-3",color:"primary",size:"32",variant:"tonal"},{default:t(()=>[l(c,{color:"primary",size:"16"},{default:t(()=>e[57]||(e[57]=[s("mdi-package-variant")])),_:1})]),_:1}),o("div",null,[o("div",Za,i(a.batch_code),1),o("div",eo,i(a.total_products)+" products ",1)])])]),"item.production_stats":t(({item:a})=>[o("div",to,[l(k,{class:"mr-1 mb-1",color:"green",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(a.total_good_qty||0)+" good ",1)]),_:2},1024),l(k,{class:"mr-1 mb-1",color:"orange",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(a.total_damaged_qty||0)+" damaged ",1)]),_:2},1024),l(k,{class:"mb-1",color:"red",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(a.total_reject_qty||0)+" reject ",1)]),_:2},1024)])]),"item.planned_at":t(({item:a})=>[o("div",lo,i(a.planned_at),1)]),"item.produced_at":t(({item:a})=>[o("div",ao,i(a.produced_at||"Not completed"),1)]),"item.team_leader_name":t(({item:a})=>[o("div",oo,[l(S,{class:"mr-2",color:"blue-grey-lighten-5",size:"28"},{default:t(()=>[l(c,{color:"blue-grey",size:"14"},{default:t(()=>e[58]||(e[58]=[s("mdi-account-tie")])),_:1})]),_:1}),o("span",so,i(a.team_leader_name),1)])]),"item.actions":t(({item:a})=>[o("div",no,[l(Ft,{"close-on-content-click":!1,location:"bottom end",transition:"scale-transition"},{activator:t(({props:f})=>[l(U,_e(f,{class:"action-menu-btn",color:"primary",icon:"",size:"small",variant:"text"}),{default:t(()=>[l(c,null,{default:t(()=>e[59]||(e[59]=[s("mdi-dots-vertical")])),_:1})]),_:2},1040)]),default:t(()=>[l(g,{elevation:"8","min-width":"240",rounded:"lg"},{default:t(()=>[l(x,{class:Z(["pa-4",nl(a.status)])},{default:t(()=>[o("div",io,[o("div",ro,[l(S,{class:"mr-3",color:"white",size:"32",variant:"tonal"},{default:t(()=>[l(c,{color:"primary",size:"18"},{default:t(()=>e[60]||(e[60]=[s(" mdi-package-variant ")])),_:1})]),_:1}),o("div",null,[e[61]||(e[61]=o("div",{class:"text-white text-body-2 font-weight-bold"}," Batch Actions ",-1)),o("div",uo,i(a.batch_code),1)])]),l(k,{color:"white",size:"small",variant:"flat"},{default:t(()=>[s(i(a.status),1)]),_:2},1024)])]),_:2},1032,["class"]),l(Ve,{class:"pa-2",density:"compact"},{default:t(()=>[l(se,{class:"rounded-lg mb-1 action-item",onClick:f=>yt(a)},{prepend:t(()=>[l(S,{class:"mr-3",color:"blue-lighten-5",size:"36",variant:"flat"},{default:t(()=>[l(c,{color:"blue",size:"18"},{default:t(()=>e[62]||(e[62]=[s(" mdi-eye-outline ")])),_:1})]),_:1})]),default:t(()=>[l(ie,{class:"text-body-2 font-weight-medium"},{default:t(()=>e[63]||(e[63]=[s(" View Batch Details ")])),_:1}),l(ae,{class:"text-caption text-blue"},{default:t(()=>e[64]||(e[64]=[s(" Complete batch information ")])),_:1})]),_:2},1032,["onClick"]),l(se,{class:"rounded-lg mb-1 action-item",onClick:f=>pl(a)},{prepend:t(()=>[l(S,{class:"mr-3",color:"green-lighten-5",size:"36",variant:"flat"},{default:t(()=>[l(c,{color:"green",size:"18"},{default:t(()=>e[65]||(e[65]=[s(" mdi-plus-circle ")])),_:1})]),_:1})]),default:t(()=>[a.produced_count>0?(p(),I(G,{key:0},[l(ie,{class:"text-body-2 font-weight-medium"},{default:t(()=>e[66]||(e[66]=[s(" Edit Actual Production ")])),_:1}),l(ae,{class:"text-caption text-green"},{default:t(()=>e[67]||(e[67]=[s(" Edit Recorded output for all products ")])),_:1})],64)):(p(),I(G,{key:1},[l(ie,{class:"text-body-2 font-weight-medium"},{default:t(()=>e[68]||(e[68]=[s(" Add Actual Production ")])),_:1}),l(ae,{class:"text-caption text-green"},{default:t(()=>e[69]||(e[69]=[s(" Record output for all products ")])),_:1})],64))]),_:2},1032,["onClick"]),l(se,{class:"rounded-lg mb-1 action-item",onClick:f=>El(a)},{prepend:t(()=>[l(S,{class:"mr-3",color:"orange-lighten-5",size:"36",variant:"flat"},{default:t(()=>[l(c,{color:"orange",size:"18"},{default:t(()=>e[70]||(e[70]=[s(" mdi-pencil-outline ")])),_:1})]),_:1})]),default:t(()=>[l(ie,{class:"text-body-2 font-weight-medium"},{default:t(()=>e[71]||(e[71]=[s(" Edit Batch ")])),_:1}),l(ae,{class:"text-caption text-orange"},{default:t(()=>e[72]||(e[72]=[s(" Modify batch products & staff ")])),_:1})]),_:2},1032,["onClick"]),l(se,{class:"rounded-lg mb-1 action-item",onClick:f=>yl(a)},{prepend:t(()=>[l(S,{class:"mr-3",color:"purple-lighten-5",size:"36",variant:"flat"},{default:t(()=>[l(c,{color:"purple",size:"18"},{default:t(()=>e[73]||(e[73]=[s(" mdi-format-list-bulleted ")])),_:1})]),_:1})]),default:t(()=>[l(ie,{class:"text-body-2 font-weight-medium"},{default:t(()=>e[74]||(e[74]=[s(" View Products ")])),_:1}),l(ae,{class:"text-caption text-purple"},{default:t(()=>e[75]||(e[75]=[s(" See all products in batch ")])),_:1})]),_:2},1032,["onClick"]),l(xe,{class:"my-2"}),l(se,{class:"rounded-lg action-item text-error",onClick:f=>vl(a)},{prepend:t(()=>[l(S,{class:"mr-3",color:"red-lighten-5",size:"36",variant:"flat"},{default:t(()=>[l(c,{color:"red",size:"18"},{default:t(()=>e[76]||(e[76]=[s(" mdi-delete-outline ")])),_:1})]),_:1})]),default:t(()=>[l(ie,{class:"text-body-2 font-weight-medium text-error"},{default:t(()=>e[77]||(e[77]=[s(" Delete Batch ")])),_:1}),l(ae,{class:"text-caption text-red"},{default:t(()=>e[78]||(e[78]=[s(" Remove permanently ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),"no-data":t(()=>[o("div",co,[l(c,{class:"mb-4",color:"grey-lighten-2",size:"64"},{default:t(()=>e[79]||(e[79]=[s(" mdi-inbox ")])),_:1}),e[82]||(e[82]=o("div",{class:"text-h6 text-grey"},"No batches found",-1)),e[83]||(e[83]=o("div",{class:"text-body-2 text-grey mt-2"}," Get started by creating your first production batch ",-1)),l(U,{class:"mt-4",color:"primary",onClick:dt},{default:t(()=>[l(c,{start:""},{default:t(()=>e[80]||(e[80]=[s("mdi-plus")])),_:1}),e[81]||(e[81]=s(" Create Production "))]),_:1})])]),_:1},8,["items","loading","search"])]),_:1})]),_:1})):(p(),b(g,{key:2,class:"mb-4",elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-0"},{default:t(()=>[o("div",mo,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[84]||(e[84]=[s("mdi-table")])),_:1}),e[85]||(e[85]=o("h3",{class:"text-h6 font-weight-medium"},"Production Records",-1))]),l(g,{border:"",class:"pa-6 mb-6",elevation:"3",rounded:"lg"},{default:t(()=>[o("div",fo,[l(S,{class:"mr-3",color:"primary",size:"40",variant:"tonal"},{default:t(()=>[l(c,{color:"primary"},{default:t(()=>e[86]||(e[86]=[s("mdi-filter")])),_:1})]),_:1}),e[87]||(e[87]=o("div",null,[o("h3",{class:"text-h6 font-weight-bold text-primary"}," Production Filters "),o("p",{class:"text-caption text-grey mt-1"}," Refine your production records ")],-1)),l(me),l(k,{class:"mr-2",color:"primary",size:"small",variant:"flat"},{default:t(()=>[s(i(rl.value)+" Active ",1)]),_:1})]),l(xe,{class:"mb-6"}),l(M,{class:"align-start",dense:""},{default:t(()=>[l(_,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[l(g,{border:"",class:"rounded-lg h-100",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",po,[l(c,{class:"mr-2",color:"primary",size:"18"},{default:t(()=>e[88]||(e[88]=[s("mdi-package-variant")])),_:1}),e[89]||(e[89]=o("label",{class:"text-caption font-weight-medium text-primary"},"Product",-1))]),l(we,{modelValue:O.product_id,"onUpdate:modelValue":e[6]||(e[6]=a=>O.product_id=a),clearable:"",color:"primary",density:"compact","hide-details":"","item-title":"name","item-value":"id",items:re.value,placeholder:"All Products",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[l(g,{border:"",class:"rounded-lg h-100",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",_o,[l(c,{class:"mr-2",color:"blue",size:"18"},{default:t(()=>e[90]||(e[90]=[s("mdi-progress-clock")])),_:1}),e[91]||(e[91]=o("label",{class:"text-caption font-weight-medium text-primary"},"Status",-1))]),l(pe,{modelValue:O.status,"onUpdate:modelValue":e[7]||(e[7]=a=>O.status=a),color:"primary",density:"compact","hide-details":"",items:je,placeholder:"Select Status",variant:"underlined"},{item:t(({item:a,props:f})=>[l(se,Nt(Et(f)),{prepend:t(()=>[l(c,{color:a.raw.color||"grey"},{default:t(()=>[s(i(a.raw.icon),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:t(({item:a})=>[o("div",yo,[l(c,{class:"mr-2",color:a.raw.color||"grey",size:"16"},{default:t(()=>[s(i(a.raw.icon),1)]),_:2},1032,["color"]),o("span",null,i(a.title),1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[l(g,{border:"",class:"rounded-lg h-100",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",vo,[l(c,{class:"mr-2",color:"purple",size:"18"},{default:t(()=>e[92]||(e[92]=[s("mdi-account-tie")])),_:1}),e[93]||(e[93]=o("label",{class:"text-caption font-weight-medium text-primary"},"Team Leader",-1))]),l(we,{modelValue:O.team_leader,"onUpdate:modelValue":e[8]||(e[8]=a=>O.team_leader=a),clearable:"",color:"primary",density:"compact","hide-details":"","item-title":"name","item-value":"id",items:ue.value,placeholder:"All Leaders",variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",lg:"6",md:"8"},{default:t(()=>[l(g,{border:"",class:"rounded-lg",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",go,[l(c,{class:"mr-2",color:"green",size:"18"},{default:t(()=>e[94]||(e[94]=[s("mdi-calendar-clock")])),_:1}),e[95]||(e[95]=o("label",{class:"text-caption font-weight-medium text-primary"},"Planned Date Range",-1))]),l(M,{class:"align-center",dense:""},{default:t(()=>[l(_,{cols:"12",sm:"4"},{default:t(()=>[l(pe,{modelValue:O.planned_at_op,"onUpdate:modelValue":e[9]||(e[9]=a=>O.planned_at_op=a),color:"primary",density:"compact","hide-details":"",items:Ce,variant:"underlined"},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",sm:"4"},{default:t(()=>[l(m,{modelValue:O.planned_at,"onUpdate:modelValue":e[10]||(e[10]=a=>O.planned_at=a),"auto-apply":"",format:"dd-MM-yyyy","model-type":"format",placeholder:"Start Date",teleport:!0},null,8,["modelValue"])]),_:1}),O.planned_at_op==="in"?(p(),b(_,{key:0,cols:"12",sm:"4"},{default:t(()=>[l(m,{modelValue:O.planned_end,"onUpdate:modelValue":e[11]||(e[11]=a=>O.planned_end=a),"auto-apply":"",format:"dd-MM-yyyy","model-type":"format",placeholder:"End Date",teleport:!0},null,8,["modelValue"])]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(xe,{class:"mt-4 mb-4"}),o("div",bo,[o("div",xo,[l(c,{class:"mr-1",size:"14"},{default:t(()=>e[96]||(e[96]=[s("mdi-information")])),_:1}),e[97]||(e[97]=s(" Use filters to find specific production records "))]),o("div",Vo,[l(U,{class:"px-4",color:"grey",size:"small",variant:"outlined",onClick:Ul},{default:t(()=>[l(c,{size:"18",start:""},{default:t(()=>e[98]||(e[98]=[s("mdi-refresh")])),_:1}),e[99]||(e[99]=s(" Reset All "))]),_:1}),l(U,{class:"px-4",color:"primary",elevation:"2",size:"small",onClick:Dl},{default:t(()=>[l(c,{size:"18",start:""},{default:t(()=>e[100]||(e[100]=[s("mdi-filter-check")])),_:1}),e[101]||(e[101]=s(" Apply Filters "))]),_:1})])])]),_:1}),l(Rt,{active:E.value,color:"primary",height:"4",indeterminate:E.value},null,8,["active","indeterminate"]),l(De,{class:"elevation-0",density:"comfortable",headers:tt,hover:"",items:v.value,loading:E.value,search:Pe.value},{loading:t(()=>[l(Gt,{type:"table-row@10"})]),"item.status":t(({item:a})=>[l(k,{class:"font-weight-bold text-uppercase",color:a.produced_at?"green":"red",size:"small",variant:"flat"},{default:t(()=>[s(i(a.produced_at?"Completed":"Pending"),1)]),_:2},1032,["color"])]),"item.product_name":t(({item:a})=>[o("div",wo,[l(S,{class:"mr-3",color:"primary",size:"32",variant:"tonal"},{default:t(()=>[l(c,{color:"primary",size:"16"},{default:t(()=>e[102]||(e[102]=[s("mdi-package")])),_:1})]),_:1}),o("div",null,[o("div",ko,i(a.product_name||a.batch_label),1),o("div",ho,i(a.mode||"Multiple Products"),1)])])]),"item.qty_product":t(({item:a})=>[l(k,{color:"green",size:"small",variant:"flat"},{default:t(()=>[l(c,{size:"16",start:""},{default:t(()=>e[103]||(e[103]=[s("mdi-counter")])),_:1}),s(" "+i(parseFloat(a.qty_product||a.total_qty||0)),1)]),_:2},1024)]),"item.staff_count":t(({item:a})=>[o("div",qo,[l(S,{class:"mr-2",color:"blue-lighten-5",size:"28"},{default:t(()=>[l(c,{color:"blue",size:"14"},{default:t(()=>e[104]||(e[104]=[s("mdi-account-group")])),_:1})]),_:1}),o("span",Po,i(a.staff_count||0),1)])]),"item.planned_at":t(({item:a})=>[o("div",zo,i(a.planned_at),1)]),"item.produced_at":t(({item:a})=>[o("div",Co,i(a.produced_at),1)]),"item.produced_by_name":t(({item:a})=>[o("div",So,[l(S,{class:"mr-2",color:"blue-grey-lighten-5",size:"28"},{default:t(()=>[l(c,{color:"blue-grey",size:"14"},{default:t(()=>e[105]||(e[105]=[s("mdi-account")])),_:1})]),_:1}),o("span",Ao,i(a.produced_by_name),1)])]),"item.actions":t(({item:a})=>[o("div",Io,[l(Ft,{"close-on-content-click":!1,location:"bottom end",transition:"scale-transition"},{activator:t(({props:f})=>[l(U,_e(f,{class:"action-menu-btn",color:"primary",icon:"",size:"small",variant:"text"}),{default:t(()=>[a.produced_at?(p(),b(c,{key:1},{default:t(()=>e[107]||(e[107]=[s("mdi-dots-vertical")])),_:1})):(p(),b(va,{key:0,color:"orange",dot:"",location:"top end","offset-x":"2","offset-y":"2"},{default:t(()=>[l(c,null,{default:t(()=>e[106]||(e[106]=[s("mdi-dots-vertical")])),_:1})]),_:1}))]),_:2},1040)]),default:t(()=>[l(g,{elevation:"8","min-width":"240",rounded:"lg"},{default:t(()=>[l(x,{class:Z(["pa-4",il(a.produced_at?"completed":"pending")])},{default:t(()=>[o("div",Uo,[o("div",Do,[l(S,{class:"mr-3",color:"white",size:"32",variant:"tonal"},{default:t(()=>[l(c,{color:"primary",size:"18"},{default:t(()=>e[108]||(e[108]=[s(" mdi-factory ")])),_:1})]),_:1}),o("div",null,[e[109]||(e[109]=o("div",{class:"text-white text-body-2 font-weight-bold"}," Production Actions ",-1)),o("div",To,i(a.product_name||"Batch"),1)])]),l(k,{color:"white",size:"small",variant:"flat"},{default:t(()=>[s(i(a.produced_at?"completed":"pending"),1)]),_:2},1024)])]),_:2},1032,["class"]),l(Ve,{class:"pa-2",density:"compact"},{default:t(()=>[l(se,{class:"rounded-lg mb-1 action-item",onClick:f=>St(a)},{prepend:t(()=>[l(S,{class:"mr-3",color:"blue-lighten-5",size:"36",variant:"flat"},{default:t(()=>[l(c,{color:"blue",size:"18"},{default:t(()=>e[110]||(e[110]=[s(" mdi-eye-outline ")])),_:1})]),_:1})]),default:t(()=>[l(ie,{class:"text-body-2 font-weight-medium"},{default:t(()=>e[111]||(e[111]=[s(" View Details ")])),_:1}),l(ae,{class:"text-caption text-blue"},{default:t(()=>e[112]||(e[112]=[s(" Complete information ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),"no-data":t(()=>[o("div",jo,[l(c,{class:"mb-4",color:"grey-lighten-2",size:"64"},{default:t(()=>e[113]||(e[113]=[s(" mdi-inbox ")])),_:1}),e[116]||(e[116]=o("div",{class:"text-h6 text-grey"},"No productions found",-1)),e[117]||(e[117]=o("div",{class:"text-body-2 text-grey mt-2"}," Get started by creating your first production record ",-1)),l(U,{class:"mt-4",color:"primary",onClick:dt},{default:t(()=>[l(c,{start:""},{default:t(()=>e[114]||(e[114]=[s("mdi-plus")])),_:1}),e[115]||(e[115]=s(" Create Production "))]),_:1})])]),_:1},8,["items","loading","search"])]),_:1})]),_:1})),l(g,{elevation:"2",rounded:"lg"},{default:t(()=>[l(x,{class:"pa-4"},{default:t(()=>[o("div",Bo,[o("div",No," Showing "+i(D.value?R.value.length:v.value.length)+" of "+i(bl.value)+" records ",1),l(ya,{modelValue:$.value,"onUpdate:modelValue":[e[12]||(e[12]=a=>$.value=a),Ae],color:"primary",length:K.value,"total-visible":7},null,8,["modelValue","length"])])]),_:1})]),_:1}),l(Je,{modelValue:le.value,"onUpdate:modelValue":e[14]||(e[14]=a=>le.value=a),"max-width":"1200",scrollable:"",transition:"dialog-bottom-transition"},{default:t(()=>[l(g,{class:"rounded-xl",elevation:"16"},{default:t(()=>[l(Qe,{class:"rounded-t-xl",color:"primary",density:"comfortable"},{default:t(()=>[l(S,{class:"mr-3",color:"white",size:"36"},{default:t(()=>[l(c,{color:"primary"},{default:t(()=>e[118]||(e[118]=[s("mdi-package-variant")])),_:1})]),_:1}),l(Ye,{class:"text-h5 font-weight-bold text-white"},{default:t(()=>{var a;return[s(" Batch Details - "+i((a=C.value)==null?void 0:a.batch_code),1)]}),_:1}),l(me),l(U,{color:"white",icon:"mdi-close",variant:"text",onClick:e[13]||(e[13]=a=>le.value=!1)})]),_:1}),l(x,{class:"pa-6"},{default:t(()=>{var a,f;return[l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>[l(M,null,{default:t(()=>[l(_,{cols:"12",md:"4"},{default:t(()=>{var n;return[e[119]||(e[119]=o("div",{class:"text-body-2 text-grey"},"Batch Code",-1)),o("div",Eo,i((n=C.value)==null?void 0:n.batch_code),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var n;return[e[120]||(e[120]=o("div",{class:"text-body-2 text-grey"},"Status",-1)),l(k,{class:"mt-1",color:pt((n=C.value)==null?void 0:n.status),size:"small"},{default:t(()=>{var u;return[s(i(_t((u=C.value)==null?void 0:u.status)),1)]}),_:1},8,["color"])]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var n;return[e[121]||(e[121]=o("div",{class:"text-body-2 text-grey"},"Created By",-1)),o("div",Ro,i((n=C.value)==null?void 0:n.created_by_name),1)]}),_:1})]),_:1}),l(M,{class:"mt-2"},{default:t(()=>[l(_,{cols:"12",md:"4"},{default:t(()=>{var n;return[e[122]||(e[122]=o("div",{class:"text-body-2 text-grey"},"Planned At",-1)),o("div",$o,i((n=C.value)==null?void 0:n.planned_at),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var n;return[e[123]||(e[123]=o("div",{class:"text-body-2 text-grey"},"Produced At",-1)),o("div",Mo,i(((n=C.value)==null?void 0:n.produced_at)||"Not completed"),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var n;return[e[124]||(e[124]=o("div",{class:"text-body-2 text-grey"},"Team Leader",-1)),o("div",Fo,i((n=C.value)==null?void 0:n.team_leader_name),1)]}),_:1})]),_:1}),l(M,{class:"mt-4"},{default:t(()=>[l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var n;return[o("div",Go,i(((n=C.value)==null?void 0:n.total_good_qty)||0),1),e[125]||(e[125]=o("div",{class:"text-caption text-grey"},"Good Quantity",-1))]}),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var n;return[o("div",Lo,i(((n=C.value)==null?void 0:n.total_damaged_qty)||0),1),e[126]||(e[126]=o("div",{class:"text-caption text-grey"},"Damaged",-1))]}),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var n;return[o("div",Oo,i(((n=C.value)==null?void 0:n.total_reject_qty)||0),1),e[127]||(e[127]=o("div",{class:"text-caption text-grey"},"Reject",-1))]}),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var n;return[o("div",Ho,i(((n=C.value)==null?void 0:n.total_products)||0),1),e[128]||(e[128]=o("div",{class:"text-caption text-grey"},"Total Products",-1))]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(g,{class:"rounded-lg",variant:"outlined"},{default:t(()=>[l(Ue,{class:"d-flex align-center"},{default:t(()=>[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[129]||(e[129]=[s("mdi-format-list-bulleted")])),_:1}),e[130]||(e[130]=s(" Products in Batch "))]),_:1}),l(x,{class:"pa-0"},{default:t(()=>{var n;return[l(De,{class:"elevation-0",headers:et,items:((n=C.value)==null?void 0:n.products)||[]},{"item.product_name":t(({item:u})=>[o("div",Qo,[l(S,{class:"mr-3",color:"primary",size:"32",variant:"tonal"},{default:t(()=>[l(c,{color:"primary",size:"16"},{default:t(()=>e[131]||(e[131]=[s("mdi-package")])),_:1})]),_:1}),o("div",null,[o("div",Yo,i(u.product_name),1),o("div",Jo," Planned: "+i(u.qty_product)+" units ",1)])])]),"item.produced":t(({item:u})=>[l(k,{color:u.produced?"green":"orange",size:"small",variant:"flat"},{default:t(()=>[s(i(u.produced?"Produced":"Pending"),1)]),_:2},1032,["color"])]),"item.good_qty":t(({item:u})=>[u.produced?(p(),I("div",Wo,[o("span",Ko,i(u.good_qty||0)+" good",1),o("span",Xo,i(u.damaged_qty||0)+" damaged",1),o("span",Zo,i(u.reject_qty||0)+" reject",1)])):(p(),I("span",es,"Not produced"))]),"item.actions":t(({item:u})=>[u.production_id?(p(),b(U,{key:0,color:"primary",size:"small",variant:"text",onClick:w=>gl(u.production_id)},{default:t(()=>[l(c,{size:"16"},{default:t(()=>e[132]||(e[132]=[s("mdi-eye")])),_:1}),e[133]||(e[133]=s(" View "))]),_:2},1032,["onClick"])):z("",!0)]),_:1},8,["items"])]}),_:1})]),_:1}),(f=(a=C.value)==null?void 0:a.staff)!=null&&f.length?(p(),b(g,{key:0,class:"rounded-lg mb-4",variant:"outlined"},{default:t(()=>[l(Ue,{class:"d-flex align-center"},{default:t(()=>[l(c,{class:"mr-2",color:"blue"},{default:t(()=>e[134]||(e[134]=[s("mdi-account-group")])),_:1}),e[135]||(e[135]=s(" Staff Assignments ")),l(k,{class:"ml-2",color:"blue",size:"small",variant:"flat"},{default:t(()=>[s(i(C.value.staff.length)+" staff ",1)]),_:1})]),_:1}),l(x,{class:"pa-0"},{default:t(()=>[l(Ve,{class:"pa-0",lines:"two"},{default:t(()=>[(p(!0),I(G,null,oe(C.value.staff,(n,u)=>(p(),b(se,{key:n.staff_id,class:Z(["px-4",{"bg-grey-lighten-4":u%2===0}])},{prepend:t(()=>[l(S,{class:"mr-3",color:"blue",size:"36"},{default:t(()=>[o("span",ts,i(u+1),1)]),_:2},1024)]),default:t(()=>[l(ie,{class:"font-weight-medium"},{default:t(()=>[s(i(n.staff_name)+" ",1),l(k,{class:"ml-2",color:At(n.role),size:"x-small",variant:"flat"},{default:t(()=>[s(i(n.role),1)]),_:2},1032,["color"])]),_:2},1024),l(ae,{class:"mt-1"},{default:t(()=>[n.notes?(p(),I("span",ls,i(n.notes),1)):(p(),I("span",as," No notes "))]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})):z("",!0)]}),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Je,{modelValue:de.value,"onUpdate:modelValue":e[17]||(e[17]=a=>de.value=a),"max-width":"1000",persistent:"",scrollable:""},{default:t(()=>[l(g,{class:"rounded-xl",elevation:"16"},{default:t(()=>[l(Qe,{class:"rounded-t-xl",color:"primary",density:"comfortable"},{default:t(()=>[l(S,{class:"mr-3",color:"white",size:"36"},{default:t(()=>[l(c,{color:"primary"},{default:t(()=>e[136]||(e[136]=[s("mdi-plus-circle")])),_:1})]),_:1}),l(Ye,{class:"text-h5 font-weight-bold text-white"},{default:t(()=>{var a;return[s(" Add Actual Production - "+i((a=C.value)==null?void 0:a.batch_code),1)]}),_:1}),l(me),l(U,{color:"white",icon:"mdi-close",variant:"text",onClick:lt})]),_:1}),l(x,{class:"pa-6"},{default:t(()=>[l(Lt,{onSubmit:$t(gt,["prevent"])},{default:t(()=>[l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>[o("div",os,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[137]||(e[137]=[s("mdi-calendar-clock")])),_:1}),e[138]||(e[138]=o("h4",{class:"text-h6 font-weight-medium"}," Production Information ",-1))]),l(M,{dense:""},{default:t(()=>[l(_,{cols:"12",md:"6"},{default:t(()=>[o("div",ss,[B.produced_at?(p(),I("span",ds," Actual Production Date & Time ")):z("",!0),l(m,{modelValue:B.produced_at,"onUpdate:modelValue":e[15]||(e[15]=a=>B.produced_at=a),"auto-apply":"",class:"rounded-lg border px-4 py-2 w-100","enable-time-picker":!0,format:"dd-MM-yyyy HH:mm","model-type":"format",placeholder:"Select Actual Production Date & Time",teleport:!0},null,8,["modelValue"])])]),_:1}),l(_,{cols:"12",md:"6"},{default:t(()=>[l(X,{modelValue:B.notes,"onUpdate:modelValue":e[16]||(e[16]=a=>B.notes=a),color:"primary",label:"Production Notes (optional)","prepend-inner-icon":"mdi-note-text",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>[o("div",ns,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[139]||(e[139]=[s("mdi-scale-balance")])),_:1}),e[140]||(e[140]=o("h4",{class:"text-h6 font-weight-medium"}," Actual Production Quantities ",-1))]),B.products.some(a=>a.hasDiscrepancy)?(p(),b(fe,{key:0,border:"start",class:"mb-4",type:"warning",variant:"tonal"},{default:t(()=>e[141]||(e[141]=[s(" Some products have discrepancies between planned and actual quantities. ")])),_:1})):z("",!0),(p(!0),I(G,null,oe(B.products,(a,f)=>(p(),b(g,{key:a.production_id,class:"mb-4",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-4"},{default:t(()=>[o("div",is,[l(S,{class:"mr-3",color:"primary",size:"32",variant:"tonal"},{default:t(()=>[l(c,{color:"primary",size:"16"},{default:t(()=>e[142]||(e[142]=[s("mdi-package")])),_:1})]),_:1}),o("div",null,[o("div",rs,i(a.product_name),1),o("div",us," Planned: "+i(a.planned_qty)+" units ",1)]),l(me),l(k,{color:a.hasDiscrepancy?"orange":"green",size:"small",variant:"flat"},{default:t(()=>[s(i(a.hasDiscrepancy?"Discrepancy":"On Track"),1)]),_:2},1032,["color"])]),l(M,{dense:""},{default:t(()=>[l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.good_qty,"onUpdate:modelValue":n=>a.good_qty=n,modelModifiers:{number:!0},color:"green",density:"compact",label:`Good Quantity (${a.planned_qty} planned)`,type:"number",variant:"outlined",onInput:n=>Ie(a)},{"prepend-inner":t(()=>[l(c,{color:"green",size:"20"},{default:t(()=>e[143]||(e[143]=[s("mdi-check-decagram")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","label","onInput"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.damaged_qty,"onUpdate:modelValue":n=>a.damaged_qty=n,modelModifiers:{number:!0},color:"orange",density:"compact",label:"Damaged Quantity",type:"number",variant:"outlined",onInput:n=>Ie(a)},{"prepend-inner":t(()=>[l(c,{color:"orange",size:"20"},{default:t(()=>e[144]||(e[144]=[s("mdi-alert-circle-outline")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.reject_qty,"onUpdate:modelValue":n=>a.reject_qty=n,modelModifiers:{number:!0},color:"red",density:"compact",label:"Reject Quantity",type:"number",variant:"outlined",onInput:n=>Ie(a)},{"prepend-inner":t(()=>[l(c,{color:"red",size:"20"},{default:t(()=>e[145]||(e[145]=[s("mdi-close-octagon-outline")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.actual_qty,"onUpdate:modelValue":n=>a.actual_qty=n,modelModifiers:{number:!0},color:"primary",density:"compact",label:"Total Actual",readonly:"",type:"number",variant:"outlined"},{"prepend-inner":t(()=>[l(c,{color:"primary",size:"20"},{default:t(()=>e[146]||(e[146]=[s("mdi-counter")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a.hasDiscrepancy?(p(),I(G,{key:0},[l(xe,{class:"my-3"}),o("div",cs,[l(k,{color:"orange",size:"small",variant:"flat"},{default:t(()=>[s(" Discrepancy: "+i(Math.abs(a.planned_qty-a.good_qty))+" units ",1)]),_:2},1024)]),(p(!0),I(G,null,oe(a.discrepancies,(n,u)=>(p(),b(M,{key:u,class:"align-center mb-2"},{default:t(()=>[l(_,{cols:"12",md:"5"},{default:t(()=>[l(pe,{modelValue:n.reason_id,"onUpdate:modelValue":w=>n.reason_id=w,density:"compact","item-title":"name","item-value":"id",items:ye.value,label:"Reason","prepend-inner-icon":"mdi-alert-circle-outline",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(_,{cols:"12",md:"5"},{default:t(()=>[l(X,{modelValue:n.notes,"onUpdate:modelValue":w=>n.notes=w,density:"compact",label:"Notes",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(_,{class:"text-right",cols:"12",md:"2"},{default:t(()=>[l(U,{color:"error",icon:"",size:"small",variant:"text",onClick:w=>vt(a,u)},{default:t(()=>[l(c,null,{default:t(()=>e[147]||(e[147]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),l(U,{color:"primary",size:"small",variant:"outlined",onClick:n=>at(a)},{default:t(()=>[l(c,{start:""},{default:t(()=>e[148]||(e[148]=[s("mdi-plus")])),_:1}),e[149]||(e[149]=s(" Add Reason "))]),_:2},1032,["onClick"])],64)):z("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(g,{class:"rounded-lg pa-4",variant:"outlined"},{default:t(()=>[o("div",ms,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[150]||(e[150]=[s("mdi-chart-box")])),_:1}),e[151]||(e[151]=o("h4",{class:"text-h6 font-weight-medium"},"Batch Summary",-1))]),l(M,null,{default:t(()=>[l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>[o("div",fs,i(Fe.value.good_qty),1),e[152]||(e[152]=o("div",{class:"text-caption text-grey"},"Total Good",-1))]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>[o("div",ps,i(Fe.value.damaged_qty),1),e[153]||(e[153]=o("div",{class:"text-caption text-grey"},"Total Damaged",-1))]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>[o("div",_s,i(Fe.value.reject_qty),1),e[154]||(e[154]=o("div",{class:"text-caption text-grey"},"Total Reject",-1))]),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>[o("div",ys,i(Fe.value.actual_qty),1),e[155]||(e[155]=o("div",{class:"text-caption text-grey"},"Total Actual",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Mt,{class:"pa-6 bg-grey-lighten-4 rounded-b-xl"},{default:t(()=>[l(me),l(U,{class:"px-6",color:"grey",variant:"outlined",onClick:lt},{default:t(()=>e[156]||(e[156]=[s(" Cancel ")])),_:1}),l(U,{class:"px-6",color:"success",disabled:!_l.value,elevation:"2",loading:q.value,onClick:gt},{default:t(()=>[l(c,{start:""},{default:t(()=>e[157]||(e[157]=[s("mdi-content-save-check")])),_:1}),e[158]||(e[158]=s(" Save Actual Production "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Je,{modelValue:ee.value,"onUpdate:modelValue":e[24]||(e[24]=a=>ee.value=a),"max-width":"1400",persistent:"",scrollable:""},{default:t(()=>[l(g,{class:"rounded-xl",elevation:"16"},{default:t(()=>[l(Qe,{class:"rounded-t-xl",color:"primary",density:"comfortable"},{default:t(()=>[l(S,{class:"mr-3",color:"white",size:"36"},{default:t(()=>[l(c,{color:"primary",icon:L.value?"mdi-pencil":"mdi-plus"},null,8,["icon"])]),_:1}),l(Ye,{class:"text-h5 font-weight-bold text-white"},{default:t(()=>[s(i(ne.value?"Add Actual Quantity":L.value?"Edit Production":"Create New Production (Multiple Products)"),1)]),_:1}),l(me),l(U,{color:"white",icon:"mdi-close",variant:"text",onClick:zt})]),_:1}),l(x,{class:"pa-6"},{default:t(()=>[l(Lt,{onSubmit:$t(It,["prevent"])},{default:t(()=>[l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>[o("div",vs,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[159]||(e[159]=[s(" mdi-information ")])),_:1}),e[160]||(e[160]=o("h4",{class:"text-h6 font-weight-medium"},"Batch Information",-1))]),l(M,{dense:""},{default:t(()=>[l(_,{cols:"12",md:"4"},{default:t(()=>[o("div",gs,[y.planned_at?(p(),I("span",bs," Planned Production Date & Time ")):z("",!0),l(m,{modelValue:y.planned_at,"onUpdate:modelValue":e[18]||(e[18]=a=>y.planned_at=a),"auto-apply":"",class:"rounded-lg border px-4 py-2 w-100","enable-time-picker":!0,format:"dd-MM-yyyy HH:mm","model-type":"format",placeholder:"Select Planned Production Date & Time",teleport:!0},null,8,["modelValue"])])]),_:1}),L.value||ne.value?(p(),b(_,{key:0,cols:"12",md:"4"},{default:t(()=>[o("div",xs,[y.produced_at?(p(),I("span",Vs," Actual Production Date & Time ")):z("",!0),l(m,{modelValue:y.produced_at,"onUpdate:modelValue":e[19]||(e[19]=a=>y.produced_at=a),"auto-apply":"",class:"rounded-lg border px-4 py-2 w-100","enable-time-picker":!0,format:"dd-MM-yyyy HH:mm","model-type":"format",placeholder:"Select Actual Production Date & Time",teleport:!0},null,8,["modelValue"])])]),_:1})):z("",!0),l(_,{cols:"12",md:"4"},{default:t(()=>[l(X,{modelValue:y.notes,"onUpdate:modelValue":e[20]||(e[20]=a=>y.notes=a),color:"primary",label:"Batch Notes (optional)","prepend-inner-icon":"mdi-note-text",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>[o("div",ws,[o("div",ks,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[161]||(e[161]=[s(" mdi-package-variant ")])),_:1}),e[162]||(e[162]=o("h4",{class:"text-h6 font-weight-medium"}," Products in this Batch ",-1))]),l(U,{color:"primary",size:"small",variant:"outlined",onClick:st},{default:t(()=>[l(c,{start:""},{default:t(()=>e[163]||(e[163]=[s("mdi-plus")])),_:1}),e[164]||(e[164]=s(" Add Product "))]),_:1})]),y.products.length?z("",!0):(p(),b(fe,{key:0,border:"start",class:"mb-3",type:"info",variant:"tonal"},{default:t(()=>e[165]||(e[165]=[s(" Add one or more products to this production batch. Each product keeps its own mode and ingredients. ")])),_:1})),(p(!0),I(G,null,oe(y.products,(a,f)=>(p(),b(M,{key:a.uid,dense:""},{default:t(()=>[l(_,{cols:"12"},{default:t(()=>[l(g,{class:"mb-3",ripple:!1,variant:"outlined"},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",hs,[l(k,{class:"mr-2",color:"primary",size:"small",variant:"flat"},{default:t(()=>[s(" Product #"+i(f+1),1)]),_:2},1024),o("span",qs,i(hl(a)),1),l(me),y.products.length>1?(p(),b(U,{key:0,color:"error",icon:"",size:"x-small",variant:"text",onClick:n=>Il(f)},{default:t(()=>[l(c,null,{default:t(()=>e[166]||(e[166]=[s("mdi-close")])),_:1})]),_:2},1032,["onClick"])):z("",!0)]),l(M,{dense:""},{default:t(()=>[l(_,{cols:"12",md:"5"},{default:t(()=>[l(we,{modelValue:a.product_id,"onUpdate:modelValue":[n=>a.product_id=n,()=>Pt(a)],clearable:"",density:"compact","item-title":"name","item-value":"id",items:re.value,label:"Select Product","prepend-inner-icon":"mdi-package-variant",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(pe,{modelValue:a.mode,"onUpdate:modelValue":[n=>a.mode=n,()=>ge(a)],density:"compact","item-title":"label","item-value":"value",items:Me,label:"Production Mode","prepend-inner-icon":"mdi-cog",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a.mode==="by_product"?(p(),b(_,{key:0,cols:"12",md:"4"},{default:t(()=>[l(X,{modelValue:a.qty_product_input,"onUpdate:modelValue":n=>a.qty_product_input=n,modelModifiers:{number:!0},density:"compact",label:"Planned Units","prepend-inner-icon":"mdi-counter",type:"number",variant:"outlined",onInput:()=>ge(a)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024)):a.mode==="by_ingredient"?(p(),I(G,{key:1},[l(_,{cols:"12",md:"4"},{default:t(()=>[l(we,{modelValue:a.base_ingredient_id,"onUpdate:modelValue":[n=>a.base_ingredient_id=n,()=>ge(a)],density:"compact",disabled:!a.recipeItems.length,"item-title":"item_name","item-value":"item_id",items:a.recipeItems,label:"Base Ingredient","prepend-inner-icon":"mdi-ingredient",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","disabled","items"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.base_ingredient_qty,"onUpdate:modelValue":n=>a.base_ingredient_qty=n,modelModifiers:{number:!0},density:"compact",disabled:!a.base_ingredient_id,label:`Base Qty (${a.baseUnit||"units"})`,"prepend-inner-icon":"mdi-weight",type:"number",variant:"outlined",onInput:()=>ge(a)},null,8,["modelValue","onUpdate:modelValue","disabled","label","onInput"])]),_:2},1024),l(_,{class:"d-flex align-center",cols:"12",md:"1"},{default:t(()=>[a.computed_qty_product?(p(),b(k,{key:0,color:"blue",size:"small",variant:"flat"},{default:t(()=>[s(" Planned "+i(a.computed_qty_product)+" units ",1)]),_:2},1024)):z("",!0)]),_:2},1024)],64)):z("",!0),L.value||ne.value?(p(),b(x,{key:2,class:"pa-4"},{default:t(()=>[o("div",Ps,[l(k,{color:a.hasDiscrepancy?"orange":"green",size:"small",variant:"flat"},{default:t(()=>[s(i(a.hasDiscrepancy?"Discrepancy: "+Math.abs(a.planned_qty-a.good_qty)+" units":"On Track"),1)]),_:2},1032,["color"])]),l(M,{dense:""},{default:t(()=>[l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.good_qty,"onUpdate:modelValue":n=>a.good_qty=n,modelModifiers:{number:!0},color:"green",density:"compact",label:`Good Quantity (${a.planned_qty} planned)`,type:"number",variant:"outlined",onInput:n=>Ie(a)},{"prepend-inner":t(()=>[l(c,{color:"green",size:"20"},{default:t(()=>e[167]||(e[167]=[s("mdi-check-decagram")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","label","onInput"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.damaged_qty,"onUpdate:modelValue":n=>a.damaged_qty=n,modelModifiers:{number:!0},color:"orange",density:"compact",label:"Damaged Quantity",type:"number",variant:"outlined",onInput:n=>Ie(a)},{"prepend-inner":t(()=>[l(c,{color:"orange",size:"20"},{default:t(()=>e[168]||(e[168]=[s("mdi-alert-circle-outline")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.reject_qty,"onUpdate:modelValue":n=>a.reject_qty=n,modelModifiers:{number:!0},color:"red",density:"compact",label:"Reject Quantity",type:"number",variant:"outlined",onInput:n=>Ie(a)},{"prepend-inner":t(()=>[l(c,{color:"red",size:"20"},{default:t(()=>e[169]||(e[169]=[s("mdi-close-octagon-outline")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])]),_:2},1024),l(_,{cols:"12",md:"3"},{default:t(()=>[l(X,{modelValue:a.actual_qty,"onUpdate:modelValue":n=>a.actual_qty=n,modelModifiers:{number:!0},color:"primary",density:"compact",label:"Total Actual",readonly:"",type:"number",variant:"outlined"},{"prepend-inner":t(()=>[l(c,{color:"primary",size:"20"},{default:t(()=>e[170]||(e[170]=[s("mdi-counter")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a.hasDiscrepancy?(p(),I(G,{key:0},[l(xe,{class:"my-3"}),(p(!0),I(G,null,oe(a.discrepancies,(n,u)=>(p(),b(M,{key:u,class:"align-center mb-2"},{default:t(()=>[l(_,{cols:"12",md:"5"},{default:t(()=>[l(pe,{modelValue:n.reason_id,"onUpdate:modelValue":w=>n.reason_id=w,density:"compact","item-title":"name","item-value":"id",items:ye.value,label:"Reason","prepend-inner-icon":"mdi-alert-circle-outline",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),l(_,{cols:"12",md:"5"},{default:t(()=>[l(X,{modelValue:n.notes,"onUpdate:modelValue":w=>n.notes=w,density:"compact",label:"Notes",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(_,{class:"text-right",cols:"12",md:"2"},{default:t(()=>[l(U,{color:"error",icon:"",size:"small",variant:"text",onClick:w=>vt(a,u)},{default:t(()=>[l(c,null,{default:t(()=>e[171]||(e[171]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),l(U,{color:"primary",size:"small",variant:"outlined",onClick:n=>at(a)},{default:t(()=>[l(c,{start:""},{default:t(()=>e[172]||(e[172]=[s("mdi-plus")])),_:1}),e[173]||(e[173]=s(" Add Reason "))]),_:2},1032,["onClick"])],64)):z("",!0)]),_:2},1024)):z("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),y.products.length?(p(),b(fe,{key:1,border:"start",class:"mt-2",type:"success",variant:"tonal"},{default:t(()=>[e[174]||(e[174]=s(" Total planned units for this batch: ")),o("b",null,i(wt.value),1)]),_:1})):z("",!0)]),_:1}),l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>[o("div",zs,[o("div",Cs,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[175]||(e[175]=[s(" mdi-ingredient ")])),_:1}),e[176]||(e[176]=o("h4",{class:"text-h6 font-weight-medium"}," Ingredients & Groups ",-1))]),l(Aa,{modelValue:T.value,"onUpdate:modelValue":e[21]||(e[21]=a=>T.value=a),color:"primary","hide-details":"",inset:"",label:T.value?"Editing Enabled":"Editing Disabled"},null,8,["modelValue","label"])]),bt.value?(p(),b(fe,{key:0,border:"start",class:"mb-3",type:"error",variant:"tonal"},{default:t(()=>e[177]||(e[177]=[s(" Some ingredients exceed available stock. Please adjust quantities before saving. ")])),_:1})):z("",!0),l(Ot,{modelValue:Y.value,"onUpdate:modelValue":e[22]||(e[22]=a=>Y.value=a),"bg-color":"transparent",color:"primary",density:"comfortable","show-arrows":""},{default:t(()=>[(p(!0),I(G,null,oe(y.products,(a,f)=>(p(),b(We,{key:a.uid,value:f},{default:t(()=>[s(i(ql(a,f)),1)]),_:2},1032,["value"]))),128)),y.products.length?(p(),b(We,{key:0,value:"summary"},{default:t(()=>e[178]||(e[178]=[s(" All Ingredients Summary ")])),_:1})):z("",!0)]),_:1},8,["modelValue"]),l(Ht,{modelValue:Y.value,"onUpdate:modelValue":e[23]||(e[23]=a=>Y.value=a),class:"mt-4"},{default:t(()=>[(p(!0),I(G,null,oe(y.products,(a,f)=>(p(),b(Ke,{key:`win-${a.uid}`,value:f},{default:t(()=>[l(Ot,{modelValue:a.innerTab,"onUpdate:modelValue":n=>a.innerTab=n,class:"mb-2",color:"primary",density:"compact"},{default:t(()=>[l(We,{value:"ingredients"},{default:t(()=>e[179]||(e[179]=[s("Ingredients")])),_:1}),l(We,{value:"groups"},{default:t(()=>e[180]||(e[180]=[s(" Ingredient Groups ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(Ht,{modelValue:a.innerTab,"onUpdate:modelValue":n=>a.innerTab=n},{default:t(()=>[l(Ke,{value:"ingredients"},{default:t(()=>[l(De,{class:"elevation-1 rounded-lg",density:"comfortable",headers:Se,items:a.ingredients},{"item.item_name":t(({item:n})=>[o("div",Ss,[n.from_group?(p(),b(c,{key:0,class:"mr-2",color:"purple",size:"16"},{default:t(()=>e[181]||(e[181]=[s(" mdi-cog ")])),_:1})):z("",!0),o("span",null,i(n.item_name),1),n.group_name?(p(),b(k,{key:1,class:"ml-2",color:"purple",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(n.group_name),1)]),_:2},1024)):z("",!0)])]),"item.qty_required":t(({item:n})=>[o("div",As,[l(X,{modelValue:n.qty_required,"onUpdate:modelValue":u=>n.qty_required=u,modelModifiers:{number:!0},autocomplete:"off",autocorrect:"off",density:"compact",disabled:!T.value,error:n.exceeds,"error-messages":n.exceeds?["Exceeds available stock"]:[],"hide-details":"",inputmode:"none",spellcheck:"false",style:{"max-width":"140px"},type:"number",variant:"outlined",onInput:u=>n.exceeds=Number(n.qty_required)>Number(n.available||0)},{"append-inner":t(()=>[o("span",{class:Z(["text-caption",n.exceeds?"text-error":"text-grey"])},i(n.unit),3)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","error","error-messages","onInput"]),n.exceeds?(p(),b(xa,{key:0,location:"top",text:"Maximum available: "+(n.available||0)+" "+(n.unit||"")},{activator:t(({props:u})=>[l(U,_e({ref_for:!0},u,{class:"ml-1",color:"orange",icon:"",size:"x-small",variant:"text",onClick:w=>{n.qty_required=n.available||0,n.exceeds=!1}}),{default:t(()=>[l(c,{size:"16"},{default:t(()=>e[182]||(e[182]=[s(" mdi-information-outline ")])),_:1})]),_:2},1040,["onClick"])]),_:2},1032,["text"])):z("",!0)])]),"item.available":t(({item:n})=>[l(k,{class:"font-weight-medium",color:n.exceeds?"red":"blue",size:"small",variant:"outlined"},{default:t(()=>[s(i(n.available||0)+" "+i(n.unit),1)]),_:2},1032,["color"])]),"item.unit":t(({item:n})=>[l(k,{color:"blue-grey",size:"small",variant:"outlined"},{default:t(()=>[s(i(n.unit),1)]),_:2},1024)]),"no-data":t(()=>e[183]||(e[183]=[o("div",{class:"text-center py-4 text-grey"}," Configure this product (mode + quantity) to calculate ingredients ",-1)])),_:2},1032,["items"]),a.computed_qty_product?(p(),b(fe,{key:0,border:"start",class:"mt-3",type:"success",variant:"tonal"},{default:t(()=>[e[184]||(e[184]=s(" Planned units for ")),o("b",null,i(Ge(a.product_id)),1),e[185]||(e[185]=s(": ")),o("b",null,i(a.computed_qty_product),1),e[186]||(e[186]=s(". Ingredients above are specific to this product. "))]),_:2},1024)):z("",!0)]),_:2},1024),l(Ke,{value:"groups"},{default:t(()=>[a.productGroups&&a.productGroups.length?(p(),b(g,{key:0,class:"rounded-lg",variant:"outlined"},{default:t(()=>[l(x,{class:"pa-4"},{default:t(()=>[o("div",Is,[l(c,{class:"mr-2",color:"purple"},{default:t(()=>e[187]||(e[187]=[s(" mdi-cog ")])),_:1}),o("h5",Us," Ingredient Groups for "+i(Ge(a.product_id)),1),l(k,{class:"ml-2",color:"purple",size:"small",variant:"flat"},{default:t(()=>[s(i(a.productGroups.length)+" groups ",1)]),_:2},1024)]),l(fe,{class:"mb-4",type:"info",variant:"tonal"},{default:t(()=>e[188]||(e[188]=[s(" Select combinations per group to update ingredients for this product. ")])),_:1}),l(ha,{modelValue:a.expandedGroups,"onUpdate:modelValue":n=>a.expandedGroups=n,multiple:""},{default:t(()=>[(p(!0),I(G,null,oe(a.productGroups,(n,u)=>(p(),b(Va,{key:n.id,class:"mb-2"},{default:t(()=>[l(ct,{class:"font-weight-medium"},{default:t(()=>[o("div",Ds,[o("div",Ts,[l(c,{class:"mr-2",color:"purple"},{default:t(()=>e[189]||(e[189]=[s(" mdi-cog ")])),_:1}),o("span",null,i(n.name),1),n.is_mandatory?(p(),b(k,{key:0,class:"ml-2",color:"red",size:"x-small",variant:"flat"},{default:t(()=>e[190]||(e[190]=[s(" Required ")])),_:1})):(p(),b(k,{key:1,class:"ml-2",color:"grey",size:"x-small",variant:"outlined"},{default:t(()=>e[191]||(e[191]=[s(" Optional ")])),_:1}))]),o("div",js,[l(k,{class:"mr-2",color:"blue",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(n.selection_mode),1)]),_:2},1024),a.group_choices[n.id]?(p(),b(k,{key:0,color:"green",size:"x-small",variant:"flat"},{default:t(()=>e[192]||(e[192]=[s(" Selected ")])),_:1})):(p(),b(k,{key:1,color:"orange",size:"x-small",variant:"outlined"},{default:t(()=>e[193]||(e[193]=[s(" Not Selected ")])),_:1}))])])]),_:2},1024),l(ut,null,{default:t(()=>[o("p",Bs,i(n.description),1),l(Ca,{modelValue:a.group_choices[n.id],"onUpdate:modelValue":[w=>a.group_choices[n.id]=w,()=>ge(a)],"hide-details":""},{default:t(()=>[l(M,null,{default:t(()=>[(p(!0),I(G,null,oe(n.combinations,w=>(p(),b(_,{key:w.id,cols:"12",md:"6"},{default:t(()=>[l(g,{class:Z(["combination-card",{selected:a.group_choices[n.id]===w.id}]),variant:"outlined",onClick:j=>{a.group_choices[n.id]=w.id,ge(a)}},{default:t(()=>[l(x,{class:"pa-3"},{default:t(()=>[o("div",Ns,[l(Pa,{"hide-details":"",value:w.id},null,8,["value"]),o("div",Es,[o("div",Rs,i(w.name),1),w.notes?(p(),I("div",$s,i(w.notes),1)):z("",!0),o("div",Ms,[(p(!0),I(G,null,oe(w.options,j=>(p(),b(k,{key:j.option_id,class:"mr-1 mb-1",color:"green",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(j.item_name)+": "+i(j.quantity_per_unit)+" "+i(j.unit),1)]),_:2},1024))),128))])]),w.is_default?(p(),b(k,{key:0,color:"orange",size:"x-small",variant:"flat"},{default:t(()=>e[194]||(e[194]=[s(" Default ")])),_:1})):z("",!0)])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)):(p(),b(fe,{key:1,border:"start",type:"info",variant:"tonal"},{default:t(()=>e[195]||(e[195]=[s(" No ingredient groups configured for this product. ")])),_:1}))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["value"]))),128)),l(Ke,{value:"summary"},{default:t(()=>[l(De,{class:"elevation-1 rounded-lg",density:"comfortable",headers:Se,items:kt.value},{"item.item_name":t(({item:a})=>[o("div",Fs,[l(S,{class:"mr-2",color:"primary",size:"22",variant:"tonal"},{default:t(()=>[l(c,{color:"primary",size:"14"},{default:t(()=>e[196]||(e[196]=[s(" mdi-ingredient ")])),_:1})]),_:1}),o("span",null,i(a.item_name),1)])]),"item.qty_required":t(({item:a})=>[l(k,{color:a.exceeds?"red":"green",size:"small",variant:"outlined"},{default:t(()=>[s(i(a.qty_required)+" "+i(a.unit),1)]),_:2},1032,["color"])]),"item.available":t(({item:a})=>[l(k,{color:a.exceeds?"red":"blue",size:"small",variant:"outlined"},{default:t(()=>[s(i(a.available||0)+" "+i(a.unit),1)]),_:2},1032,["color"])]),"item.unit":t(({item:a})=>[o("span",null,i(a.unit),1)]),"no-data":t(()=>e[197]||(e[197]=[o("div",{class:"text-center py-4 text-grey"}," Add products and configure ingredients to see a consolidated summary. ",-1)])),_:1},8,["items"]),kt.value.length?(p(),b(fe,{key:0,border:"start",class:"mt-3",type:"success",variant:"tonal"},{default:t(()=>e[198]||(e[198]=[s(" Consolidated ingredient requirements across all products in this batch. ")])),_:1})):z("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>[o("div",Gs,[o("div",Ls,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[199]||(e[199]=[s(" mdi-account-group ")])),_:1}),e[200]||(e[200]=o("h4",{class:"text-h6 font-weight-medium"},"Staff Assignment",-1))]),o("div",Os,[l(U,{color:"primary",disabled:!xt.value.length,size:"small",variant:"outlined",onClick:ht},{default:t(()=>[l(c,{start:""},{default:t(()=>e[201]||(e[201]=[s("mdi-account-plus")])),_:1}),e[202]||(e[202]=s(" Add Staff "))]),_:1},8,["disabled"]),l(U,{color:"secondary",disabled:!y.staff.length,size:"small",variant:"outlined",onClick:Sl},{default:t(()=>[l(c,{start:""},{default:t(()=>e[203]||(e[203]=[s("mdi-account-remove")])),_:1}),e[204]||(e[204]=s(" Clear All "))]),_:1},8,["disabled"])])]),l(De,{class:"elevation-1 rounded-lg",density:"comfortable",headers:dl,items:y.staff},{"item.staff_id":t(({item:a})=>[l(we,{modelValue:a.staff_id,"onUpdate:modelValue":f=>a.staff_id=f,density:"compact",disabled:!T.value,"hide-details":"","item-title":"name","item-value":"id",items:ue.value,placeholder:"Select Staff",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","disabled","items"])]),"item.role":t(({item:a})=>[l(pe,{modelValue:a.role,"onUpdate:modelValue":f=>a.role=f,density:"compact",disabled:!T.value,"hide-details":"",items:["Team Leader","Assistant","Support"],"prepend-inner-icon":"mdi-account-tie",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),"item.notes":t(({item:a})=>[l(X,{modelValue:a.notes,"onUpdate:modelValue":f=>a.notes=f,density:"compact",disabled:!T.value,"hide-details":"",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),"item.actions":t(({index:a})=>[l(U,{color:"error",disabled:!T.value,icon:"",size:"small",variant:"text",onClick:f=>Cl(a)},{default:t(()=>[l(c,null,{default:t(()=>e[205]||(e[205]=[s("mdi-delete")])),_:1})]),_:2},1032,["disabled","onClick"])]),"no-data":t(()=>e[206]||(e[206]=[o("div",{class:"text-center py-4 text-grey"},' No staff assigned. Click "Add Staff" to assign team members. ',-1)])),_:1},8,["items"]),y.staff.length?(p(),b(fe,{key:0,border:"start",class:"mt-4",type:"info",variant:"tonal"},{default:t(()=>[o("div",Hs,[o("div",null,[e[207]||(e[207]=o("strong",null,"Team Summary:",-1)),l(k,{class:"ml-2",color:"primary",size:"small",variant:"flat"},{default:t(()=>[s(i(y.staff.length)+" staff members ",1)]),_:1})]),o("div",Qs,i(Vt.value)+" of "+i(xt.value.length+Vt.value)+" staff assigned ",1)])]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1}),l(Mt,{class:"pa-6 bg-grey-lighten-4 rounded-b-xl"},{default:t(()=>[l(me),l(U,{class:"px-6",color:"grey",variant:"outlined",onClick:zt},{default:t(()=>e[208]||(e[208]=[s(" Cancel ")])),_:1}),l(U,{class:"px-6",color:"success",disabled:!kl.value,elevation:"2",loading:q.value,onClick:It},{default:t(()=>[l(c,{start:""},{default:t(()=>e[209]||(e[209]=[s("mdi-content-save-check")])),_:1}),s(" "+i(L.value?"Update Production":"Create Production"),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Je,{modelValue:te.value,"onUpdate:modelValue":e[26]||(e[26]=a=>te.value=a),"max-width":"1000",scrollable:"",transition:"dialog-bottom-transition"},{default:t(()=>[l(g,{class:"rounded-xl",elevation:"16"},{default:t(()=>[l(Qe,{class:"rounded-t-xl",color:"primary",density:"comfortable"},{default:t(()=>[l(S,{class:"mr-3",color:"white",size:"36"},{default:t(()=>[l(c,{color:"primary"},{default:t(()=>e[210]||(e[210]=[s("mdi-eye")])),_:1})]),_:1}),l(Ye,{class:"text-h5 font-weight-bold text-white"},{default:t(()=>{var a,f;return[s(" Production Details - "+i((f=(a=P.value)==null?void 0:a.production)==null?void 0:f.product_name),1)]}),_:1}),l(me),l(U,{color:"white",icon:"mdi-close",variant:"text",onClick:e[25]||(e[25]=a=>te.value=!1)})]),_:1}),l(x,{class:"pa-6"},{default:t(()=>{var a,f,n,u,w,j,J,be,Ee,Oe,Ut,Dt,Tt,jt;return[l(g,{class:"rounded-lg pa-4 mb-4",variant:"outlined"},{default:t(()=>{var A,F;return[o("div",Ys,[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[211]||(e[211]=[s("mdi-information")])),_:1}),e[212]||(e[212]=o("h4",{class:"text-h6 font-weight-medium"},"Production Information",-1))]),l(M,null,{default:t(()=>[l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[213]||(e[213]=o("div",{class:"text-body-2 text-grey"},"Production ID",-1)),o("div",Js," #"+i((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.id),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[214]||(e[214]=o("div",{class:"text-body-2 text-grey"},"Product",-1)),o("div",Ws,i((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.product_name),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[215]||(e[215]=o("div",{class:"text-body-2 text-grey"},"Production Mode",-1)),o("div",Ks,i((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.mode),1)]}),_:1})]),_:1}),l(M,{class:"mt-2"},{default:t(()=>[l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[216]||(e[216]=o("div",{class:"text-body-2 text-grey"},"Planned At",-1)),o("div",Xs,i(Ne((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.planned_at)),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[217]||(e[217]=o("div",{class:"text-body-2 text-grey"},"Produced At",-1)),o("div",Zs,i(Ne((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.produced_at)),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[218]||(e[218]=o("div",{class:"text-body-2 text-grey"},"Produced By",-1)),o("div",ed,i((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.produced_by_name),1)]}),_:1})]),_:1}),l(M,{class:"mt-2"},{default:t(()=>[l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[219]||(e[219]=o("div",{class:"text-body-2 text-grey"},"Created",-1)),o("div",td,i(Ne((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.created)),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[220]||(e[220]=o("div",{class:"text-body-2 text-grey"},"Last Updated",-1)),o("div",ld,i(Ne((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.updated_at)),1)]}),_:1}),l(_,{cols:"12",md:"4"},{default:t(()=>{var V,h;return[e[221]||(e[221]=o("div",{class:"text-body-2 text-grey"},"Batch ID",-1)),o("div",ad,i(((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.batch_id)||"N/A"),1)]}),_:1})]),_:1}),l(M,{class:"mt-4"},{default:t(()=>[l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var V,h;return[o("div",od,i((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.qty_product),1),e[222]||(e[222]=o("div",{class:"text-caption text-grey"},"Planned Quantity",-1))]}),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"3"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var V,h;return[o("div",sd,i((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.actual_qty),1),e[223]||(e[223]=o("div",{class:"text-caption text-grey"},"Actual Quantity",-1))]}),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"2"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var V,h;return[o("div",dd,i(((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.good_qty)||0),1),e[224]||(e[224]=o("div",{class:"text-caption text-grey"},"Good",-1))]}),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"2"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var V,h;return[o("div",nd,i(((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.damaged_qty)||0),1),e[225]||(e[225]=o("div",{class:"text-caption text-grey"},"Damaged",-1))]}),_:1})]),_:1})]),_:1}),l(_,{cols:"12",md:"2"},{default:t(()=>[l(g,{border:"",class:"text-center",variant:"outlined"},{default:t(()=>[l(x,null,{default:t(()=>{var V,h;return[o("div",id,i(((h=(V=P.value)==null?void 0:V.production)==null?void 0:h.reject_qty)||0),1),e[226]||(e[226]=o("div",{class:"text-caption text-grey"},"Reject",-1))]}),_:1})]),_:1})]),_:1})]),_:1}),(F=(A=P.value)==null?void 0:A.production)!=null&&F.notes?(p(),b(M,{key:0,class:"mt-4"},{default:t(()=>[l(_,{cols:"12"},{default:t(()=>[e[227]||(e[227]=o("div",{class:"text-body-2 text-grey"},"Notes",-1)),o("div",rd,i(P.value.production.notes),1)]),_:1})]),_:1})):z("",!0)]}),_:1}),l(g,{class:"rounded-lg mb-4",variant:"outlined"},{default:t(()=>[l(Ue,{class:"d-flex align-center"},{default:t(()=>[l(c,{class:"mr-2",color:"primary"},{default:t(()=>e[228]||(e[228]=[s("mdi-ingredient")])),_:1}),e[229]||(e[229]=s(" Ingredients Used ")),l(k,{class:"ml-2",color:"primary",size:"small",variant:"flat"},{default:t(()=>{var A,F;return[s(i(((F=(A=P.value)==null?void 0:A.items)==null?void 0:F.length)||0)+" items ",1)]}),_:1})]),_:1}),l(x,{class:"pa-0"},{default:t(()=>[l(Ve,{class:"pa-0",lines:"two"},{default:t(()=>{var A;return[(p(!0),I(G,null,oe(((A=P.value)==null?void 0:A.items)||[],(F,V)=>(p(),b(se,{key:F.id,class:Z(["px-4",{"bg-grey-lighten-4":V%2===0}])},{prepend:t(()=>[l(S,{class:"mr-3",color:"primary",size:"36"},{default:t(()=>[o("span",ud,i(V+1),1)]),_:2},1024)]),default:t(()=>[l(ie,{class:"font-weight-medium"},{default:t(()=>[s(i(F.item_name)+" ",1),F.group_name?(p(),b(k,{key:0,class:"ml-2",color:"purple",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(F.group_name),1)]),_:2},1024)):z("",!0),F.combination_name?(p(),b(k,{key:1,class:"ml-1",color:"green",size:"x-small",variant:"outlined"},{default:t(()=>[s(i(F.combination_name),1)]),_:2},1024)):z("",!0)]),_:2},1024),l(ae,{class:"mt-1"},{default:t(()=>[l(k,{class:"mr-2",color:"primary",size:"small",variant:"outlined"},{default:t(()=>[s(i(F.qty_required)+" "+i(F.unit||""),1)]),_:2},1024),o("span",cd," Item ID: "+i(F.item_id),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]}),_:1})]),_:1})]),_:1}),(f=(a=P.value)==null?void 0:a.group_choices)!=null&&f.length?(p(),b(g,{key:0,class:"rounded-lg mb-4",variant:"outlined"},{default:t(()=>[l(Ue,{class:"d-flex align-center"},{default:t(()=>[l(c,{class:"mr-2",color:"purple"},{default:t(()=>e[230]||(e[230]=[s("mdi-cog")])),_:1}),e[231]||(e[231]=s(" Ingredient Group Choices ")),l(k,{class:"ml-2",color:"purple",size:"small",variant:"flat"},{default:t(()=>[s(i(P.value.group_choices.length)+" groups ",1)]),_:1})]),_:1}),l(x,{class:"pa-0"},{default:t(()=>[l(Ve,{class:"pa-0",lines:"two"},{default:t(()=>[(p(!0),I(G,null,oe(P.value.group_choices,(A,F)=>(p(),b(se,{key:A.id,class:Z(["px-4",{"bg-grey-lighten-4":F%2===0}])},{prepend:t(()=>[l(S,{class:"mr-3",color:"purple",size:"36"},{default:t(()=>[l(c,{color:"white",size:"18"},{default:t(()=>e[232]||(e[232]=[s("mdi-cog")])),_:1})]),_:1})]),default:t(()=>[l(ie,{class:"font-weight-medium"},{default:t(()=>[s(i(A.group_name),1)]),_:2},1024),l(ae,{class:"mt-1"},{default:t(()=>[l(k,{color:"green",size:"small",variant:"outlined"},{default:t(()=>[s(i(A.combination_name),1)]),_:2},1024),A.chosen_by_name?(p(),I("span",md," Chosen by: "+i(A.chosen_by_name),1)):z("",!0),o("span",fd," Created: "+i(Ne(A.created_at)),1)]),_:2},1024),A.notes?(p(),b(ae,{key:0,class:"mt-1 text-caption"},{default:t(()=>[e[233]||(e[233]=o("strong",null,"Notes:",-1)),s(" "+i(A.notes),1)]),_:2},1024)):z("",!0)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})):z("",!0),(u=(n=P.value)==null?void 0:n.staff)!=null&&u.length?(p(),b(g,{key:1,class:"rounded-lg mb-4",variant:"outlined"},{default:t(()=>[l(Ue,{class:"d-flex align-center"},{default:t(()=>[l(c,{class:"mr-2",color:"blue"},{default:t(()=>e[234]||(e[234]=[s("mdi-account-group")])),_:1}),e[235]||(e[235]=s(" Staff Assignments ")),l(k,{class:"ml-2",color:"blue",size:"small",variant:"flat"},{default:t(()=>[s(i(P.value.staff.length)+" staff ",1)]),_:1})]),_:1}),l(x,{class:"pa-0"},{default:t(()=>[l(Ve,{class:"pa-0",lines:"two"},{default:t(()=>[(p(!0),I(G,null,oe(P.value.staff,(A,F)=>(p(),b(se,{key:A.staff_id,class:Z(["px-4",{"bg-grey-lighten-4":F%2===0}])},{prepend:t(()=>[l(S,{class:"mr-3",color:"blue",size:"36"},{default:t(()=>[o("span",pd,i(F+1),1)]),_:2},1024)]),default:t(()=>[l(ie,{class:"font-weight-medium"},{default:t(()=>[s(i(A.staff_name)+" ",1),l(k,{class:"ml-2",color:At(A.role),size:"x-small",variant:"flat"},{default:t(()=>[s(i(A.role),1)]),_:2},1032,["color"])]),_:2},1024),l(ae,{class:"mt-1"},{default:t(()=>[A.notes?(p(),I("span",_d,i(A.notes),1)):(p(),I("span",yd," No notes "))]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})):z("",!0),(j=(w=P.value)==null?void 0:w.discrepancies)!=null&&j.length?(p(),b(g,{key:2,class:"rounded-lg",variant:"outlined"},{default:t(()=>[l(Ue,{class:"d-flex align-center"},{default:t(()=>[l(c,{class:"mr-2",color:"orange"},{default:t(()=>e[236]||(e[236]=[s("mdi-alert-circle")])),_:1}),e[237]||(e[237]=s(" Discrepancies ")),l(k,{class:"ml-2",color:"orange",size:"small",variant:"flat"},{default:t(()=>[s(i(P.value.discrepancies.length)+" issues ",1)]),_:1})]),_:1}),l(x,{class:"pa-0"},{default:t(()=>[l(Ve,{class:"pa-0",lines:"two"},{default:t(()=>[(p(!0),I(G,null,oe(P.value.discrepancies,(A,F)=>(p(),b(se,{key:A.id,class:Z(["px-4",{"bg-grey-lighten-4":F%2===0}])},{prepend:t(()=>[l(S,{class:"mr-3",color:"orange",size:"36"},{default:t(()=>[l(c,{color:"white",size:"18"},{default:t(()=>e[238]||(e[238]=[s("mdi-alert")])),_:1})]),_:1})]),default:t(()=>[l(ie,{class:"font-weight-medium"},{default:t(()=>[s(i(A.reason_name),1)]),_:2},1024),l(ae,{class:"mt-1"},{default:t(()=>[o("span",vd," Reason ID: "+i(A.reason_id),1)]),_:2},1024),A.notes?(p(),b(ae,{key:0,class:"mt-1 text-caption"},{default:t(()=>[e[239]||(e[239]=o("strong",null,"Notes:",-1)),s(" "+i(A.notes),1)]),_:2},1024)):z("",!0)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1})):z("",!0),!((be=(J=P.value)==null?void 0:J.items)!=null&&be.length)&&!((Oe=(Ee=P.value)==null?void 0:Ee.staff)!=null&&Oe.length)&&!((Dt=(Ut=P.value)==null?void 0:Ut.group_choices)!=null&&Dt.length)&&!((jt=(Tt=P.value)==null?void 0:Tt.discrepancies)!=null&&jt.length)?(p(),b(g,{key:3,class:"rounded-lg text-center py-8",variant:"outlined"},{default:t(()=>[l(c,{class:"mb-2",color:"grey",size:"48"},{default:t(()=>e[240]||(e[240]=[s("mdi-information-outline")])),_:1}),e[241]||(e[241]=o("div",{class:"text-h6 text-grey"},"No Additional Data",-1)),e[242]||(e[242]=o("div",{class:"text-body-2 text-grey mt-2"}," This production record doesn't have any additional items, staff, or discrepancies. ",-1))]),_:1})):z("",!0)]}),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Nd=ua(gd,[["__scopeId","data-v-196ab122"]]);export{Nd as default};
