import{_ as P,s as O,v as J,x as l,j as a,z as f,$ as A,P as u,D as n,E,I as i,a1 as j,J as L,a6 as Y,Y as G,r as g,a5 as H,q as K}from"./index-BWC57mqE.js";import{u as Q,r as I}from"./index-Di-IQXeH.js";import{V as p}from"./VDialog-C_uX5X1X.js";import{V as w,e as k,d as R}from"./VCard-BI_548n6.js";import{V as h}from"./VForm-DLSdHKgA.js";import{V as D}from"./VTextField-BUBZtWvQ.js";import{V as W}from"./VDataTable-BT5jeeYE.js";import{V as X}from"./VContainer-CSFeTSsk.js";import"./VSelect-B3SmRlp7.js";import"./VChip-CEVDHffS.js";import"./VSlideGroup-DR6QWFvL.js";const Z={setup(){const d=G(),e=g(!1),y=g([]),t=g({}),B=g([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Short Name",key:"short_name"},{title:"Edit",key:"edit"}]),V=g(!1),o=g(!1),x=g(!1),F=g(!1),m=H({name:"",shortname:""}),C=Q({name:{required:I},shortname:{required:I}},m);function c(){e.value=!0,fetch("/settings/getArea").then(s=>{s.json().then(r=>{e.value=!1,y.value=r}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function S(){C.value.name.$touch(),V.value=!0,m.name="",m.shortname=""}function M(s){t.value=JSON.parse(JSON.stringify(s)),o.value=!0,m.name=s.name,m.shortname=s.short_name}function N(){e.value=!0,V.value=!1;const s=new FormData;s.append("name",m.name),s.append("short_name",m.shortname),fetch("/settings/addArea",{body:s,method:"POST"}).then(r=>{e.value=!1,r.status!==200&&r.status!==201?r.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to save Area! "+v.error,timeout:2e3})}):r.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"Area saved successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to save Area!",timeout:2e3}),console.error("Error:",r)})}function T(){e.value=!0;const s=new FormData;s.append("name",m.name),s.append("short_name",m.shortname),fetch("/settings/editArea/"+t.value.id,{body:s,method:"POST"}).then(r=>{e.value=!1,o.value=!1,r.status!==200&&r.status!==201?r.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to edit Area! "+v.error,timeout:2e3})}):r.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"Area edited successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to edit Area!",timeout:2e3}),console.error("Error:",r)})}function U(){e.value=!0;const s=new FormData;x.value=!1,fetch("/settings/deleteArea/"+t.value.id,{body:s,method:"DELETE"}).then(r=>{e.value=!1,o.value=!1,r.status!==200&&r.status!==201?r.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to delete Area! "+v.error,timeout:2e3})}):r.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"Area delete successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to delete Area!",timeout:2e3}),console.error("Error:",r)})}function q(){fetch("/settings/getArea?response=csv").then(s=>{s.text().then(r=>{const v="csv",z="data:text/csv;charset=utf-8,"+escape(r),b=document.createElement("a");b.setAttribute("href",z),b.setAttribute("download",`Area.${v}`),b.click()})}).catch(()=>{e.value=!1})}return K(()=>{c()}),{loading:e,values:y,headers:B,addDialog:V,editDialog:o,form:F,state:m,v$:C,editingItem:t,confirmDeleteDialog:x,csvExport:q,loadValues:c,activateAddDialog:S,activateEditDialog:M,create:N,saveEdit:T,remove:U}}},$={class:"d-flex align-center flex-wrap"},_={class:"d-flex justify-end"},ee={class:"d-flex align-center flex-wrap"},te={class:"d-flex justify-end justify-space-between"},ae={class:"d-flex justify-space-between mb-6"};function oe(d,e,y,t,B,V){return J(),O(X,{fluid:""},{default:l(()=>[a(p,{modelValue:t.addDialog,"onUpdate:modelValue":e[4]||(e[4]=o=>t.addDialog=o),transition:"dialog-top-transition",width:"600"},{default:l(()=>[a(w,{class:"rounded-xl pa-4",elevation:"10"},{default:l(()=>[a(A,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:l(()=>[f("div",$,[a(u,{class:"mr-2 text-white"},{default:l(()=>e[16]||(e[16]=[n("mdi-map")])),_:1}),e[17]||(e[17]=f("span",{class:"text-white font-weight-bold text-h6"},"Add Area",-1))]),a(E),a(i,{color:"white",icon:"mdi-close",onClick:e[0]||(e[0]=o=>t.addDialog=!1)})]),_:1}),a(k,{class:"pt-6"},{default:l(()=>[a(h,{onSubmit:e[3]||(e[3]=j(()=>{},["prevent"]))},{default:l(()=>[a(D,{modelValue:t.state.name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.state.name=o),"bg-color":"#BDBDBD","error-messages":t.v$.name.$errors.map(o=>o.$message),label:"Area Name",required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(D,{modelValue:t.state.shortname,"onUpdate:modelValue":e[2]||(e[2]=o=>t.state.shortname=o),"bg-color":"#BDBDBD","error-messages":t.v$.name.$errors.map(o=>o.$message),label:"Area Short Name",required:"",onBlur:t.v$.shortname.$touch,onInput:t.v$.shortname.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),f("div",_,[a(i,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.create},{default:l(()=>[a(u,{start:""},{default:l(()=>e[18]||(e[18]=[n("mdi-plus")])),_:1}),e[19]||(e[19]=n(" Add "))]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1},8,["modelValue"]),a(p,{modelValue:t.editDialog,"onUpdate:modelValue":e[12]||(e[12]=o=>t.editDialog=o),transition:"dialog-top-transition",width:"400"},{default:l(()=>[a(w,{class:"rounded-xl pa-4",elevation:"10"},{default:l(()=>[a(A,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:l(()=>[f("div",ee,[a(u,{class:"mr-2 text-white"},{default:l(()=>e[20]||(e[20]=[n("mdi-map")])),_:1}),e[21]||(e[21]=f("span",{class:"text-white font-weight-bold text-h6"},"Edit Area",-1))]),a(E),a(i,{color:"white",icon:"mdi-close",onClick:e[5]||(e[5]=o=>t.editDialog=!1)})]),_:1}),a(k,{class:"pt-6"},{default:l(()=>[a(h,{onSubmit:e[9]||(e[9]=j(()=>{},["prevent"]))},{default:l(()=>[e[22]||(e[22]=f("br",null,null,-1)),a(D,{modelValue:t.editingItem.id,"onUpdate:modelValue":e[6]||(e[6]=o=>t.editingItem.id=o),"bg-color":"#BDBDBD",label:"ID",readonly:""},null,8,["modelValue"]),a(D,{modelValue:t.state.name,"onUpdate:modelValue":e[7]||(e[7]=o=>t.state.name=o),"bg-color":"#BDBDBD",clearable:"","error-messages":t.v$.name.$errors.map(o=>o.$message),label:"Area",readonly:t.loading,required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","readonly","onBlur","onInput"]),a(D,{modelValue:t.state.shortname,"onUpdate:modelValue":e[8]||(e[8]=o=>t.state.shortname=o),"bg-color":"#BDBDBD",clearable:"","error-messages":t.v$.shortname.$errors.map(o=>o.$message),label:"Area",readonly:t.loading,required:"",onBlur:t.v$.shortname.$touch,onInput:t.v$.shortname.$touch},null,8,["modelValue","error-messages","readonly","onBlur","onInput"])]),_:1})]),_:1}),a(R,{class:"d-flex justify-end justify-space-between"},{default:l(()=>[a(i,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.saveEdit},{default:l(()=>[a(u,{start:""},{default:l(()=>e[23]||(e[23]=[n("mdi-plus")])),_:1}),e[24]||(e[24]=n(" Save "))]),_:1},8,["disabled","loading","onClick"]),a(i,{color:"black",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[10]||(e[10]=o=>t.editDialog=!1)},{default:l(()=>[a(u,{start:""},{default:l(()=>e[25]||(e[25]=[n("mdi-cancel")])),_:1}),e[26]||(e[26]=n(" Cancel "))]),_:1},8,["disabled","loading"]),a(i,{color:"error",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[11]||(e[11]=o=>t.confirmDeleteDialog=!0)},{default:l(()=>[a(u,{start:""},{default:l(()=>e[27]||(e[27]=[n("mdi-delete")])),_:1}),e[28]||(e[28]=n(" Delete "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(p,{modelValue:t.confirmDeleteDialog,"onUpdate:modelValue":e[15]||(e[15]=o=>t.confirmDeleteDialog=o),persistent:"",width:"auto"},{default:l(()=>[a(w,null,{default:l(()=>[a(A,{color:"warning",title:"Confirm Deleteting "+t.state.name},{default:l(()=>[a(i,{color:"white",icon:"mdi-close",onClick:e[13]||(e[13]=o=>t.confirmDeleteDialog=!1)})]),_:1},8,["title"]),a(k,null,{default:l(()=>[n("Are you sure you want to delete "+L(t.state.name)+"?",1)]),_:1}),f("div",te,[a(i,{color:"success",onClick:e[14]||(e[14]=o=>t.confirmDeleteDialog=!1)},{default:l(()=>e[29]||(e[29]=[n("Cancel")])),_:1}),a(i,{color:"error",onClick:t.remove},{default:l(()=>e[30]||(e[30]=[n("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),f("div",ae,[e[35]||(e[35]=n(" Area ")),a(i,{class:"text-black justify-end",size:"small",onClick:t.csvExport},{default:l(()=>[a(u,{color:"green",start:""},{default:l(()=>e[31]||(e[31]=[n("mdi-download")])),_:1}),e[32]||(e[32]=n(" Download "))]),_:1},8,["onClick"]),a(i,{class:"text-white justify-end",color:"#1A237E",size:"small",onClick:t.activateAddDialog},{default:l(()=>[a(u,null,{default:l(()=>e[33]||(e[33]=[n("mdi-plus")])),_:1}),e[34]||(e[34]=n(" Add New"))]),_:1},8,["onClick"])]),a(Y,{active:t.loading,indeterminate:t.loading},null,8,["active","indeterminate"]),a(W,{class:"elevation-1",dense:"",headers:t.headers,height:"300",items:t.values,loading:t.loading},{"item.edit":l(({item:o})=>[a(u,{color:"#3F51B5",onClick:x=>t.activateEditDialog(o)},{default:l(()=>e[36]||(e[36]=[n("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})}const Ve=P(Z,[["render",oe]]);export{Ve as default};
