import{_ as Y,s as G,v as H,x as o,j as a,z as g,$ as b,P as u,D as n,E,I as s,a1 as A,J as K,a6 as Q,Y as R,r as f,a5 as W,q as X}from"./index-BWC57mqE.js";import{u as Z,r as F}from"./index-Di-IQXeH.js";import{V as p}from"./VDialog-C_uX5X1X.js";import{V as w,e as k,d as h}from"./VCard-BI_548n6.js";import{V as I}from"./VForm-DLSdHKgA.js";import{V as C}from"./VTextField-BUBZtWvQ.js";import{V as M}from"./VAutocomplete-DzvWemcH.js";import{V as $}from"./VDataTable-BT5jeeYE.js";import{V as _}from"./VContainer-CSFeTSsk.js";import"./VSelect-B3SmRlp7.js";import"./VChip-CEVDHffS.js";import"./VSlideGroup-DR6QWFvL.js";const ee={setup(){const d=R(),e=f(!1),x=f([]),t=f([]),c=f({}),B=f([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Area",key:"area"},{title:"Edit",key:"edit"}]),l=f(!1),D=f(!1),P=f(!1),S=f(!1),m=W({name:"",area:""}),j=Z({name:{required:F},area:{required:F}},m);function V(){e.value=!0,fetch("/settings/getProgram").then(i=>{i.json().then(r=>{e.value=!1,x.value=r}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function N(){e.value=!0,fetch("/settings/getArea").then(i=>{i.json().then(r=>{t.value=r})})}function T(){j.value.name.$touch(),l.value=!0,m.name="",m.area=""}function U(i){c.value=JSON.parse(JSON.stringify(i)),D.value=!0,m.name=i.name,m.area=i.areaid}function z(){e.value=!0,l.value=!1;const i=new FormData;i.append("name",m.name),i.append("area",m.area),fetch("/settings/addProgram",{body:i,method:"POST"}).then(r=>{e.value=!1,r.status!==200&&r.status!==201?r.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to save Program! "+v.error,timeout:2e3})}):r.json().then(()=>{V(),d.commit("setMessage",{type:"primary",text:"Program saved successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to save Program!",timeout:2e3}),console.error("Error:",r)})}function q(){e.value=!0;const i=new FormData;i.append("name",m.name),i.append("area",m.area),fetch("/settings/editProgram/"+c.value.id,{body:i,method:"POST"}).then(r=>{e.value=!1,D.value=!1,r.status!==200&&r.status!==201?r.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to edit Program! "+v.error,timeout:2e3})}):r.json().then(()=>{V(),d.commit("setMessage",{type:"primary",text:"Program edited successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to edit Program!",timeout:2e3}),console.error("Error:",r)})}function O(){e.value=!0;const i=new FormData;P.value=!1,fetch("/settings/deleteProgram/"+c.value.id,{body:i,method:"DELETE"}).then(r=>{e.value=!1,D.value=!1,r.status!==200&&r.status!==201?r.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to delete Program! "+v.error,timeout:2e3})}):r.json().then(()=>{V(),d.commit("setMessage",{type:"primary",text:"Program delete successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to delete Program!",timeout:2e3}),console.error("Error:",r)})}function J(){fetch("/settings/getProgram?response=csv").then(i=>{i.text().then(r=>{const v="csv",L="data:text/csv;charset=utf-8,"+escape(r),y=document.createElement("a");y.setAttribute("href",L),y.setAttribute("download",`Program.${v}`),y.click()})}).catch(()=>{e.value=!1})}return X(()=>{V(),N()}),{loading:e,values:x,headers:B,addDialog:l,editDialog:D,form:S,state:m,v$:j,editingItem:c,confirmDeleteDialog:P,areas:t,csvExport:J,loadValues:V,activateAddDialog:T,activateEditDialog:U,create:z,saveEdit:q,remove:O}}},te={class:"d-flex align-center flex-wrap"},ae={class:"d-flex justify-end"},oe={class:"d-flex align-center flex-wrap"},le={class:"d-flex justify-end justify-space-between"},re={class:"d-flex justify-space-between mb-6"};function ie(d,e,x,t,c,B){return H(),G(_,{fluid:""},{default:o(()=>[a(p,{modelValue:t.addDialog,"onUpdate:modelValue":e[4]||(e[4]=l=>t.addDialog=l),transition:"dialog-top-transition",width:"600"},{default:o(()=>[a(w,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[a(b,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:o(()=>[g("div",te,[a(u,{class:"mr-2 text-white"},{default:o(()=>e[16]||(e[16]=[n("mdi-application-cog")])),_:1}),e[17]||(e[17]=g("span",{class:"text-white font-weight-bold text-h6"},"Add Program",-1))]),a(E),a(s,{color:"white",icon:"mdi-close",onClick:e[0]||(e[0]=l=>t.addDialog=!1)})]),_:1}),a(k,{class:"pt-6"},{default:o(()=>[a(I,{onSubmit:e[3]||(e[3]=A(()=>{},["prevent"]))},{default:o(()=>[a(C,{modelValue:t.state.name,"onUpdate:modelValue":e[1]||(e[1]=l=>t.state.name=l),"bg-color":"#BDBDBD","error-messages":t.v$.name.$errors.map(l=>l.$message),label:"Program Name",required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),a(M,{modelValue:t.state.area,"onUpdate:modelValue":e[2]||(e[2]=l=>t.state.area=l),"bg-color":"#BDBDBD","error-messages":t.v$.area.$errors.map(l=>l.$message),"item-title":"short_name","item-value":"id",items:t.areas,label:"Area",required:"",onBlur:t.v$.area.$touch,onChange:t.v$.area.$touch},null,8,["modelValue","error-messages","items","onBlur","onChange"])]),_:1})]),_:1}),g("div",ae,[a(s,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.create},{default:o(()=>[a(u,{start:""},{default:o(()=>e[18]||(e[18]=[n("mdi-plus")])),_:1}),e[19]||(e[19]=n(" Add "))]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1},8,["modelValue"]),a(p,{modelValue:t.editDialog,"onUpdate:modelValue":e[12]||(e[12]=l=>t.editDialog=l),transition:"dialog-top-transition",width:"400"},{default:o(()=>[a(w,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[a(b,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:o(()=>[g("div",oe,[a(u,{class:"mr-2 text-white"},{default:o(()=>e[20]||(e[20]=[n("mdi-application-cog")])),_:1}),e[21]||(e[21]=g("span",{class:"text-white font-weight-bold text-h6"},"Edit Program",-1))]),a(E),a(s,{color:"white",icon:"mdi-close",onClick:e[5]||(e[5]=l=>t.editDialog=!1)})]),_:1}),a(k,{class:"pt-6"},{default:o(()=>[a(I,{onSubmit:e[9]||(e[9]=A(()=>{},["prevent"]))},{default:o(()=>[e[22]||(e[22]=g("br",null,null,-1)),a(C,{modelValue:t.editingItem.id,"onUpdate:modelValue":e[6]||(e[6]=l=>t.editingItem.id=l),"bg-color":"#BDBDBD",label:"ID",readonly:""},null,8,["modelValue"]),a(C,{modelValue:t.state.name,"onUpdate:modelValue":e[7]||(e[7]=l=>t.state.name=l),"bg-color":"#BDBDBD",clearable:"","error-messages":t.v$.name.$errors.map(l=>l.$message),label:"Program",readonly:t.loading,required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","readonly","onBlur","onInput"]),a(M,{modelValue:t.state.area,"onUpdate:modelValue":e[8]||(e[8]=l=>t.state.area=l),"bg-color":"#BDBDBD","item-title":"short_name","item-value":"id",items:t.areas,label:"Area"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(h,{class:"d-flex justify-end justify-space-between"},{default:o(()=>[a(s,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.saveEdit},{default:o(()=>[a(u,{start:""},{default:o(()=>e[23]||(e[23]=[n("mdi-plus")])),_:1}),e[24]||(e[24]=n(" Save "))]),_:1},8,["disabled","loading","onClick"]),a(s,{color:"black",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[10]||(e[10]=l=>t.editDialog=!1)},{default:o(()=>[a(u,{start:""},{default:o(()=>e[25]||(e[25]=[n("mdi-cancel")])),_:1}),e[26]||(e[26]=n(" Cancel "))]),_:1},8,["disabled","loading"]),a(s,{color:"error",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[11]||(e[11]=l=>t.confirmDeleteDialog=!0)},{default:o(()=>[a(u,{start:""},{default:o(()=>e[27]||(e[27]=[n("mdi-delete")])),_:1}),e[28]||(e[28]=n(" Delete "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(p,{modelValue:t.confirmDeleteDialog,"onUpdate:modelValue":e[15]||(e[15]=l=>t.confirmDeleteDialog=l),persistent:"",width:"auto"},{default:o(()=>[a(w,null,{default:o(()=>[a(b,{color:"warning",title:"Confirm Deleteting "+t.state.name},{default:o(()=>[a(s,{color:"white",icon:"mdi-close",onClick:e[13]||(e[13]=l=>t.confirmDeleteDialog=!1)})]),_:1},8,["title"]),a(k,null,{default:o(()=>[n("Are you sure you want to delete "+K(t.state.name)+"?",1)]),_:1}),g("div",le,[a(s,{color:"success",rounded:"",onClick:e[14]||(e[14]=l=>t.confirmDeleteDialog=!1)},{default:o(()=>e[29]||(e[29]=[n("Cancel")])),_:1}),a(s,{color:"error",rounded:"",onClick:t.remove},{default:o(()=>e[30]||(e[30]=[n("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),g("div",re,[e[35]||(e[35]=n(" Program ")),a(s,{class:"text-black justify-end",size:"small",onClick:t.csvExport},{default:o(()=>[a(u,{color:"green",rounded:"",start:""},{default:o(()=>e[31]||(e[31]=[n("mdi-download")])),_:1}),e[32]||(e[32]=n(" Download "))]),_:1},8,["onClick"]),a(s,{class:"text-white justify-end",color:"#1A237E",rounded:"",size:"small",onClick:t.activateAddDialog},{default:o(()=>[a(u,null,{default:o(()=>e[33]||(e[33]=[n("mdi-plus")])),_:1}),e[34]||(e[34]=n(" Add New"))]),_:1},8,["onClick"])]),a(Q,{active:t.loading,indeterminate:t.loading},null,8,["active","indeterminate"]),a($,{class:"elevation-1",dense:"",headers:t.headers,height:"300",items:t.values,loading:t.loading},{"item.edit":o(({item:l})=>[a(u,{color:"#3F51B5",onClick:D=>t.activateEditDialog(l)},{default:o(()=>e[36]||(e[36]=[n("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})}const pe=Y(ee,[["render",ie]]);export{pe as default};
