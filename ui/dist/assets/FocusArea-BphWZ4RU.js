import{_ as z,F as O,v as J,j as o,z as V,x as l,$ as j,I as m,a1 as k,D as s,P as f,J as x,a6 as L,G,Y,r as u,a5 as H,q as K}from"./index-BWC57mqE.js";import{u as Q,r as w}from"./index-Di-IQXeH.js";import{V as b,e as R}from"./VCard-BI_548n6.js";import{V as E}from"./VForm-DLSdHKgA.js";import{V as p}from"./VTextField-BUBZtWvQ.js";import{V as I}from"./VAutocomplete-DzvWemcH.js";import{V as F}from"./VDialog-C_uX5X1X.js";import{V as W}from"./VDataTable-BT5jeeYE.js";import"./VSelect-B3SmRlp7.js";import"./VChip-CEVDHffS.js";import"./VSlideGroup-DR6QWFvL.js";const X={setup(){const n=Y(),e=u(!1),y=u(""),t=u([]),c=u({}),A=u([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Project",key:"project"},{title:"Edit",key:"edit"}]),a=u(!1),v=u(!1),B=u(!1),M=u(!1),d=H({name:"",project:""}),C=Q({name:{required:w},project:{required:w}},d);function g(){e.value=!0,fetch("/settings/getFocusArea").then(i=>{i.json().then(r=>{e.value=!1,y.value=r}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function P(){fetch("/settings/getProject").then(i=>{i.json().then(r=>{t.value=r})})}function S(){C.value.name.$touch(),a.value=!0,d.name="",d.project=""}function N(i){c.value=JSON.parse(JSON.stringify(i)),v.value=!0,d.name=i.name,d.project=i.projectid}function T(){e.value=!0,a.value=!1;const i=new FormData;i.append("name",d.name),i.append("project",d.project),fetch("/settings/addFocusArea",{body:i,method:"POST"}).then(r=>{e.value=!1,r.status!==200&&r.status!==201?r.json().then(D=>{n.commit("setMessage",{type:"error",text:"Failed to save Focus Area! "+D.error,timeout:2e3})}):r.json().then(()=>{g(),n.commit("setMessage",{type:"primary",text:"Focus Area saved successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,n.commit("setMessage",{type:"error",text:"Failed to save Focus Area!",timeout:2e3}),console.error("Error:",r)})}function U(){e.value=!0;const i=new FormData;i.append("name",d.name),i.append("project",d.project),fetch("/settings/editFocusArea/"+c.value.id,{body:i,method:"POST"}).then(r=>{e.value=!1,v.value=!1,r.status!==200&&r.status!==201?r.json().then(D=>{n.commit("setMessage",{type:"error",text:"Failed to edit Focus Area! "+D.error,timeout:2e3})}):r.json().then(()=>{g(),n.commit("setMessage",{type:"primary",text:"Focus Area edited successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,n.commit("setMessage",{type:"error",text:"Failed to edit Focus Area!",timeout:2e3}),console.error("Error:",r)})}function q(){e.value=!0;const i=new FormData;B.value=!1,fetch("/settings/deleteFocusArea/"+c.value.id,{body:i,method:"DELETE"}).then(r=>{e.value=!1,v.value=!1,r.status!==200&&r.status!==201?r.json().then(D=>{n.commit("setMessage",{type:"error",text:"Failed to delete Focus Area! "+D.error,timeout:2e3})}):r.json().then(()=>{g(),n.commit("setMessage",{type:"primary",text:"Focus Area delete successfully!",timeout:2e3})})}).catch(r=>{e.value=!1,n.commit("setMessage",{type:"error",text:"Failed to delete Focus Area!",timeout:2e3}),console.error("Error:",r)})}return K(()=>{g(),P()}),{loading:e,values:y,headers:A,addDialog:a,editDialog:v,form:M,state:d,v$:C,editingItem:c,confirmDeleteDialog:B,projects:t,loadValues:g,activateAddDialog:S,activateEditDialog:N,create:T,saveEdit:U,remove:q}}},Z={class:"d-flex justify-end"},h={class:"d-flex justify-end justify-space-between"},$={class:"d-flex justify-end justify-space-between"},_={class:"d-flex justify-space-between mb-6"};function ee(n,e,y,t,c,A){return J(),O(G,null,[o(F,{modelValue:t.addDialog,"onUpdate:modelValue":e[4]||(e[4]=a=>t.addDialog=a),transition:"dialog-top-transition",width:"auto"},{default:l(()=>[o(b,{width:"300"},{default:l(()=>[o(j,{color:"primary",title:"Add Focus Area"},{default:l(()=>[o(m,{color:"white",icon:"mdi-close",onClick:e[0]||(e[0]=a=>t.addDialog=!1)})]),_:1}),o(E,{onSubmit:e[3]||(e[3]=k(()=>{},["prevent"]))},{default:l(()=>[o(p,{modelValue:t.state.name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.state.name=a),"bg-color":"#BDBDBD",density:"compact","error-messages":t.v$.name.$errors.map(a=>a.$message),label:"Focus Area Name",required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),o(I,{modelValue:t.state.project,"onUpdate:modelValue":e[2]||(e[2]=a=>t.state.project=a),"bg-color":"#BDBDBD","error-messages":t.v$.project.$errors.map(a=>a.$message),"item-title":"short_name","item-value":"id",items:t.projects,label:"Project",required:"",onBlur:t.v$.project.$touch,onChange:t.v$.project.$touch},null,8,["modelValue","error-messages","items","onBlur","onChange"]),V("div",Z,[o(m,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"small",type:"submit",variant:"elevated",onClick:t.create},{default:l(()=>[o(f,{start:""},{default:l(()=>e[16]||(e[16]=[s("mdi-plus")])),_:1}),e[17]||(e[17]=s(" Add "))]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(F,{modelValue:t.editDialog,"onUpdate:modelValue":e[12]||(e[12]=a=>t.editDialog=a),transition:"dialog-top-transition",width:"auto"},{default:l(()=>[o(b,{width:"360"},{default:l(()=>[s(x(t.state)+" ",1),o(j,{color:"primary",title:"Edit Focus Area"},{default:l(()=>[o(m,{color:"white",icon:"mdi-close",onClick:e[5]||(e[5]=a=>t.editDialog=!1)})]),_:1}),o(E,{onSubmit:e[11]||(e[11]=k(()=>{},["prevent"]))},{default:l(()=>[e[24]||(e[24]=V("br",null,null,-1)),o(p,{modelValue:t.editingItem.id,"onUpdate:modelValue":e[6]||(e[6]=a=>t.editingItem.id=a),"bg-color":"#BDBDBD",density:"compact",label:"ID",readonly:""},null,8,["modelValue"]),o(p,{modelValue:t.state.name,"onUpdate:modelValue":e[7]||(e[7]=a=>t.state.name=a),"bg-color":"#BDBDBD",clearable:"",density:"compact","error-messages":t.v$.name.$errors.map(a=>a.$message),label:"Focus Area",readonly:t.loading,required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","readonly","onBlur","onInput"]),o(I,{modelValue:t.state.project,"onUpdate:modelValue":e[8]||(e[8]=a=>t.state.project=a),"bg-color":"#BDBDBD","item-title":"short_name","item-value":"id",items:t.projects,label:"Project"},null,8,["modelValue","items"]),V("div",h,[o(m,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"small",type:"submit",variant:"elevated",onClick:t.saveEdit},{default:l(()=>[o(f,{start:""},{default:l(()=>e[18]||(e[18]=[s("mdi-plus")])),_:1}),e[19]||(e[19]=s(" Save "))]),_:1},8,["disabled","loading","onClick"]),o(m,{color:"black",disabled:t.v$.$error,loading:t.loading,size:"small",type:"submit",variant:"elevated",onClick:e[9]||(e[9]=a=>t.editDialog=!1)},{default:l(()=>[o(f,{start:""},{default:l(()=>e[20]||(e[20]=[s("mdi-cancel")])),_:1}),e[21]||(e[21]=s(" Cancel "))]),_:1},8,["disabled","loading"]),o(m,{color:"error",disabled:t.v$.$error,loading:t.loading,size:"small",type:"submit",variant:"elevated",onClick:e[10]||(e[10]=a=>t.confirmDeleteDialog=!0)},{default:l(()=>[o(f,{start:""},{default:l(()=>e[22]||(e[22]=[s("mdi-delete")])),_:1}),e[23]||(e[23]=s(" Delete "))]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(F,{modelValue:t.confirmDeleteDialog,"onUpdate:modelValue":e[15]||(e[15]=a=>t.confirmDeleteDialog=a),persistent:"",width:"auto"},{default:l(()=>[o(b,null,{default:l(()=>[o(j,{color:"warning",title:"Confirm Deleteting "+t.state.name},{default:l(()=>[o(m,{color:"white",icon:"mdi-close",onClick:e[13]||(e[13]=a=>t.confirmDeleteDialog=!1)})]),_:1},8,["title"]),o(R,null,{default:l(()=>[s("Are you sure you want to delete "+x(t.state.name)+"?",1)]),_:1}),V("div",$,[o(m,{color:"success",onClick:e[14]||(e[14]=a=>t.confirmDeleteDialog=!1)},{default:l(()=>e[25]||(e[25]=[s("Cancel")])),_:1}),o(m,{color:"error",onClick:t.remove},{default:l(()=>e[26]||(e[26]=[s("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),V("div",_,[e[29]||(e[29]=s(" Focus Area ")),o(m,{class:"text-white justify-end",color:"#1A237E",size:"x-small",onClick:t.activateAddDialog},{default:l(()=>[o(f,null,{default:l(()=>e[27]||(e[27]=[s("mdi-plus")])),_:1}),e[28]||(e[28]=s(" Add New"))]),_:1},8,["onClick"])]),o(L,{active:t.loading,indeterminate:t.loading},null,8,["active","indeterminate"]),o(W,{class:"elevation-1",dense:"",headers:t.headers,height:"300",items:t.values},{"item.edit":l(({item:a})=>[o(f,{color:"#3F51B5",onClick:v=>t.activateEditDialog(a.raw)},{default:l(()=>e[30]||(e[30]=[s("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items"])],64)}const ce=z(X,[["render",ee]]);export{ce as default};
