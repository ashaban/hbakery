import{_ as P,F as U,z as d,j as r,x as u,r as p,a5 as B,Y as F,t as E,v as C,V as D,B as N,S as A,s as L,a2 as M,P as k,D as f,a1 as _,E as I,I as b}from"./index-BWC57mqE.js";import{u as q,r as h}from"./index-Di-IQXeH.js";import{V as $,b as z,e as O,d as T}from"./VCard-BI_548n6.js";import{V as j}from"./VDialog-C_uX5X1X.js";import{V as G}from"./VAlert-BD9diJCp.js";import{V as J}from"./VForm-DLSdHKgA.js";import{V}from"./VTextField-BUBZtWvQ.js";var y={exports:{}},x;function K(){return x||(x=1,function(c,e){(function(){var i={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax",partitioned:""},s={install:function(a,t){t&&this.config(t.expires,t.path,t.domain,t.secure,t.sameSite,t.partitioned);const o=a.config&&a.config.globalProperties;o&&(a.config.globalProperties.$cookies=this,a.provide&&a.provide("$cookies",this)),(!o||a.prototype)&&(a.prototype.$cookies=this),a.$cookies=this},config:function(a,t,o,g,m,v){i.expires=a||"1d",i.path=t?"; path="+t:"; path=/",i.domain=o?"; domain="+o:"",i.secure=g?"; Secure":"",i.sameSite=m?"; SameSite="+m:"; SameSite=Lax",i.partitioned=v?"; Partitioned":""},get:function(a){var t=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(t&&(t.substring(0,1)==="{"&&t.substring(t.length-1,t.length)==="}"||t.substring(0,1)==="["&&t.substring(t.length-1,t.length)==="]"))try{t=JSON.parse(t)}catch{return t}return t},set:function(a,t,o,g,m,v,w,S){if(a){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(a))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+a)}else throw new Error("Cookie name is not found in the first argument.");t&&typeof t=="object"&&(t=JSON.stringify(t));var l="";if(o=o===void 0?i.expires:o,o&&o!==0)switch(o.constructor){case Number:o===1/0||o===-1?l="; expires=Fri, 31 Dec 9999 23:59:59 GMT":l="; max-age="+o;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(o)){var n=o.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(o.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":l="; max-age="+ +n*2592e3;break;case"d":l="; max-age="+ +n*86400;break;case"h":l="; max-age="+ +n*3600;break;case"min":l="; max-age="+ +n*60;break;case"s":l="; max-age="+n;break;case"y":l="; max-age="+ +n*31104e3;break}}else l="; expires="+o;break;case Date:l="; expires="+o.toUTCString();break}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(t)+l+(m?"; domain="+m:i.domain)+(g?"; path="+g:i.path)+(v===void 0?i.secure:v?"; Secure":"")+(w===void 0?i.sameSite:w?"; SameSite="+w:"")+(S===void 0?i.partitioned:S?"; Partitioned":""),this},remove:function(a,t,o){return!a||!this.isKey(a)?!1:(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:i.domain)+(t?"; path="+t:i.path)+"; SameSite=Lax",!0)},isKey:function(a){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<a.length;t++)a[t]=decodeURIComponent(a[t]);return a}};c.exports=s,typeof window<"u"&&(window.$cookies=s)})()}(y)),y.exports}K();var R={};const W={setup(){const c=F(),e=E(),i=p(!1),s=p(!1),a=p(!1),t=p(!1),o=p(!1),g=p(R.VUE_APP_VERSION||"1.0.0"),m=B({username:"",password:""}),w=q({username:{required:h},password:{required:h}},m);function S(){a.value=!0;const l=new FormData;l.append("username",m.username),l.append("password",m.password),fetch("/login/authenticate",{method:"POST",body:l}).then(n=>n.json()).then(n=>{if(!n.token){i.value=!0;return}c.state.auth.token=n.token,c.state.auth.username=m.username,c.state.auth.name=n.name,c.state.auth.role=n.role,c.state.auth.mda=n.mda,c.state.auth.dev_partner=n.dev_partner,localStorage.setItem("token",n.token),localStorage.setItem("username",m.username),localStorage.setItem("name",n.name),localStorage.setItem("role",n.role),localStorage.setItem("mda",n.mda),localStorage.setItem("dev_partner",n.dev_partner),c.state.denyAccess=!1,e.push("/ReportsBase")}).catch(n=>{console.error(n),i.value=!0}).finally(()=>{a.value=!1})}return{password_show:s,authStatus:i,loading:a,rememberMe:t,showForgotPassword:o,appVersion:g,state:m,authenticate:S,v$:w}}},Y={class:"nature-login-container"},H={class:"nature-visual-side"},Q={class:"nature-illustration"},X={class:"nature-quote"},Z={class:"nature-form-side"},ee={class:"nature-form-header"},te={class:"nature-actions"};function oe(c,e,i,s,a,t){return C(),U("div",Y,[e[20]||(e[20]=d("div",{class:"nature-bg-overlay"},null,-1)),e[21]||(e[21]=d("div",{class:"nature-bg-pattern"},null,-1)),r($,{class:"nature-login-card",elevation:"12"},{default:u(()=>[d("div",H,[e[8]||(e[8]=d("div",{class:"nature-logo-container"},null,-1)),d("div",Q,[r(D,{class:"nature-illustration-img",contain:"",src:N})]),d("div",X,[e[6]||(e[6]=d("h3",null,'"Cultivating Digital Solutions for Agricultural Growth"',-1)),r(A,{class:"nature-divider"}),e[7]||(e[7]=d("p",null,"Ministry of Agriculture",-1))])]),d("div",Z,[d("div",ee,[r(k,{color:"success",size:"40"},{default:u(()=>e[9]||(e[9]=[f("mdi-leaf-circle-outline")])),_:1}),e[10]||(e[10]=d("h2",null,"Welcome to Wadau Kilimo Portal",-1)),e[11]||(e[11]=d("p",null,"Sign in to your account",-1))]),s.authStatus?(C(),L(G,{key:0,class:"nature-alert",density:"compact",type:"error",variant:"tonal"},{default:u(()=>e[12]||(e[12]=[d("strong",null,"Invalid credentials",-1),f(" - Please try again ")])),_:1})):M("",!0),r(J,{class:"nature-form",onSubmit:_(s.authenticate,["prevent"])},{default:u(()=>[r(V,{modelValue:s.state.username,"onUpdate:modelValue":e[0]||(e[0]=o=>s.state.username=o),class:"nature-input",color:"success","error-messages":s.v$.username.$errors.map(o=>o.$message),label:"Username","prepend-inner-icon":"mdi-account-outline",variant:"outlined",onBlur:s.v$.username.$touch,onInput:s.v$.username.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),r(V,{modelValue:s.state.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.state.password=o),"append-inner-icon":s.password_show?"mdi-eye":"mdi-eye-off",class:"nature-input",color:"success","error-messages":s.v$.password.$errors.map(o=>o.$message),label:"Password","prepend-inner-icon":"mdi-lock-outline",type:s.password_show?"text":"password",variant:"outlined",onBlur:s.v$.password.$touch,"onClick:appendInner":e[2]||(e[2]=o=>s.password_show=!s.password_show),onInput:s.v$.password.$touch},null,8,["modelValue","append-inner-icon","error-messages","type","onBlur","onInput"]),d("div",te,[r(I),r(b,{color:"success",size:"small",variant:"text",onClick:e[3]||(e[3]=o=>s.showForgotPassword=!0)},{default:u(()=>e[13]||(e[13]=[f(" Forgot password? ")])),_:1})]),r(b,{block:"",class:"nature-submit-btn",color:"success",disabled:s.v$.$invalid,loading:s.loading,size:"large",type:"submit"},{default:u(()=>[r(k,{left:""},{default:u(()=>e[14]||(e[14]=[f("mdi-login-variant")])),_:1}),e[15]||(e[15]=f(" Sign In "))]),_:1},8,["disabled","loading"])]),_:1},8,["onSubmit"])])]),_:1}),r(j,{modelValue:s.showForgotPassword,"onUpdate:modelValue":e[5]||(e[5]=o=>s.showForgotPassword=o),"max-width":"500"},{default:u(()=>[r($,{class:"nature-dialog"},{default:u(()=>[r(z,{class:"nature-dialog-title"},{default:u(()=>[r(k,{class:"mr-2",color:"success"},{default:u(()=>e[16]||(e[16]=[f("mdi-key-variant")])),_:1}),e[17]||(e[17]=f(" Password Assistance "))]),_:1}),r(O,null,{default:u(()=>[e[18]||(e[18]=d("p",null,"Enter your email address to receive password reset instructions.",-1)),r(V,{class:"nature-dialog-input",label:"Email address","prepend-inner-icon":"mdi-email-outline",variant:"outlined"})]),_:1}),r(T,null,{default:u(()=>[r(I),r(b,{color:"success",variant:"flat",onClick:e[4]||(e[4]=o=>s.showForgotPassword=!1)},{default:u(()=>e[19]||(e[19]=[f(" Send Instructions ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ue=P(W,[["render",oe],["__scopeId","data-v-6e2c892b"]]);export{ue as default};
