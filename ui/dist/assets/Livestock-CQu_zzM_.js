import{_ as q,s as P,v as O,x as o,j as l,z as u,$ as V,P as m,D as s,E,I as r,a1 as j,J,a6 as Y,Y as G,r as f,a5 as H,q as K}from"./index-BWC57mqE.js";import{u as Q,r as R}from"./index-Di-IQXeH.js";import{V as b}from"./VDialog-C_uX5X1X.js";import{V as w,e as p,d as W}from"./VCard-BI_548n6.js";import{V as F}from"./VForm-DLSdHKgA.js";import{V as C}from"./VTextField-BUBZtWvQ.js";import{V as X}from"./VDataTable-BT5jeeYE.js";import{V as Z}from"./VContainer-CSFeTSsk.js";import"./VSelect-B3SmRlp7.js";import"./VChip-CEVDHffS.js";import"./VSlideGroup-DR6QWFvL.js";const h={setup(){const d=G(),e=f(!1),k=f([]),t=f({}),L=f([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Edit",key:"edit"}]),D=f(!1),a=f(!1),x=f(!1),I=f(!1),g=H({name:""}),B=Q({name:{required:R}},g);function c(){e.value=!0,fetch("/settings/getLivestock").then(n=>{n.json().then(i=>{e.value=!1,k.value=i}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function M(){B.value.name.$touch(),D.value=!0,g.name=""}function A(n){t.value=JSON.parse(JSON.stringify(n)),a.value=!0,g.name=n.name}function S(){e.value=!0,D.value=!1;const n=new FormData;n.append("name",g.name),fetch("/settings/addLivestock",{body:n,method:"POST"}).then(i=>{e.value=!1,i.status!==200&&i.status!==201?i.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to save Livestock! "+v.error,timeout:2e3})}):i.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"Livestock saved successfully!",timeout:2e3})})}).catch(i=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to save Livestock!",timeout:2e3}),console.error("Error:",i)})}function N(){e.value=!0;const n=new FormData;n.append("name",g.name),fetch("/settings/editLivestock/"+t.value.id,{body:n,method:"POST"}).then(i=>{e.value=!1,a.value=!1,i.status!==200&&i.status!==201?i.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to edit Livestock! "+v.error,timeout:2e3})}):i.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"Livestock edited successfully!",timeout:2e3})})}).catch(i=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to edit Livestock!",timeout:2e3}),console.error("Error:",i)})}function T(){e.value=!0;const n=new FormData;x.value=!1,fetch("/settings/deleteLivestock/"+t.value.id,{body:n,method:"DELETE"}).then(i=>{e.value=!1,a.value=!1,i.status!==200&&i.status!==201?i.json().then(v=>{d.commit("setMessage",{type:"error",text:"Failed to delete Livestock! "+v.error,timeout:2e3})}):i.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"Livestock delete successfully!",timeout:2e3})})}).catch(i=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to delete Livestock!",timeout:2e3}),console.error("Error:",i)})}function z(){fetch("/settings/getLivestock?response=csv").then(n=>{n.text().then(i=>{const v="csv",U="data:text/csv;charset=utf-8,"+escape(i),y=document.createElement("a");y.setAttribute("href",U),y.setAttribute("download",`Livestock.${v}`),y.click()})}).catch(()=>{e.value=!1})}return K(()=>{c()}),{loading:e,values:k,headers:L,addDialog:D,editDialog:a,form:I,state:g,v$:B,editingItem:t,confirmDeleteDialog:x,csvExport:z,loadValues:c,activateAddDialog:M,activateEditDialog:A,create:S,saveEdit:N,remove:T}}},$={class:"d-flex align-center flex-wrap"},_={class:"d-flex justify-end"},ee={class:"d-flex align-center flex-wrap"},te={class:"d-flex justify-end justify-space-between"},le={class:"d-flex justify-space-between mb-6"};function oe(d,e,k,t,L,D){return O(),P(Z,{fluid:""},{default:o(()=>[l(b,{modelValue:t.addDialog,"onUpdate:modelValue":e[3]||(e[3]=a=>t.addDialog=a),transition:"dialog-top-transition",width:"600"},{default:o(()=>[l(w,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[l(V,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:o(()=>[u("div",$,[l(m,{class:"mr-2 text-white"},{default:o(()=>e[14]||(e[14]=[s("mdi-map")])),_:1}),e[15]||(e[15]=u("span",{class:"text-white font-weight-bold text-h6"},"Add Livestock",-1))]),l(E),l(r,{color:"white",icon:"mdi-close",onClick:e[0]||(e[0]=a=>t.addDialog=!1)})]),_:1}),l(p,{class:"pt-6"},{default:o(()=>[l(F,{onSubmit:e[2]||(e[2]=j(()=>{},["prevent"]))},{default:o(()=>[l(C,{modelValue:t.state.name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.state.name=a),"bg-color":"#BDBDBD","error-messages":t.v$.name.$errors.map(a=>a.$message),label:"Livestock Name",required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),u("div",_,[l(r,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.create},{default:o(()=>[l(m,{start:""},{default:o(()=>e[16]||(e[16]=[s("mdi-plus")])),_:1}),e[17]||(e[17]=s(" Add "))]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1},8,["modelValue"]),l(b,{modelValue:t.editDialog,"onUpdate:modelValue":e[10]||(e[10]=a=>t.editDialog=a),transition:"dialog-top-transition",width:"400"},{default:o(()=>[l(w,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[l(V,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:o(()=>[u("div",ee,[l(m,{class:"mr-2 text-white"},{default:o(()=>e[18]||(e[18]=[s("mdi-map")])),_:1}),e[19]||(e[19]=u("span",{class:"text-white font-weight-bold text-h6"},"Edit Livestock",-1))]),l(E),l(r,{color:"white",icon:"mdi-close",onClick:e[4]||(e[4]=a=>t.editDialog=!1)})]),_:1}),l(p,{class:"pt-6"},{default:o(()=>[l(F,{onSubmit:e[7]||(e[7]=j(()=>{},["prevent"]))},{default:o(()=>[e[20]||(e[20]=u("br",null,null,-1)),l(C,{modelValue:t.editingItem.id,"onUpdate:modelValue":e[5]||(e[5]=a=>t.editingItem.id=a),"bg-color":"#BDBDBD",label:"ID",readonly:""},null,8,["modelValue"]),l(C,{modelValue:t.state.name,"onUpdate:modelValue":e[6]||(e[6]=a=>t.state.name=a),"bg-color":"#BDBDBD",clearable:"","error-messages":t.v$.name.$errors.map(a=>a.$message),label:"Livestock",readonly:t.loading,required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","readonly","onBlur","onInput"])]),_:1})]),_:1}),l(W,{class:"d-flex justify-end justify-space-between"},{default:o(()=>[l(r,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.saveEdit},{default:o(()=>[l(m,{start:""},{default:o(()=>e[21]||(e[21]=[s("mdi-plus")])),_:1}),e[22]||(e[22]=s(" Save "))]),_:1},8,["disabled","loading","onClick"]),l(r,{color:"black",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[8]||(e[8]=a=>t.editDialog=!1)},{default:o(()=>[l(m,{start:""},{default:o(()=>e[23]||(e[23]=[s("mdi-cancel")])),_:1}),e[24]||(e[24]=s(" Cancel "))]),_:1},8,["disabled","loading"]),l(r,{color:"error",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[9]||(e[9]=a=>t.confirmDeleteDialog=!0)},{default:o(()=>[l(m,{start:""},{default:o(()=>e[25]||(e[25]=[s("mdi-delete")])),_:1}),e[26]||(e[26]=s(" Delete "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(b,{modelValue:t.confirmDeleteDialog,"onUpdate:modelValue":e[13]||(e[13]=a=>t.confirmDeleteDialog=a),persistent:"",width:"auto"},{default:o(()=>[l(w,null,{default:o(()=>[l(V,{color:"warning",title:"Confirm Deleteting "+t.state.name},{default:o(()=>[l(r,{color:"white",icon:"mdi-close",onClick:e[11]||(e[11]=a=>t.confirmDeleteDialog=!1)})]),_:1},8,["title"]),l(p,null,{default:o(()=>[s("Are you sure you want to delete "+J(t.state.name)+"?",1)]),_:1}),u("div",te,[l(r,{color:"success",onClick:e[12]||(e[12]=a=>t.confirmDeleteDialog=!1)},{default:o(()=>e[27]||(e[27]=[s("Cancel")])),_:1}),l(r,{color:"error",onClick:t.remove},{default:o(()=>e[28]||(e[28]=[s("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),u("div",le,[e[33]||(e[33]=s(" Livestock ")),l(r,{class:"text-black justify-end",size:"small",onClick:t.csvExport},{default:o(()=>[l(m,{color:"green",start:""},{default:o(()=>e[29]||(e[29]=[s("mdi-download")])),_:1}),e[30]||(e[30]=s(" Download "))]),_:1},8,["onClick"]),l(r,{class:"text-white justify-end",color:"#1A237E",size:"small",onClick:t.activateAddDialog},{default:o(()=>[l(m,null,{default:o(()=>e[31]||(e[31]=[s("mdi-plus")])),_:1}),e[32]||(e[32]=s(" Add New"))]),_:1},8,["onClick"])]),l(Y,{active:t.loading,indeterminate:t.loading},null,8,["active","indeterminate"]),l(X,{class:"elevation-1",dense:"",headers:t.headers,height:"300",items:t.values,loading:t.loading},{"item.edit":o(({item:a})=>[l(m,{color:"#3F51B5",onClick:x=>t.activateEditDialog(a)},{default:o(()=>e[34]||(e[34]=[s("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})}const ke=q(h,[["render",oe]]);export{ke as default};
