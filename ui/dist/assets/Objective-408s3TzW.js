import{_ as L,F as G,v as Y,j as o,z as b,x as a,$ as V,I as s,a1 as w,D as n,P as v,J as E,a6 as H,G as K,Y as Q,r as u,a5 as R,q as W}from"./index-BWC57mqE.js";import{u as X,r as F}from"./index-Di-IQXeH.js";import{V as p,e as Z}from"./VCard-BI_548n6.js";import{V as I}from"./VForm-DLSdHKgA.js";import{V as x}from"./VTextField-BUBZtWvQ.js";import{V as M}from"./VAutocomplete-DzvWemcH.js";import{V as k}from"./VDialog-C_uX5X1X.js";import{V as h}from"./VDataTable-BT5jeeYE.js";import"./VSelect-B3SmRlp7.js";import"./VChip-CEVDHffS.js";import"./VSlideGroup-DR6QWFvL.js";const $={setup(){const d=Q(),e=u(!1),D=u(""),t=u([]),c=u({}),B=u([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Project",key:"project"},{title:"Edit",key:"edit"}]),l=u(!1),g=u(!1),C=u(!1),A=u(!1),m=R({name:"",project:""}),O=X({name:{required:F},project:{required:F}},m);function j(){e.value=!0,fetch("/settings/getObjective").then(r=>{r.json().then(i=>{e.value=!1,D.value=i}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function P(){fetch("/settings/getProject").then(r=>{r.json().then(i=>{t.value=i})})}function S(){O.value.name.$touch(),l.value=!0,m.name="",m.project=""}function N(r){c.value=JSON.parse(JSON.stringify(r)),g.value=!0,m.name=r.name,m.project=r.projectid}function T(){e.value=!0,l.value=!1;let r=new FormData;r.append("name",m.name),r.append("project",m.project),fetch("/settings/addObjective",{body:r,method:"POST"}).then(i=>{e.value=!1,i.status!==200&&i.status!==201?i.json().then(f=>{d.commit("setMessage",{type:"error",text:"Failed to save Objective! "+f.error,timeout:2e3})}):i.json().then(()=>{j(),d.commit("setMessage",{type:"primary",text:"Objective saved successfully!",timeout:2e3})})}).catch(i=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to save Objective!",timeout:2e3}),console.error("Error:",i)})}function U(){e.value=!0;let r=new FormData;r.append("name",m.name),r.append("project",m.project),fetch("/settings/editObjective/"+c.value.id,{body:r,method:"POST"}).then(i=>{e.value=!1,g.value=!1,i.status!==200&&i.status!==201?i.json().then(f=>{d.commit("setMessage",{type:"error",text:"Failed to edit Objective! "+f.error,timeout:2e3})}):i.json().then(()=>{j(),d.commit("setMessage",{type:"primary",text:"Objective edited successfully!",timeout:2e3})})}).catch(i=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to edit Objective!",timeout:2e3}),console.error("Error:",i)})}function z(){e.value=!0;let r=new FormData;C.value=!1,fetch("/settings/deleteObjective/"+c.value.id,{body:r,method:"DELETE"}).then(i=>{e.value=!1,g.value=!1,i.status!==200&&i.status!==201?i.json().then(f=>{d.commit("setMessage",{type:"error",text:"Failed to delete Objective! "+f.error,timeout:2e3})}):i.json().then(()=>{j(),d.commit("setMessage",{type:"primary",text:"Objective delete successfully!",timeout:2e3})})}).catch(i=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to delete Objective!",timeout:2e3}),console.error("Error:",i)})}function q(){fetch("/settings/getObjective?response=csv").then(r=>{r.text().then(i=>{let f="csv";const J="data:text/csv;charset=utf-8,"+escape(i),y=document.createElement("a");y.setAttribute("href",J),y.setAttribute("download",`Objective.${f}`),y.click()})}).catch(()=>{e.value=!1})}return W(()=>{j(),P()}),{loading:e,values:D,headers:B,addDialog:l,editDialog:g,form:A,state:m,v$:O,editingItem:c,confirmDeleteDialog:C,projects:t,csvExport:q,loadValues:j,activateAddDialog:S,activateEditDialog:N,create:T,saveEdit:U,remove:z}}},_={class:"d-flex justify-end"},ee={class:"d-flex justify-end justify-space-between"},te={class:"d-flex justify-end justify-space-between"},oe={class:"d-flex justify-space-between mb-6"};function le(d,e,D,t,c,B){return Y(),G(K,null,[o(k,{transition:"dialog-top-transition",width:"auto",modelValue:t.addDialog,"onUpdate:modelValue":e[4]||(e[4]=l=>t.addDialog=l)},{default:a(()=>[o(p,{width:"300"},{default:a(()=>[o(V,{color:"primary",title:"Add Objective"},{default:a(()=>[o(s,{icon:"mdi-close",color:"white",onClick:e[0]||(e[0]=l=>t.addDialog=!1)})]),_:1}),o(I,{onSubmit:e[3]||(e[3]=w(()=>{},["prevent"]))},{default:a(()=>[o(x,{modelValue:t.state.name,"onUpdate:modelValue":e[1]||(e[1]=l=>t.state.name=l),"error-messages":t.v$.name.$errors.map(l=>l.$message),label:"Objective Name","bg-color":"#BDBDBD",required:"",onInput:t.v$.name.$touch,onBlur:t.v$.name.$touch,density:"compact"},null,8,["modelValue","error-messages","onInput","onBlur"]),o(M,{modelValue:t.state.project,"onUpdate:modelValue":e[2]||(e[2]=l=>t.state.project=l),items:t.projects,"bg-color":"#BDBDBD",label:"Project","item-title":"short_name","item-value":"id",required:"","error-messages":t.v$.project.$errors.map(l=>l.$message),onChange:t.v$.project.$touch,onBlur:t.v$.project.$touch},null,8,["modelValue","items","error-messages","onChange","onBlur"]),b("div",_,[o(s,{disabled:t.v$.$error,loading:t.loading,color:"success",size:"small",type:"submit",variant:"elevated",onClick:t.create},{default:a(()=>[o(v,{start:""},{default:a(()=>e[16]||(e[16]=[n("mdi-plus")])),_:1}),e[17]||(e[17]=n(" Add "))]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(k,{transition:"dialog-top-transition",width:"auto",modelValue:t.editDialog,"onUpdate:modelValue":e[12]||(e[12]=l=>t.editDialog=l)},{default:a(()=>[o(p,{width:"360"},{default:a(()=>[n(E(t.state)+" ",1),o(V,{color:"primary",title:"Edit Objective"},{default:a(()=>[o(s,{icon:"mdi-close",color:"white",onClick:e[5]||(e[5]=l=>t.editDialog=!1)})]),_:1}),o(I,{onSubmit:e[11]||(e[11]=w(()=>{},["prevent"]))},{default:a(()=>[e[24]||(e[24]=b("br",null,null,-1)),o(x,{modelValue:t.editingItem.id,"onUpdate:modelValue":e[6]||(e[6]=l=>t.editingItem.id=l),readonly:"",density:"compact","bg-color":"#BDBDBD",label:"ID"},null,8,["modelValue"]),o(x,{modelValue:t.state.name,"onUpdate:modelValue":e[7]||(e[7]=l=>t.state.name=l),readonly:t.loading,density:"compact",clearable:"","bg-color":"#BDBDBD",label:"Objective",required:"","error-messages":t.v$.name.$errors.map(l=>l.$message),onInput:t.v$.name.$touch,onBlur:t.v$.name.$touch},null,8,["modelValue","readonly","error-messages","onInput","onBlur"]),o(M,{modelValue:t.state.project,"onUpdate:modelValue":e[8]||(e[8]=l=>t.state.project=l),items:t.projects,"bg-color":"#BDBDBD",label:"Project","item-title":"short_name","item-value":"id"},null,8,["modelValue","items"]),b("div",ee,[o(s,{disabled:t.v$.$error,loading:t.loading,color:"success",size:"small",type:"submit",variant:"elevated",onClick:t.saveEdit},{default:a(()=>[o(v,{start:""},{default:a(()=>e[18]||(e[18]=[n("mdi-plus")])),_:1}),e[19]||(e[19]=n(" Save "))]),_:1},8,["disabled","loading","onClick"]),o(s,{disabled:t.v$.$error,loading:t.loading,color:"black",size:"small",type:"submit",variant:"elevated",onClick:e[9]||(e[9]=l=>t.editDialog=!1)},{default:a(()=>[o(v,{start:""},{default:a(()=>e[20]||(e[20]=[n("mdi-cancel")])),_:1}),e[21]||(e[21]=n(" Cancel "))]),_:1},8,["disabled","loading"]),o(s,{disabled:t.v$.$error,loading:t.loading,color:"error",size:"small",type:"submit",variant:"elevated",onClick:e[10]||(e[10]=l=>t.confirmDeleteDialog=!0)},{default:a(()=>[o(v,{start:""},{default:a(()=>e[22]||(e[22]=[n("mdi-delete")])),_:1}),e[23]||(e[23]=n(" Delete "))]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(k,{width:"auto",modelValue:t.confirmDeleteDialog,"onUpdate:modelValue":e[15]||(e[15]=l=>t.confirmDeleteDialog=l),persistent:""},{default:a(()=>[o(p,null,{default:a(()=>[o(V,{color:"warning",title:"Confirm Deleteting "+t.state.name},{default:a(()=>[o(s,{icon:"mdi-close",color:"white",onClick:e[13]||(e[13]=l=>t.confirmDeleteDialog=!1)})]),_:1},8,["title"]),o(Z,null,{default:a(()=>[n("Are you sure you want to delete "+E(t.state.name)+"?",1)]),_:1}),b("div",te,[o(s,{color:"success",onClick:e[14]||(e[14]=l=>t.confirmDeleteDialog=!1)},{default:a(()=>e[25]||(e[25]=[n("Cancel")])),_:1}),o(s,{color:"error",onClick:t.remove},{default:a(()=>e[26]||(e[26]=[n("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),b("div",oe,[e[31]||(e[31]=n(" Objective ")),o(s,{class:"text-black justify-end",size:"small",onClick:t.csvExport},{default:a(()=>[o(v,{start:"",color:"green"},{default:a(()=>e[27]||(e[27]=[n("mdi-download")])),_:1}),e[28]||(e[28]=n(" Download "))]),_:1},8,["onClick"]),o(s,{color:"#1A237E",class:"text-white justify-end",size:"x-small",onClick:t.activateAddDialog},{default:a(()=>[o(v,null,{default:a(()=>e[29]||(e[29]=[n("mdi-plus")])),_:1}),e[30]||(e[30]=n(" Add New"))]),_:1},8,["onClick"])]),o(H,{active:t.loading,indeterminate:t.loading},null,8,["active","indeterminate"]),o(h,{dense:"",loading:t.loading,headers:t.headers,items:t.values,class:"elevation-1",height:"300"},{"item.edit":a(({item:l})=>[o(v,{color:"#3F51B5",onClick:g=>t.activateEditDialog(l.raw)},{default:a(()=>e[32]||(e[32]=[n("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["loading","headers","items"])],64)}const be=L($,[["render",le]]);export{be as default};
