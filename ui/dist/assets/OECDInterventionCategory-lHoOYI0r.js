import{_ as G,s as H,v as K,x as a,j as o,z as v,$ as p,P as u,D as s,E as b,I as r,a1 as j,Q as h,a0 as W,J as N,a6 as X,Y as Z,r as f,a5 as $,q as _}from"./index-BWC57mqE.js";import{u as ee,r as F}from"./index-Di-IQXeH.js";import{V as E}from"./VDialog-C_uX5X1X.js";import{V as w,e as I,d as S}from"./VCard-BI_548n6.js";import{V as A}from"./VForm-DLSdHKgA.js";import{V as D}from"./VCol-DWZn5MAN.js";import{V as M}from"./VTextField-BUBZtWvQ.js";import{V as T}from"./VAutocomplete-DzvWemcH.js";import{V as te}from"./VDataTable-BT5jeeYE.js";import{V as oe}from"./VContainer-CSFeTSsk.js";import"./VSelect-B3SmRlp7.js";import"./VChip-CEVDHffS.js";import"./VSlideGroup-DR6QWFvL.js";const ae={setup(){const d=Z(),e=f(!1),y=f([]),t=f({}),O=f([{title:"ID",key:"id"},{title:"Value Chain (VC) Node",key:"node_names"},{title:"OECD Intervention Category",key:"name"},{title:"Edit",key:"edit"}]),C=f(!1),l=f(!1),V=f(!1),k=f([]),U=f(!1),m=$({name:"",vcnodes:[]}),B=ee({name:{required:F},vcnodes:{required:F}},m);function c(){e.value=!0,fetch("/settings/getOECDInterventionCategory").then(i=>{i.json().then(n=>{e.value=!1,y.value=n}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function z(){e.value=!0,fetch("/settings/getValueChain").then(i=>{i.json().then(n=>{e.value=!1,k.value=n}).catch(()=>{e.value=!1})}).catch(()=>{e.value=!1})}function q(){B.value.name.$touch(),C.value=!0,m.name="",m.vcnodes=[]}function J(i){t.value=JSON.parse(JSON.stringify(i)),l.value=!0,m.name=i.name,m.vcnodes=i.node_ids.split(",").map(Number)}function P(){C.value=!1,e.value=!0;const i=new FormData;i.append("name",m.name),i.append("vcnodes",JSON.stringify(m.vcnodes)),fetch("/settings/addOECDInterventionCategory",{body:i,method:"POST"}).then(n=>{e.value=!1,n.status!==200&&n.status!==201?n.json().then(g=>{d.commit("setMessage",{type:"error",text:"Failed to save OECD Intervention Category! "+g.error,timeout:2e3})}):n.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"OECD Intervention Category saved successfully!",timeout:2e3})})}).catch(n=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to save OECD Intervention Category!",timeout:2e3}),console.error("Error:",n)})}function L(){e.value=!0;const i=new FormData;i.append("name",m.name),i.append("vcnodes",JSON.stringify(m.vcnodes)),fetch("/settings/editOECDInterventionCategory/"+t.value.id,{body:i,method:"POST"}).then(n=>{e.value=!1,l.value=!1,n.status!==200&&n.status!==201?n.json().then(g=>{d.commit("setMessage",{type:"error",text:"Failed to edit OECD Intervention Category! "+g.error,timeout:2e3})}):n.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"OECD Intervention Category edited successfully!",timeout:2e3})})}).catch(n=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to edit OECD Intervention Category!",timeout:2e3}),console.error("Error:",n)})}function Q(){e.value=!0;const i=new FormData;V.value=!1,fetch("/settings/deleteOECDInterventionCategory/"+t.value.id,{body:i,method:"DELETE"}).then(n=>{e.value=!1,l.value=!1,n.status!==200&&n.status!==201?n.json().then(g=>{d.commit("setMessage",{type:"error",text:"Failed to delete OECD Intervention Category! "+g.error,timeout:2e3})}):n.json().then(()=>{c(),d.commit("setMessage",{type:"primary",text:"OECD Intervention Category deleted successfully!",timeout:2e3})})}).catch(n=>{e.value=!1,d.commit("setMessage",{type:"error",text:"Failed to delete OECD Intervention Category!",timeout:2e3}),console.error("Error:",n)})}function R(){fetch("/settings/getOECDInterventionCategory?response=csv").then(i=>{i.text().then(n=>{const g="csv",Y="data:text/csv;charset=utf-8,"+escape(n),x=document.createElement("a");x.setAttribute("href",Y),x.setAttribute("download",`OECD Intervention Category.${g}`),x.click()})}).catch(()=>{e.value=!1})}return _(()=>{c(),z()}),{loading:e,values:y,headers:O,addDialog:C,editDialog:l,form:U,state:m,v$:B,editingItem:t,confirmDeleteDialog:V,vcnodes:k,csvExport:R,loadValues:c,activateAddDialog:q,activateEditDialog:J,create:P,saveEdit:L,remove:Q}}},le={class:"d-flex align-center flex-wrap"},ne={class:"d-flex align-center flext-wrap"},se={class:"d-flex align-center"},ie={class:"d-flex justify-end justify-space-between"},re={class:"d-flex justify-space-between mb-6"};function de(d,e,y,t,O,C){return K(),H(oe,{fluid:""},{default:a(()=>[o(E,{modelValue:t.addDialog,"onUpdate:modelValue":e[4]||(e[4]=l=>t.addDialog=l),transition:"dialog-top-transition",width:"auto"},{default:a(()=>[o(w,{class:"rounded-xl pa-4",elevation:"10"},{default:a(()=>[o(p,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:a(()=>[v("div",le,[o(u,{class:"mr-2 text-white"},{default:a(()=>e[15]||(e[15]=[s("mdi-shape-outline")])),_:1}),e[16]||(e[16]=v("span",{class:"text-white font-weight-bold text-h6"},"Add OECD Intervention Category",-1))]),o(b),o(r,{color:"white",icon:"mdi-close",onClick:e[0]||(e[0]=l=>t.addDialog=!1)})]),_:1}),o(I,{class:"pt-6"},{default:a(()=>[o(A,{onSubmit:e[3]||(e[3]=j(()=>{},["prevent"]))},{default:a(()=>[o(h,{dense:""},{default:a(()=>[o(D,{cols:"12"},{default:a(()=>[o(M,{modelValue:t.state.name,"onUpdate:modelValue":e[1]||(e[1]=l=>t.state.name=l),"bg-color":"#BDBDBD","error-messages":t.v$.name.$errors.map(l=>l.$message),label:"OECD Intervention Category",required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),o(D,{cols:"12"},{default:a(()=>[o(T,{modelValue:t.state.vcnodes,"onUpdate:modelValue":e[2]||(e[2]=l=>t.state.vcnodes=l),"bg-color":"#BDBDBD",chips:"","error-messages":t.v$.vcnodes.$errors.map(l=>l.$message),"item-title":"name","item-value":"id",items:t.vcnodes,label:"Value Chain (VC) Node",multiple:"",onBlur:t.v$.vcnodes.$touch,onChange:t.v$.vcnodes.$touch},null,8,["modelValue","error-messages","items","onBlur","onChange"])]),_:1})]),_:1})]),_:1})]),_:1}),o(S,{class:"d-flex justify-end"},{default:a(()=>[o(r,{class:"text-white",color:"success",disabled:t.v$.$error,loading:t.loading,type:"submit",variant:"elevated",onClick:t.create},{default:a(()=>[o(u,{start:""},{default:a(()=>e[17]||(e[17]=[s("mdi-content-save")])),_:1}),e[18]||(e[18]=s(" Add "))]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(E,{modelValue:t.editDialog,"onUpdate:modelValue":e[11]||(e[11]=l=>t.editDialog=l),transition:"dialog-top-transition",width:"auto"},{default:a(()=>[o(w,{class:"rounded-xl pa-4",elevation:"10"},{default:a(()=>[o(p,{class:"rounded-lg flex-wrap px-4",color:"primary",flat:""},{default:a(()=>[v("div",ne,[o(u,{class:"mr-2"},{default:a(()=>e[19]||(e[19]=[s("mdi-shape-outline")])),_:1}),e[20]||(e[20]=v("span",{class:"text-white font-weight-bold text-h6"},"Edit OECD Intervention Category",-1))]),o(b),o(r,{color:"white",icon:"mdi-close",onClick:e[5]||(e[5]=l=>t.editDialog=!1)})]),_:1}),o(I,{class:"pt-6"},{default:a(()=>[o(A,{onSubmit:e[8]||(e[8]=j(()=>{},["prevent"]))},{default:a(()=>[o(h,{dense:""},{default:a(()=>[o(D,{cols:"12"},{default:a(()=>[o(M,{modelValue:t.state.name,"onUpdate:modelValue":e[6]||(e[6]=l=>t.state.name=l),"bg-color":"#BDBDBD","error-messages":t.v$.name.$errors.map(l=>l.$message),label:"OECD Intervention Category",required:"",onBlur:t.v$.name.$touch,onInput:t.v$.name.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),o(D,{cols:"12"},{default:a(()=>[o(T,{modelValue:t.state.vcnodes,"onUpdate:modelValue":e[7]||(e[7]=l=>t.state.vcnodes=l),"bg-color":"#BDBDBD",chips:"","error-messages":t.v$.vcnodes.$errors.map(l=>l.$message),"item-title":"name","item-value":"id",items:t.vcnodes,label:"Value Chain (VC) Node",multiple:"",onBlur:t.v$.vcnodes.$touch,onChange:t.v$.vcnodes.$touch},null,8,["modelValue","error-messages","items","onBlur","onChange"])]),_:1})]),_:1})]),_:1})]),_:1}),o(S,{class:"d-flex justify-end justify-space-between"},{default:a(()=>[o(r,{color:"success",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:t.saveEdit},{default:a(()=>[o(u,{start:""},{default:a(()=>e[21]||(e[21]=[s("mdi-plus")])),_:1}),e[22]||(e[22]=s(" Save "))]),_:1},8,["disabled","loading","onClick"]),o(r,{color:"warning",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[9]||(e[9]=l=>t.editDialog=!1)},{default:a(()=>[o(u,{start:""},{default:a(()=>e[23]||(e[23]=[s("mdi-cancel")])),_:1}),e[24]||(e[24]=s(" Cancel "))]),_:1},8,["disabled","loading"]),o(r,{color:"error",disabled:t.v$.$error,loading:t.loading,size:"large",type:"submit",variant:"elevated",onClick:e[10]||(e[10]=l=>t.confirmDeleteDialog=!0)},{default:a(()=>[o(u,{start:""},{default:a(()=>e[25]||(e[25]=[s("mdi-delete")])),_:1}),e[26]||(e[26]=s(" Delete "))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(E,{modelValue:t.confirmDeleteDialog,"onUpdate:modelValue":e[14]||(e[14]=l=>t.confirmDeleteDialog=l),persistent:"",width:"auto"},{default:a(()=>[o(w,{class:"rounded-xl pa-4",elevation:"10"},{default:a(()=>[o(p,{class:"rounded-lg flex-wrap",color:"warning",flat:""},{default:a(()=>[o(W,{class:"text-white font-weight-bold text-wrap"},{default:a(()=>[v("div",se,[o(u,{class:"mr-2"},{default:a(()=>e[27]||(e[27]=[s("mdi-delete")])),_:1}),v("span",null,"'Confirm Deleteting ' "+N(t.state.name),1)])]),_:1}),o(b),o(r,{color:"white",icon:"mdi-close",onClick:e[12]||(e[12]=l=>t.confirmDeleteDialog=!1)})]),_:1}),o(I,null,{default:a(()=>[s("Are you sure you want to delete "+N(t.state.name)+"?",1)]),_:1}),v("div",ie,[o(r,{color:"success",onClick:e[13]||(e[13]=l=>t.confirmDeleteDialog=!1)},{default:a(()=>e[28]||(e[28]=[s("Cancel")])),_:1}),o(r,{color:"error",onClick:t.remove},{default:a(()=>e[29]||(e[29]=[s("Proceed")])),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),v("div",re,[e[34]||(e[34]=s(" OECD Intervention Categories ")),o(r,{class:"text-black justify-end",size:"small",onClick:t.csvExport},{default:a(()=>[o(u,{color:"green",start:""},{default:a(()=>e[30]||(e[30]=[s("mdi-download")])),_:1}),e[31]||(e[31]=s(" Download "))]),_:1},8,["onClick"]),o(r,{class:"text-white justify-end",color:"#1A237E",size:"small",onClick:t.activateAddDialog},{default:a(()=>[o(u,null,{default:a(()=>e[32]||(e[32]=[s("mdi-plus")])),_:1}),e[33]||(e[33]=s(" Add New"))]),_:1},8,["onClick"])]),o(X,{active:t.loading,indeterminate:t.loading},null,8,["active","indeterminate"]),o(te,{class:"elevation-1",dense:"",headers:t.headers,height:"300",items:t.values,loading:t.loading},{"item.edit":a(({item:l})=>[o(u,{color:"#3F51B5",onClick:V=>t.activateEditDialog(l)},{default:a(()=>e[35]||(e[35]=[s("mdi-square-edit-outline")])),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})}const Ie=G(ae,[["render",de]]);export{Ie as default};
