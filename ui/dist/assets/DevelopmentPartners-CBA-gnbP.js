import{_ as K,s as F,x as o,r as v,a5 as Q,q as R,Y as W,v as q,j as l,$ as h,a0 as j,z as c,P as g,D as d,J as m,E,I as u,a6 as X,a2 as Z}from"./index-BWC57mqE.js";import{u as _,r as B}from"./index-Di-IQXeH.js";import{V as ee}from"./VContainer-CSFeTSsk.js";import{V as z}from"./VDialog-C_uX5X1X.js";import{V as D,e as w}from"./VCard-BI_548n6.js";import{V as b}from"./VTextField-BUBZtWvQ.js";import{V as C}from"./VAutocomplete-DzvWemcH.js";import{V as ae}from"./VDataTable-BT5jeeYE.js";import"./VSelect-B3SmRlp7.js";import"./VChip-CEVDHffS.js";import"./VSlideGroup-DR6QWFvL.js";const te={setup(){const r=W(),a=v(!1),y=v(!1),e=v([]),k=v([]),P=v([]),t=v({}),T=v([{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Abbrrev",key:"abbrev"},{title:"Type",key:"type"},{title:"Coverage",key:"coverage"},{title:"Edit",key:"edit"}]),x=v(!1),V=v(!1),I=v(!1),s=Q({name:"",abbrev:"",website:"",type:"",coverage:[]}),U=_({name:{required:B},abbrev:{required:B},type:{required:B},coverage:{required:B}},s);function M(n){return!(r.state.auth.role==="contributor"&&r.state.auth.dev_partner!=n)}function p(){y.value=!0,fetch("/devPartners/getDevPartner").then(n=>{n.json().then(i=>{y.value=!1,e.value=i}).catch(()=>{y.value=!1})}).catch(()=>{a.value=!1})}function N(){a.value=!0,fetch("/settings/getOrgType").then(n=>{n.json().then(i=>{a.value=!1,k.value=i}).catch(()=>{a.value=!1})}).catch(()=>{a.value=!1})}function A(){a.value=!0,fetch("/project/getPossibleCoverage").then(n=>{n.json().then(i=>{a.value=!1,P.value=i}).catch(()=>{a.value=!1})}).catch(()=>{a.value=!1})}function S(){U.value.name.$touch(),x.value=!0,s.name="",s.abbrev="",s.website="",s.type="",s.coverage=[]}function O(n){t.value=JSON.parse(JSON.stringify(n)),V.value=!0,s.name=n.name,s.abbrev=n.abbrev,s.website=n.website,s.type=n.typeid,s.coverage=n.coveragesFull}function J(){a.value=!0;const n=new FormData;n.append("name",s.name),n.append("abbreviation",s.abbrev),n.append("website",s.website),n.append("type",s.type),n.append("coverage",JSON.stringify(s.coverage)),fetch("/devPartners/addDevPartner",{body:n,method:"POST"}).then(i=>{a.value=!1,x.value=!1,i.status!==200&&i.status!==201?i.json().then(f=>{r.commit("setMessage",{type:"error",text:"Failed to save Development Partner! "+f.error,timeout:2e3})}):i.json().then(()=>{p(),r.commit("setMessage",{type:"primary",text:"Development Partner saved successfully!",timeout:2e3})})}).catch(i=>{a.value=!1,r.commit("setMessage",{type:"error",text:"Failed to save Development Partner!",timeout:2e3}),console.error("Error:",i)})}function L(){a.value=!0;const n=new FormData;n.append("name",s.name),n.append("abbreviation",s.abbrev),n.append("website",s.website),n.append("type",s.type),n.append("coverage",JSON.stringify(s.coverage)),fetch("/devPartners/editDevPartner/"+t.value.id,{body:n,method:"POST"}).then(i=>{a.value=!1,V.value=!1,i.status!==200&&i.status!==201?i.json().then(f=>{r.commit("setMessage",{type:"error",text:"Failed to edit Development Partner! "+f.error,timeout:2e3})}):i.json().then(()=>{p(),r.commit("setMessage",{type:"primary",text:"Development Partner edited successfully!",timeout:2e3})})}).catch(i=>{a.value=!1,r.commit("setMessage",{type:"error",text:"Failed to edit Development Partner!",timeout:2e3}),console.error("Error:",i)})}function Y(){a.value=!0;const n=new FormData;I.value=!1,fetch("/devPartners/deleteDevPartner/"+t.value.id,{body:n,method:"DELETE"}).then(i=>{a.value=!1,V.value=!1,i.status!==200&&i.status!==201?i.json().then(f=>{r.commit("setMessage",{type:"error",text:"Failed to delete Development Partner! "+f.error,timeout:2e3})}):i.json().then(()=>{p(),r.commit("setMessage",{type:"primary",text:"Development Partner delete successfully!",timeout:2e3})})}).catch(i=>{a.value=!1,r.commit("setMessage",{type:"error",text:"Failed to delete Development Partner!",timeout:2e3}),console.error("Error:",i)})}function G(){fetch("/devPartners/csvExport").then(n=>{n.text().then(i=>{const f="csv",H="data:text/csv;charset=utf-8,"+escape(i),$=document.createElement("a");$.setAttribute("href",H),$.setAttribute("download",`Dev Partners.${f}`),$.click()})}).catch(()=>{a.value=!1})}return R(()=>{p(),N(),A()}),{loading:a,loadingValues:y,values:e,headers:T,addDialog:x,editDialog:V,state:s,v$:U,editingItem:t,confirmDeleteDialog:I,types:k,coverages:P,canEdit:M,loadValues:p,activateAddDialog:S,activateEditDialog:O,create:J,saveEdit:L,remove:Y,csvExport:G}}},le={class:"d-flex align-center"},oe={class:"d-flex justify-end"},re={class:"d-flex align-center"},ne={class:"d-flex justify-end justify-space-between"},ie={class:"d-flex justify-end justify-space-between"};function se(r,a,y,e,k,P){return q(),F(ee,{fluid:""},{default:o(()=>[l(z,{modelValue:e.addDialog,"onUpdate:modelValue":a[6]||(a[6]=t=>e.addDialog=t),"max-width":"800",transition:"dialog-top-transition"},{default:o(()=>[l(D,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[l(h,{class:"rounded-lg flex-wrap",color:"primary",flat:""},{default:o(()=>[l(j,{class:"text-white font-weight-bold text-wrap"},{default:o(()=>[c("div",le,[l(g,{class:"mr-2"},{default:o(()=>a[20]||(a[20]=[d("mdi-handshake")])),_:1}),c("span",null,m(r.$t("addDevelopmentPartner")),1)])]),_:1}),l(E),l(u,{color:"white",icon:"mdi-close",onClick:a[0]||(a[0]=t=>e.addDialog=!1)})]),_:1}),l(D,{class:"d-flex flex-column","max-height":"100%"},{default:o(()=>[l(w,{class:"pt-6",style:{"overflow-y":"auto","max-height":"100%"}},{default:o(()=>[l(b,{modelValue:e.state.name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.state.name=t),"bg-color":"#BDBDBD","error-messages":e.v$.name.$errors.map(t=>t.$message),label:r.$t("organizationName"),required:"",onBlur:e.v$.name.$touch,onInput:e.v$.name.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),l(b,{modelValue:e.state.abbrev,"onUpdate:modelValue":a[2]||(a[2]=t=>e.state.abbrev=t),"bg-color":"#BDBDBD","error-messages":e.v$.abbrev.$errors.map(t=>t.$message),label:r.$t("organizationAbbreviation"),required:"",onBlur:e.v$.abbrev.$touch,onInput:e.v$.abbrev.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),l(b,{modelValue:e.state.website,"onUpdate:modelValue":a[3]||(a[3]=t=>e.state.website=t),"bg-color":"#BDBDBD",label:r.$t("website")},null,8,["modelValue","label"]),l(C,{modelValue:e.state.type,"onUpdate:modelValue":a[4]||(a[4]=t=>e.state.type=t),"bg-color":"#BDBDBD","error-messages":e.v$.type.$errors.map(t=>t.$message),"item-title":"name","item-value":"id",items:e.types,label:r.$t("organizationType"),required:"",onBlur:e.v$.type.$touch,onChange:e.v$.type.$touch},null,8,["modelValue","error-messages","items","label","onBlur","onChange"]),l(C,{modelValue:e.state.coverage,"onUpdate:modelValue":a[5]||(a[5]=t=>e.state.coverage=t),"bg-color":"#BDBDBD","error-messages":e.v$.coverage.$errors.map(t=>t.$message),"item-title":"name","item-value":"id",items:e.coverages,label:r.$t("organizationCoverage"),multiple:"",required:"","return-object":"",onBlur:e.v$.coverage.$touch,onChange:e.v$.coverage.$touch},null,8,["modelValue","error-messages","items","label","onBlur","onChange"])]),_:1}),c("div",oe,[l(u,{color:"success",disabled:e.v$.$error,loading:e.loading,size:"large",type:"submit",variant:"elevated",onClick:e.create},{default:o(()=>[l(g,{start:""},{default:o(()=>a[21]||(a[21]=[d("mdi-plus")])),_:1}),d(" "+m(r.$t("add")),1)]),_:1},8,["disabled","loading","onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(z,{modelValue:e.editDialog,"onUpdate:modelValue":a[16]||(a[16]=t=>e.editDialog=t),"max-width":"800",transition:"dialog-top-transition"},{default:o(()=>[l(D,{class:"rounded-xl pa-4",elevation:"10"},{default:o(()=>[l(h,{class:"rounded-lg flex-wrap",color:"primary",flat:""},{default:o(()=>[l(j,{class:"text-white font-weight-bold text-wrap"},{default:o(()=>[c("div",re,[l(g,{class:"mr-2"},{default:o(()=>a[22]||(a[22]=[d("mdi-handshake")])),_:1}),c("span",null,m(r.$t("editDevelopmentPartner")),1)])]),_:1}),l(E),l(u,{color:"white",icon:"mdi-close",onClick:a[7]||(a[7]=t=>e.editDialog=!1)})]),_:1}),l(D,{class:"d-flex flex-column","max-height":"100%"},{default:o(()=>[l(w,{class:"pt-6",style:{"overflow-y":"auto","max-height":"100%"}},{default:o(()=>[l(b,{modelValue:e.editingItem.id,"onUpdate:modelValue":a[8]||(a[8]=t=>e.editingItem.id=t),"bg-color":"#BDBDBD",label:r.$t("id"),readonly:""},null,8,["modelValue","label"]),l(b,{modelValue:e.state.name,"onUpdate:modelValue":a[9]||(a[9]=t=>e.state.name=t),"bg-color":"#BDBDBD","error-messages":e.v$.name.$errors.map(t=>t.$message),label:r.$t("organizationName"),required:"",onBlur:e.v$.name.$touch,onInput:e.v$.name.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),l(b,{modelValue:e.state.abbrev,"onUpdate:modelValue":a[10]||(a[10]=t=>e.state.abbrev=t),"bg-color":"#BDBDBD","error-messages":e.v$.abbrev.$errors.map(t=>t.$message),label:r.$t("organizationAbbreviation"),required:"",onBlur:e.v$.abbrev.$touch,onInput:e.v$.abbrev.$touch},null,8,["modelValue","error-messages","label","onBlur","onInput"]),l(b,{modelValue:e.state.website,"onUpdate:modelValue":a[11]||(a[11]=t=>e.state.website=t),"bg-color":"#BDBDBD",label:r.$t("website")},null,8,["modelValue","label"]),l(C,{modelValue:e.state.type,"onUpdate:modelValue":a[12]||(a[12]=t=>e.state.type=t),"bg-color":"#BDBDBD","error-messages":e.v$.type.$errors.map(t=>t.$message),"item-title":"name","item-value":"id",items:e.types,label:r.$t("organizationType"),required:"",onBlur:e.v$.type.$touch,onChange:e.v$.type.$touch},null,8,["modelValue","error-messages","items","label","onBlur","onChange"]),l(C,{modelValue:e.state.coverage,"onUpdate:modelValue":a[13]||(a[13]=t=>e.state.coverage=t),"bg-color":"#BDBDBD","error-messages":e.v$.coverage.$errors.map(t=>t.$message),"item-title":"name","item-value":"id",items:e.coverages,label:r.$t("organizationLocation"),multiple:"",required:"","return-object":"",onBlur:e.v$.coverage.$touch,onChange:e.v$.coverage.$touch},null,8,["modelValue","error-messages","items","label","onBlur","onChange"])]),_:1}),c("div",ne,[l(u,{color:"success",disabled:e.v$.$error,loading:e.loading,size:"small",type:"submit",variant:"elevated",onClick:e.saveEdit},{default:o(()=>[l(g,{start:""},{default:o(()=>a[23]||(a[23]=[d("mdi-plus")])),_:1}),d(" "+m(r.$t("save")),1)]),_:1},8,["disabled","loading","onClick"]),l(u,{color:"black",disabled:e.v$.$error,loading:e.loading,size:"small",type:"submit",variant:"elevated",onClick:a[14]||(a[14]=t=>e.editDialog=!1)},{default:o(()=>[l(g,{start:""},{default:o(()=>a[24]||(a[24]=[d("mdi-cancel")])),_:1}),d(" "+m(r.$t("cancel")),1)]),_:1},8,["disabled","loading"]),l(u,{color:"error",disabled:e.v$.$error,loading:e.loading,size:"small",type:"submit",variant:"elevated",onClick:a[15]||(a[15]=t=>e.confirmDeleteDialog=!0)},{default:o(()=>[l(g,{start:""},{default:o(()=>a[25]||(a[25]=[d("mdi-delete")])),_:1}),d(" "+m(r.$t("delete")),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(z,{modelValue:e.confirmDeleteDialog,"onUpdate:modelValue":a[19]||(a[19]=t=>e.confirmDeleteDialog=t),persistent:"",width:"auto"},{default:o(()=>[l(D,null,{default:o(()=>[l(h,{color:"warning",title:r.$t("confirmDeleting")+" "+e.state.name},{default:o(()=>[l(u,{color:"white",icon:"mdi-close",onClick:a[17]||(a[17]=t=>e.confirmDeleteDialog=!1)})]),_:1},8,["title"]),l(w,null,{default:o(()=>[d(m(r.$t("confirmDeleteMessage",{name:e.state.name})),1)]),_:1}),c("div",ie,[l(u,{color:"success",onClick:a[18]||(a[18]=t=>e.confirmDeleteDialog=!1)},{default:o(()=>[d(m(r.$t("cancel")),1)]),_:1}),l(u,{color:"error",onClick:e.remove},{default:o(()=>[d(m(r.$t("proceed")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue"]),l(h,{class:"rounded-lg mb-2 px-4",color:"primary",flat:"",height:"60"},{default:o(()=>[l(j,{class:"text-white font-weight-bold text-h6"},{default:o(()=>[l(g,{class:"mr-2",color:"white"},{default:o(()=>a[26]||(a[26]=[d("mdi-handshake")])),_:1}),d(" "+m(r.$t("developmentPartners")),1)]),_:1}),l(E),l(u,{class:"font-weight-medium mr-2",color:"white",size:"small",onClick:e.csvExport},{default:o(()=>[l(g,{color:"white",start:""},{default:o(()=>a[27]||(a[27]=[d("mdi-download")])),_:1}),d(" "+m(r.$t("download")),1)]),_:1},8,["onClick"]),l(u,{class:"text-white font-weight-medium",color:"#1A237E",size:"small",onClick:e.activateAddDialog},{default:o(()=>[l(g,{start:""},{default:o(()=>a[28]||(a[28]=[d("mdi-plus")])),_:1}),d(" "+m(r.$t("addDevelopmentPartner")),1)]),_:1},8,["onClick"])]),_:1}),l(D,{class:"rounded-lg"},{default:o(()=>[l(w,null,{default:o(()=>[l(X,{active:e.loadingValues,indeterminate:e.loadingValues},null,8,["active","indeterminate"]),l(ae,{class:"elevation-1",dense:"",headers:e.headers,height:"600",items:e.values},{"item.coverage":o(({item:t})=>[d(m(t.coverages.join(", ")),1)]),"item.edit":o(({item:t})=>[e.canEdit(t.id)?(q(),F(g,{key:0,color:"#3F51B5",onClick:T=>e.activateEditDialog(t)},{default:o(()=>a[29]||(a[29]=[d(" mdi-square-edit-outline ")])),_:2},1032,["onClick"])):Z("",!0)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})}const Be=K(te,[["render",se]]);export{Be as default};
